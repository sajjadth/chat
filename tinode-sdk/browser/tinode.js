/*! For license information please see tinode.js.LICENSE.txt */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("tinode",[],t):"object"==typeof exports?exports.tinode=t():e.tinode=t()}(self,(()=>(()=>{var e={"./src/access-mode.ts":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AccessMode=void 0;const s=r("./src/constants.ts");class n{constructor(e){e&&(this.given="number"==typeof e.given?e.given:n.decode(e.given),this.want="number"==typeof e.want?e.want:n.decode(e.want),e.mode?"number"==typeof e.mode?this.mode=e.mode:this.mode=n.decode(e.mode):this.mode=this.given&this.want)}static decode(e){if(!e)return null;if("number"==typeof e)return e&s.AccessModePermissionsBITMASK;if("N"===e||"n"===e)return s.AccessModeFlags.NONE;const t={J:s.AccessModeFlags.JOIN,R:s.AccessModeFlags.READ,W:s.AccessModeFlags.WRITE,P:s.AccessModeFlags.PRES,A:s.AccessModeFlags.APPROVE,S:s.AccessModeFlags.SHARE,D:s.AccessModeFlags.DELETE,O:s.AccessModeFlags.OWNER};let r=s.AccessModeFlags.NONE;for(let s=0;s<e.length;s++){const n=t[e.charAt(s).toUpperCase()];n&&(r|=n)}return r}static encode(e){if(null===e||e===s.AccessModeFlags.INVALID)return null;if(e===s.AccessModeFlags.NONE)return"N";const t=["J","R","W","P","A","S","D","O"];let r="";for(let s=0;s<t.length;s++)0!=(e&1<<s)&&(r+=t[s]);return r}static update(e,t){if(!t||"string"!=typeof t)return e;let r=t.charAt(0);if("+"===r||"-"===r){let o=e;const i=t.split(/([-+])/);for(let t=1;t<i.length-1;t+=2){r=i[t];const c=n.decode(i[t+1]);if(c===s.AccessModeFlags.INVALID)return e;null!=c&&("+"===r?o|=c:"-"===r&&(o&=~c))}e=o}else{const r=n.decode(t);r!==s.AccessModeFlags.INVALID&&(e=r)}return e}static diff(e,t){return e=n.decode(e),t=n.decode(t),e===s.AccessModeFlags.INVALID||t===s.AccessModeFlags.INVALID?s.AccessModeFlags.INVALID:e&~t}static checkFlag(e,t,r){if(t=t||"mode",["given","want","mode"].filter((e=>e===t)).length)return 0!=(e[t]&r);throw new Error('Invalid AccessMode component "'+t+'"')}setMode(e){return this.mode=n.decode(e),this}updateMode(e){return this.mode=n.update(this.mode,e),this}getMode(){return n.encode(this.mode)}setGiven(e){return this.given=n.decode(e),this}updateGiven(e){return this.given=n.update(this.given,e),this}getGiven(){return n.encode(this.given)}setWant(e){return this.want=n.decode(e),this}updateWant(e){return this.want=n.update(this.want,e),this}getWant(){return n.encode(this.want)}getMissing(){return n.encode(this.want&~this.given)}getExcessive(){return n.encode(this.given&~this.want)}updateAll(e){return e&&(this.updateGiven(e.getGiven()),this.updateWant(e.getWant()),this.mode=this.given&this.want),this}isOwner(e){return n.checkFlag(this,e,s.AccessModeFlags.OWNER)}isPresencer(e){return n.checkFlag(this,e,s.AccessModeFlags.PRES)}isMuted(e){return!this.isPresencer(e)}isJoiner(e){return n.checkFlag(this,e,s.AccessModeFlags.JOIN)}isReader(e){return n.checkFlag(this,e,s.AccessModeFlags.READ)}isWriter(e){return n.checkFlag(this,e,s.AccessModeFlags.WRITE)}isApprover(e){return n.checkFlag(this,e,s.AccessModeFlags.APPROVE)}isAdmin(e){return this.isOwner(e)||this.isApprover(e)}isSharer(e){return this.isAdmin(e)||n.checkFlag(this,e,s.AccessModeFlags.SHARE)}isDeleter(e){return n.checkFlag(this,e,s.AccessModeFlags.DELETE)}toString(){return'{"mode": "'+n.encode(this.mode)+'", "given": "'+n.encode(this.given)+'", "want": "'+n.encode(this.want)+'"}'}jsonHelper(){return{mode:n.encode(this.mode),given:n.encode(this.given),want:n.encode(this.want)}}}t.AccessMode=n},"./src/cbuffer.ts":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CBuffer=void 0;const s=r("./src/utilities.ts");t.CBuffer=class{constructor(e,t){this.buffer=[],this.compare=e,this.unique=t}getAt(e){return this.buffer[e]}getLast(){return this.buffer.length>0?this.buffer[this.buffer.length-1]:void 0}put(...e){let t=null;t=1===e.length?e[0]:e;for(const e in t)Object.prototype.hasOwnProperty.call(t,e)&&s.Utilities.insertSorted(t[e],this.buffer,this.unique,this.compare)}delAt(e){const t=this.buffer.splice(e,1);if(t&&t.length>0)return t[0]}delRange(e,t){return this.buffer.splice(e,t-e)}length(){return this.buffer.length}reset(){this.buffer=[]}forEach(e,t,r,s){t|=0,r=r||this.buffer.length;for(let n=t;n<r;n++)e(s,this.buffer[n],n)}find(e,t){const{idx:r}=s.Utilities.findNearest(e,this.buffer,!t);return r}}},"./src/connection/index.ts":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){void 0===s&&(s=r),Object.defineProperty(e,s,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,s){void 0===s&&(s=r),e[s]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||s(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),n(r("./src/connection/lp-connection.ts"),t),n(r("./src/connection/ws-connection.ts"),t),n(r("./src/connection/models/index.ts"),t)},"./src/connection/lp-connection.ts":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LPConnection=void 0;const s=r("./src/utilities.ts"),n=r("./src/constants.ts"),o=r("./src/connection/models/index.ts");class i extends o.Connection{constructor(e){super(e),this.poller=null,this.sender=null,this.LP_URL=null}connect(e,t){if(this.boffClosed=!1,this.poller){if(!t)return Promise.resolve();this.poller.onreadystatechange=void 0,this.poller.abort(),this.poller=null}return e&&(this.config.host=e),new Promise(((e,t)=>{const r=s.Utilities.makeBaseUrl(this.config.host,this.config.secure?"https":"http",this.config.APIKey);s.Utilities.log("Connecting to: ",r),this.poller=this.LPPoller(r,e,t),this.poller.send(null)})).catch((e=>{console.log("LP connection failed:",e)}))}LPPoller(e,t,r){let o=new s.NetworkProviders.XMLHTTPRequest,i=!1;return o.onreadystatechange=c=>{if(o.readyState===n.XDRStatus.DONE){if(201===o.status){const r=JSON.parse(o.responseText,s.Utilities.jsonParseHelper);this.LP_URL=e+"&sid="+r.ctrl.params.sid,o=this.LPPoller(this.LP_URL),o.send(null),this.onOpen.next(),t&&(i=!0,t()),this.config.autoReconnect&&this.backoffStop()}}else if(o.status<400)this.onMessage.next(o.responseText),this.poller=this.LPPoller(this.LP_URL),this.poller.send(null);else{r&&!i&&(i=!0,r(o.responseText)),o.responseText&&this.onMessage.next(o.responseText);const e=o.status||(this.boffClosed?n.AppSettings.NETWORK_USER:n.AppSettings.NETWORK_ERROR),t=o.responseText||(this.boffClosed?n.AppSettings.NETWORK_USER_TEXT:n.AppSettings.ERROR_TEXT);this.onDisconnect.next({error:new Error(t+" ("+e+")"),code:e}),o=null,!this.boffClosed&&this.config.autoReconnect&&this.boffReconnect()}},console.log("url: ",e),o.open("GET",e,!0),o}LPSender(e){const t=s.NetworkProviders.XMLHTTPRequest();return t.onreadystatechange=e=>{if(t.readyState===n.XDRStatus.DONE&&t.status>=400)throw new Error("LP sender failed, "+t.status)},t.open("POST",e,!0),t}disconnect(){this.boffClosed=!0,this.backoffStop(),this.sender&&(this.sender.onreadystatechange=void 0,this.sender.abort(),this.sender=null),this.poller&&(this.poller.onreadystatechange=void 0,this.poller.abort(),this.poller=null);const e=new Error(n.AppSettings.NETWORK_USER_TEXT+" ("+n.AppSettings.NETWORK_USER+")");this.onDisconnect.next({error:e,code:n.AppSettings.NETWORK_USER}),this.LP_URL=null}sendText(e){if(this.sender=this.LPSender(this.LP_URL),!this.sender||this.sender.readyState!==this.sender.OPENED)throw new Error("Long poller failed to connect");this.sender.send(e)}isConnected(){return this.poller&&!0}}t.LPConnection=i},"./src/connection/models/backoff-settings.ts":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},"./src/connection/models/connection-options.ts":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},"./src/connection/models/connection.ts":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Connection=void 0;const s=r("./src/utilities.ts"),n=r("./node_modules/rxjs/_esm5/index.js");t.Connection=class{constructor(e,t){this.backoffSettings={backOffBaseDelay:2e3,backOffJitter:.3,backOffMaxIteration:10},this.boffTimer=null,this.boffIteration=0,this.boffClosed=!1,this.logger=null,this.onOpen=new n.Subject,this.onMessage=new n.Subject,this.onDisconnect=new n.Subject,this.onAutoReconnectIteration=new n.Subject,this.config=e,t&&(this.backoffSettings=t)}get transport(){return this.config.transport}boffReconnect(){clearTimeout(this.boffTimer);const e=1+this.backoffSettings.backOffJitter*Math.random(),t=this.backoffSettings.backOffBaseDelay*(Math.pow(2,this.boffIteration)*e);this.boffIteration<this.backoffSettings.backOffMaxIteration&&(this.boffIteration=this.boffIteration+1),this.onAutoReconnectIteration.next({timeout:t}),this.boffTimer=setTimeout((()=>{if(s.Utilities.log("Reconnecting, iter="+this.boffIteration+", timeout="+t),this.boffClosed)this.onAutoReconnectIteration.next({timeout:-1});else{const e=this.connect();this.onAutoReconnectIteration.next({timeout:0,promise:e})}}),t)}backoffStop(){clearTimeout(this.boffTimer),this.boffTimer=0}reconnect(e){this.backoffStop(),this.connect(null,e)}probe(){this.sendText("1")}transportAvailable(e){switch(e){case"ws":return s.NetworkProviders.WebSocket;case"lp":return s.NetworkProviders.XMLHTTPRequest;default:return console.log("Request for unknown transport",e),!1}}backoffReset(){this.boffIteration=0}}},"./src/connection/models/event-types.ts":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},"./src/connection/models/index.ts":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){void 0===s&&(s=r),Object.defineProperty(e,s,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,s){void 0===s&&(s=r),e[s]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||s(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),n(r("./src/connection/models/connection-options.ts"),t),n(r("./src/connection/models/backoff-settings.ts"),t),n(r("./src/connection/models/event-types.ts"),t),n(r("./src/connection/models/connection.ts"),t),n(r("./src/connection/models/transport.ts"),t)},"./src/connection/models/transport.ts":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},"./src/connection/ws-connection.ts":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WSConnection=void 0;const s=r("./src/utilities.ts"),n=r("./src/constants.ts"),o=r("./src/connection/models/index.ts");class i extends o.Connection{constructor(e){super(e)}connect(e,t){if(this.boffClosed=!1,this.socket){if(!t&&this.socket.readyState===this.socket.OPEN)return Promise.resolve();this.socket.close(),this.socket=null}return e&&(this.config.host=e),new Promise(((e,t)=>{const r=s.Utilities.makeBaseUrl(this.config.host,this.config.secure?"wss":"ws",this.config.APIKey);s.Utilities.log("Connecting to: ",r);const o=new s.NetworkProviders.WebSocket(r,{rejectUnauthorized:!1});o.onerror=e=>{t(e)},o.onopen=(()=>{this.config.autoReconnect&&this.backoffStop(),this.onOpen.next(),e(null)}).bind(this),o.onclose=(()=>{this.socket=null;const e=this.boffClosed?n.AppSettings.NETWORK_USER:n.AppSettings.NETWORK_ERROR,t=new Error(this.boffClosed?n.AppSettings.NETWORK_USER_TEXT:n.AppSettings.ERROR_TEXT+" ("+e+")");this.onDisconnect.next({error:t,code:e}),!this.boffClosed&&this.config.autoReconnect&&this.boffReconnect()}).bind(this),o.onmessage=(e=>{console.log("sss"),this.onMessage.next(e.data)}).bind(this),this.socket=o}))}disconnect(){this.boffClosed=!0,this.socket&&(this.backoffStop(),this.socket.close(),this.socket=null)}sendText(e){if(!this.socket||this.socket.readyState!==this.socket.OPEN)throw new Error("Websocket is not connected");this.socket.send(e)}isConnected(){return this.socket&&this.socket.readyState===this.socket.OPEN}}t.WSConnection=i},"./src/constants.ts":(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.AuthenticationScheme=t.PacketTypes=t.ServerConfigurationKeys=t.TopicTypesObj=t.XDRStatus=t.AccessModePermissionsBITMASK=t.AccessModeFlags=t.DEL_CHAR=t.base64codes=t.base64abc=t.AppSettings=t.MessageStatus=t.TopicNames=t.AppInfo=void 0,function(e){e.VERSION="0.16",e.PROTOCOL_VERSION="0",e.LIBRARY="tinode-typescript"}(t.AppInfo||(t.AppInfo={})),function(e){e.TOPIC_NEW="new",e.TOPIC_ME="me",e.TOPIC_FND="fnd",e.TOPIC_SYS="sys",e.USER_NEW="new",e.TOPIC_CHAN="chn",e.TOPIC_NEW_CHAN="nch"}(t.TopicNames||(t.TopicNames={})),function(e){e[e.NONE=0]="NONE",e[e.QUEUED=1]="QUEUED",e[e.SENDING=2]="SENDING",e[e.FAILED=3]="FAILED",e[e.SENT=4]="SENT",e[e.RECEIVED=5]="RECEIVED",e[e.READ=6]="READ",e[e.TO_ME=7]="TO_ME"}(t.MessageStatus||(t.MessageStatus={})),t.AppSettings={LOCAL_SEQ_ID:268435455,NETWORK_ERROR:503,ERROR_TEXT:"Connection failed",EXPIRE_PROMISES_TIMEOUT:5e3,EXPIRE_PROMISES_PERIOD:1e3,NETWORK_USER:418,NETWORK_USER_TEXT:"Disconnected by client"},t.base64abc=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9","+","/"],t.base64codes=[255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,62,255,255,255,63,52,53,54,55,56,57,58,59,60,61,255,255,255,0,255,255,255,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,255,255,255,255,255,255,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],t.DEL_CHAR="â¡",function(e){e[e.NONE=0]="NONE",e[e.JOIN=1]="JOIN",e[e.READ=2]="READ",e[e.WRITE=4]="WRITE",e[e.PRES=8]="PRES",e[e.APPROVE=16]="APPROVE",e[e.SHARE=32]="SHARE",e[e.DELETE=64]="DELETE",e[e.OWNER=128]="OWNER",e[e.INVALID=1048576]="INVALID"}(r=t.AccessModeFlags||(t.AccessModeFlags={})),t.AccessModePermissionsBITMASK=r.JOIN|r.READ|r.WRITE|r.PRES|r.APPROVE|r.SHARE|r.DELETE|r.OWNER,function(e){e[e.UNSENT=0]="UNSENT",e[e.OPENED=1]="OPENED",e[e.HEADERS_RECEIVED=2]="HEADERS_RECEIVED",e[e.LOADING=3]="LOADING",e[e.DONE=4]="DONE"}(t.XDRStatus||(t.XDRStatus={})),t.TopicTypesObj={me:"me",fnd:"fnd",grp:"grp",new:"grp",usr:"p2p",sys:"sys"},function(e){e.MaxMessageSize="maxMessageSize",e.MaxSubscriberCount="maxSubscriberCount",e.MaxTagCount="maxTagCount",e.MaxFileUploadSize="maxFileUploadSize"}(t.ServerConfigurationKeys||(t.ServerConfigurationKeys={})),function(e){e.Hi="hi",e.Acc="acc",e.Login="login",e.Sub="sub",e.Leave="leave",e.Pub="pub",e.Get="get",e.Set="set",e.Del="del",e.Note="note"}(t.PacketTypes||(t.PacketTypes={})),function(e){e.Basic="basic",e.Anonymous="anonymous",e.Token="token",e.Reset="reset"}(t.AuthenticationScheme||(t.AuthenticationScheme={}))},"./src/drafty.ts":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Drafty=void 0;t.Drafty=class{static parse(e){}static isPlainText(e){return!1}static getContentType(){}static hasAttachments(e){return!1}static attachments(e,t){}}},"./src/index.ts":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){void 0===s&&(s=r),Object.defineProperty(e,s,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,s){void 0===s&&(s=r),e[s]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||s(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.Constants=t.Connection=void 0,t.Connection=r("./src/connection/index.ts"),t.Constants=r("./src/constants.ts"),n(r("./src/large-file-helper.ts"),t),n(r("./src/meta-get-builder.ts"),t),n(r("./src/access-mode.ts"),t),n(r("./src/utilities.ts"),t),n(r("./src/cbuffer.ts"),t),n(r("./src/message.ts"),t),n(r("./src/tinode.ts"),t),n(r("./src/packet.ts"),t),n(r("./src/models/index.ts"),t),n(r("./src/drafty.ts"),t),n(r("./src/topic/index.ts"),t)},"./src/large-file-helper.ts":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LargeFileHelper=void 0;const s=r("./src/utilities.ts"),n=r("./src/constants.ts"),o=r("./node_modules/rxjs/_esm5/index.js");t.LargeFileHelper=class{constructor(e){this.apiKey="",this.msgId="",this.xhr=s.NetworkProviders.XMLHTTPRequest,this.onProgress=new o.Subject,this.onSuccess=new o.Subject,this.onFailure=new o.Subject,this.tinode=e,this.authToken=this.tinode.authToken,this.apiKey=this.tinode.connectionConfig.APIKey,this.msgId=e.getNextUniqueId()}uploadWithBaseUrl(e,t){if(!this.authToken)throw new Error("Must authenticate first");const r=this;let o="/v"+n.AppInfo.PROTOCOL_VERSION+"/file/u/";if(e){if(0!==e.indexOf("http://")&&0!==e.indexOf("https://"))throw new Error('Invalid base URL "'+e+'"');o=e+o}r.xhr.open("POST",o,!0),r.xhr.setRequestHeader("X-Tinode-APIKey",r.apiKey),r.xhr.setRequestHeader("X-Tinode-Auth","Token "+r.authToken.token);const i=new Promise(((e,t)=>{this.toResolve=e,this.toReject=t}));this.xhr.upload.onprogress=e=>{e.lengthComputable&&r.onProgress.next(e.loaded/e.total)},this.xhr.onload=()=>{const e=this;let t;try{t=JSON.parse(e.response,s.Utilities.jsonParseHelper)}catch(r){this.tinode.logger("ERROR: Invalid server response in LargeFileHelper",e.response),t={ctrl:{code:e.status,text:e.statusText}}}e.status>=200&&e.status<300?(r.toResolve&&r.toResolve(t.ctrl.params.url),r.onSuccess.next(t.ctrl)):e.status>=400?(r.toReject&&r.toReject(new Error(t.ctrl.text+" ("+t.ctrl.code+")")),r.onFailure.next(t.ctrl)):r.tinode.logger("ERROR: Unexpected server response status",e.status,e.response)},this.xhr.onerror=e=>{r.toReject&&r.toReject(new Error("failed")),r.onFailure.next(null)},this.xhr.onabort=e=>{r.toReject&&r.toReject(new Error("failed")),r.onFailure.next(null)};try{const e=new FormData;e.append("file",t),e.set("id",this.msgId),this.xhr.send(e)}catch(e){r.toReject&&r.toReject(new Error(e)),this.onFailure.next(null)}return i}upload(e){return this.uploadWithBaseUrl(void 0,e)}download(e,t,r){if(/^\s*([a-z][a-z0-9+.-]*:|\/\/)/im.test(e))throw new Error('The URL "'+e+'" must be relative, not absolute');if(!this.authToken)throw new Error("Must authenticate first");const n=this;this.xhr.open("GET",e,!0),this.xhr.setRequestHeader("X-Tinode-APIKey",this.apiKey),this.xhr.setRequestHeader("X-Tinode-Auth","Token "+this.authToken.token),this.xhr.responseType="blob",this.xhr.onprogress=e=>{n.onProgress&&n.onProgress.next(e.loaded)};const o=new Promise(((e,t)=>{this.toResolve=e,this.toReject=t}));this.xhr.onload=()=>{const e=this;if(200===e.status){const s=document.createElement("a");s.href=window.URL.createObjectURL(new Blob([e.response],{type:r})),s.style.display="none",s.setAttribute("download",t),document.body.appendChild(s),s.click(),document.body.removeChild(s),window.URL.revokeObjectURL(s.href),n.toResolve&&n.toResolve()}else if(e.status>=400&&n.toReject){const t=new FileReader;t.onload=()=>{const e=this;try{const t=JSON.parse(e.result,s.Utilities.jsonParseHelper);n.toReject(new Error(t.ctrl.text+" ("+t.ctrl.code+")"))}catch(t){n.tinode.logger("ERROR: Invalid server response in LargeFileHelper",e.result),n.toReject(t)}},t.readAsText(e.response)}},this.xhr.onerror=e=>{n.toReject&&n.toReject(new Error("failed"))},this.xhr.onabort=()=>{n.toReject&&n.toReject(null)};try{this.xhr.send()}catch(e){this.toReject&&this.toReject(e)}return o}cancel(){this.xhr&&this.xhr.readyState<4&&this.xhr.abort()}getId(){return this.msgId}}},"./src/message.ts":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Message=void 0;const s=r("./src/constants.ts"),n=r("./src/drafty.ts"),o=r("./node_modules/rxjs/_esm5/index.js");t.Message=class{constructor(e,t,r=!0){this.status=s.MessageStatus.NONE,this.onStatusChange=new o.Subject,this.echo=r,this.content=t,this.topicName=e,this.status=s.MessageStatus.NONE}getPubPacket(e){const t=e.initPacket(s.PacketTypes.Pub,this.topicName),r="string"==typeof this.content?n.Drafty.parse(this.content):this.content;if(t.data.content=this.content,t.data.noecho=!this.echo,r&&!n.Drafty.isPlainText(r)&&(t.data.head={mime:n.Drafty.getContentType()},t.data.content=r,n.Drafty.hasAttachments(t.data.content)&&!t.data.head.attachments)){const e=[];n.Drafty.attachments(t.data.content,(t=>{e.push(t.ref)})),t.data.head.attachments=e}return t}setStatus(e){this.status=e,this.onStatusChange.next(e)}getStatus(){return this.status}resetLocalValues(){this.seq=void 0,this.from=void 0,this.ts=void 0}}},"./src/meta-get-builder.ts":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MetaGetBuilder=void 0;t.MetaGetBuilder=class{constructor(e,t){this.tinode=e;const r=e.getMeTopic();this.contact=r&&r.getContact(t.name),this.topic=t,this.what={}}getIms(){const e=this.contact&&this.contact.updated,t=this.topic.lastDescUpdate||0;return e>t?e:t}withData(e,t,r){return this.what.data={since:e,before:t,limit:r},this}withLaterData(e){return this.withData(this.topic.maxSeq>0?this.topic.maxSeq+1:void 0,void 0,e)}withEarlierData(e){return this.withData(void 0,this.topic.minSeq>0?this.topic.minSeq:void 0,e)}withDesc(e){return this.what.desc={ims:e},this}withLaterDesc(){return this.withDesc(this.getIms())}withSub(e,t,r){const s={ims:e,limit:t};return"me"===this.topic.getType()?s.topic=r:s.user=r,this.what.sub=s,this}withOneSub(e,t){return this.withSub(e,void 0,t)}withLaterOneSub(e){return this.withOneSub(this.topic.lastSubsUpdate,e)}withLaterSub(e){return this.withSub("p2p"===this.topic.getType()?this.getIms():this.topic.lastSubsUpdate,e)}withTags(){return this.what.tags=!0,this}withCred(){return"me"===this.topic.getType()?this.what.cred=!0:this.tinode.logger("ERROR: Invalid topic type for MetaGetBuilder:withCreds",this.topic.getType()),this}withDel(e,t){return(e||t)&&(this.what.del={since:e,limit:t}),this}withLaterDel(e){return this.withDel(this.topic.maxSeq>0?this.topic.maxDel+1:void 0,e)}build(){const e=[],t=this;let r={};return["data","sub","desc","tags","cred","del"].forEach((s=>{t.what.hasOwnProperty(s)&&(e.push(s),Object.getOwnPropertyNames(t.what[s]).length>0&&(r[s]=t.what[s]))})),e.length>0?r.what=e.join(" "):r=void 0,r}}},"./src/models/account-params.ts":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},"./src/models/auth-token.ts":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},"./src/models/credential.ts":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},"./src/models/defacs.ts":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},"./src/models/del-range.ts":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},"./src/models/get-query.ts":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},"./src/models/index.ts":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){void 0===s&&(s=r),Object.defineProperty(e,s,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,s){void 0===s&&(s=r),e[s]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||s(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),n(r("./src/models/account-params.ts"),t),n(r("./src/models/auth-token.ts"),t),n(r("./src/models/credential.ts"),t),n(r("./src/models/del-range.ts"),t),n(r("./src/models/get-query.ts"),t),n(r("./src/models/defacs.ts"),t),n(r("./src/packet.ts"),t),n(r("./src/models/packet-data.ts"),t),n(r("./src/models/server-params.ts"),t),n(r("./src/models/set-params.ts"),t),n(r("./src/models/subscription-params.ts"),t),n(r("./src/models/tinode-events.ts"),t)},"./src/models/packet-data.ts":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},"./src/models/server-params.ts":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},"./src/models/set-params.ts":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},"./src/models/subscription-params.ts":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},"./src/models/tinode-events.ts":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},"./src/packet.ts":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Packet=void 0;t.Packet=class{constructor(e,t,r){this.name=e,this.data=t,this.id=r,this.failed=!1,this.sending=!1}}},"./src/tinode.ts":function(e,t,r){"use strict";var s=this&&this.__awaiter||function(e,t,r,s){return new(r||(r=Promise))((function(n,o){function i(e){try{a(s.next(e))}catch(e){o(e)}}function c(e){try{a(s.throw(e))}catch(e){o(e)}}function a(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,c)}a((s=s.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.Tinode=void 0;const n=r("./src/connection/index.ts"),o=r("./src/constants.ts"),i=r("./src/utilities.ts"),c=r("./src/packet.ts"),a=r("./src/message.ts"),u=r("./src/topic/topic.ts"),l=r("./src/topic/topic-me.ts"),d=r("./src/topic/topic-fnd.ts"),h=r("./node_modules/rxjs/_esm5/index.js"),p=r("./src/large-file-helper.ts");t.Tinode=class{constructor(e,t,r){switch(this.hardwareOS="Undefined",this.humanLanguage="en-US",this.platform="Undefined",this.appName="Undefined",this.browser="",this.loggingEnabled=!1,this.trimLongStrings=!1,this.myUserID=null,this.authenticated=!1,this.lastLogin=null,this.authToken=null,this.inPacketCount=0,this.messageId=Math.floor(65535*Math.random()+65535),this.serverInfo=null,this.deviceToken=null,this.pendingPromises={},this.connection=null,this.cache={},this.onLogin=new h.Subject,this.onRawMessage=new h.Subject,this.onNetworkProbe=new h.Subject,this.onMessage=new h.Subject,this.onCtrlMessage=new h.Subject,this.onMetaMessage=new h.Subject,this.onDataMessage=new h.Subject,this.onPresMessage=new h.Subject,this.onInfoMessage=new h.Subject,this.onConnect=new h.Subject,this.onDisconnect=new h.Subject,this.onAutoReconnectIteration=new h.Subject,this.connectionEventsSubscriptions=[],i.Utilities.initializeNetworkProviders(),this.connectionConfig=r,e&&(this.appName=e),t&&(this.platform=t),"undefined"!=typeof navigator&&(this.browser=i.Utilities.getBrowserInfo(navigator.userAgent,navigator.product),this.hardwareOS=navigator.platform,this.humanLanguage=navigator.language||"en-US"),r.transport){case"lp":this.connection=new n.LPConnection(this.connectionConfig);break;case"ws":this.connection=new n.WSConnection(this.connectionConfig);break;default:throw new Error('Invalid transport method is selected! It can be "lp" or "ws"')}this.connection&&(this.connection.logger=this.logger,this.doConnectionSubscriptions()),setInterval((()=>{this.checkExpiredPromises()}),o.AppSettings.EXPIRE_PROMISES_PERIOD)}static getVersion(){return o.AppInfo.VERSION}static getLibrary(){return o.AppInfo.LIBRARY}static setNetworkProviders(e,t){i.Utilities.initializeNetworkProviders(e,t)}doConnectionSubscriptions(){const e=this.connection.onMessage.subscribe((e=>this.onConnectionMessage(e)));this.connectionEventsSubscriptions.push(e);const t=this.connection.onOpen.subscribe((()=>this.hello()));this.connectionEventsSubscriptions.push(t);const r=this.connection.onAutoReconnectIteration.subscribe((e=>this.onAutoReconnectIteration.next(e)));this.connectionEventsSubscriptions.push(r);const s=this.connection.onDisconnect.subscribe((e=>this.onConnectionDisconnect(e)));this.connectionEventsSubscriptions.push(s)}enableLogging(e,t){this.loggingEnabled=e,this.trimLongStrings=e&&t}initPacket(e,t){switch(e){case o.PacketTypes.Hi:const r={ver:o.AppInfo.VERSION,ua:this.getUserAgent(),dev:this.deviceToken,lang:this.humanLanguage,platf:this.platform};return new c.Packet(e,r,this.getNextUniqueId());case o.PacketTypes.Acc:const s={user:null,scheme:null,secret:null,login:!1,tags:null,desc:{},cred:{},token:null};return new c.Packet(e,s,this.getNextUniqueId());case o.PacketTypes.Login:const n={scheme:null,secret:null,cred:null};return new c.Packet(e,n,this.getNextUniqueId());case o.PacketTypes.Sub:const i={topic:t,set:{},get:{}};return new c.Packet(e,i,this.getNextUniqueId());case o.PacketTypes.Leave:const a={topic:t,unsub:!1};return new c.Packet(e,a,this.getNextUniqueId());case o.PacketTypes.Pub:const u={topic:t,noecho:!1,head:null,content:{},from:null,seq:null,ts:null};return new c.Packet(e,u,this.getNextUniqueId());case o.PacketTypes.Get:const l={topic:t,what:null,desc:{},sub:{},data:{}};return new c.Packet(e,l,this.getNextUniqueId());case o.PacketTypes.Set:const d={topic:t,desc:{},sub:{},tags:[]};return new c.Packet(e,d,this.getNextUniqueId());case o.PacketTypes.Del:const h={topic:t,what:null,delseq:null,hard:!1,user:null,cred:null};return new c.Packet(e,h,this.getNextUniqueId());case o.PacketTypes.Note:const p={topic:t,seq:void 0,what:null};return new c.Packet(e,p,null);default:throw new Error("Unknown packet type requested: "+e)}}logger(e,...t){if(this.loggingEnabled){const r=new Date,s=("0"+r.getUTCHours()).slice(-2)+":"+("0"+r.getUTCMinutes()).slice(-2)+":"+("0"+r.getUTCSeconds()).slice(-2)+"."+("00"+r.getUTCMilliseconds()).slice(-3);console.log("["+s+"]",e,t.join(" "))}}cachePut(e,t,r){this.cache[e+":"+t]=r}cacheGet(e,t){return this.cache[e+":"+t]}cacheDel(e,t){delete this.cache[e+":"+t]}cacheMap(e,t){for(const r in this.cache)if(e(this.cache[r],r,t))break}attachCacheToTopic(e){e.tinode=this,e.cacheGetUser=e=>{const t=this.cacheGet("user",e);if(t)return{user:e,public:i.Utilities.mergeObj({},t)}},e.cachePutUser=(e,t)=>this.cachePut("user",e,i.Utilities.mergeObj({},t.public)),e.cacheDelUser=e=>this.cacheDel("user",e),e.cachePutSelf=()=>this.cachePut("topic",e.name,e),e.cacheDelSelf=()=>this.cacheDel("topic",e.name)}execPromise(e,t,r,s){const n=this.pendingPromises[e];n&&(delete this.pendingPromises[e],t>=200&&t<400?n.resolve&&n.resolve(r):n.reject&&n.reject(new Error(s+" ("+t+")")))}makePromise(e){let t=null;return e&&(t=new Promise(((t,r)=>{this.pendingPromises[e]={resolve:t,reject:r,ts:new Date}}))),t}checkExpiredPromises(){const e=new Error("Timeout (504)"),t=new Date((new Date).getTime()-o.AppSettings.EXPIRE_PROMISES_TIMEOUT);for(const r in this.pendingPromises)if(r){const s=this.pendingPromises[r];s&&s.ts<t&&(this.logger("Promise expired",r),delete this.pendingPromises[r],s.reject&&s.reject(e))}}getNextUniqueId(){return 0!==this.messageId?""+this.messageId++:void 0}getUserAgent(){return this.appName+" ("+(this.browser?this.browser+"; ":"")+this.hardwareOS+"); "+o.AppInfo.LIBRARY}send(e,t){let r;t&&(r=this.makePromise(t));let s={};s[e.name]=Object.assign(Object.assign({},e.data),{id:e.id}),s=i.Utilities.simplify(s);const n=JSON.stringify(s);this.logger("out: "+(this.trimLongStrings?JSON.stringify(s,i.Utilities.jsonLoggerHelper):n));try{this.connection.sendText(n)}catch(e){if(!t)throw e;this.execPromise(t,o.AppSettings.NETWORK_ERROR,null,e.message)}return r}loginSuccessful(e){e.params&&e.params.user&&(this.myUserID=e.params.user,this.authenticated=e&&e.code>=200&&e.code<300,e.params&&e.params.token&&e.params.expires?this.authToken={token:e.params.token,expires:new Date(e.params.expires)}:this.authToken=null,this.onLogin.next({code:e.code,text:e.text}))}onConnectionMessage(e){if(!e)return;if(this.inPacketCount++,this.onRawMessage.next(e),"0"===e)return void this.onNetworkProbe.next();const t=JSON.parse(e,i.Utilities.jsonParseHelper);if(!t)return this.logger("in: "+e),void this.logger("ERROR: failed to parse data");switch(this.logger("in: "+(this.trimLongStrings?JSON.stringify(t,i.Utilities.jsonLoggerHelper):e)),this.onMessage.next(t),!0){case Boolean(t.ctrl):this.handleCtrlMessage(t);break;case Boolean(t.meta):this.handleMetaMessage(t);break;case Boolean(t.data):this.handleDataMessage(t);break;case Boolean(t.pres):this.handlePresMessage(t);break;case Boolean(t.info):this.handleInfoMessage(t);break;default:this.logger("ERROR: Unknown packet received.")}}handleCtrlMessage(e){if(this.onCtrlMessage.next(e.ctrl),e.ctrl.id&&this.execPromise(e.ctrl.id,e.ctrl.code,e.ctrl,e.ctrl.text),205===e.ctrl.code&&"evicted"===e.ctrl.text){const t=this.cacheGet("topic",e.ctrl.topic);t&&t.resetSub()}if(e.ctrl.params&&"data"===e.ctrl.params.what){const t=this.cacheGet("topic",e.ctrl.topic);t&&t.allMessagesReceived(e.ctrl.params.count)}if(e.ctrl.params&&"sub"===e.ctrl.params.what){const t=this.cacheGet("topic",e.ctrl.topic);t&&t.processMetaSub([])}}handleMetaMessage(e){this.onMetaMessage.next(e.meta);const t=this.cacheGet("topic",e.meta.topic);t&&t.routeMeta(e.meta),e.meta.id&&this.execPromise(e.meta.id,200,e.meta,"META")}handleDataMessage(e){this.onDataMessage.next(e.data);const t=this.cacheGet("topic",e.data.topic);t&&t.routeData(e.data)}handlePresMessage(e){this.onPresMessage.next(e.pres);const t=this.cacheGet("topic",e.pres.topic);t&&t.routePres(e.pres)}handleInfoMessage(e){this.onInfoMessage.next(e.info);const t=this.cacheGet("topic",e.info.topic);t&&t.routeInfo(e.info)}onConnectionDisconnect(e){this.inPacketCount=0,this.serverInfo=null,this.authenticated=!1,this.cacheMap(((e,t)=>{0===t.lastIndexOf("topic:",0)&&e.resetSub()}));for(const t in this.pendingPromises)if(t){const r=this.pendingPromises[t];r&&r.reject&&r.reject(e)}for(const e of this.connectionEventsSubscriptions)e.unsubscribe();this.connectionEventsSubscriptions=[],this.pendingPromises={},this.onDisconnect.next(e)}connect(e){return this.connectionEventsSubscriptions.length||this.doConnectionSubscriptions(),this.connection.connect(e)}reconnect(e){return this.connection.connect(null,e)}disconnect(){this.connection.disconnect()}isConnected(){return this.connection.isConnected()}isAuthenticated(){return this.authenticated}hello(){return s(this,void 0,void 0,(function*(){const e=this.initPacket(o.PacketTypes.Hi);try{const t=yield this.send(e,e.id);return this.connection.backoffReset(),t.params&&(this.serverInfo=t.params),this.onConnect.next(),t}catch(e){throw this.connection.reconnect(!0),this.onDisconnect.next(e),e}}))}account(e,t,r,s,n){const i=this.initPacket(o.PacketTypes.Acc);return i.data.user=e,i.data.scheme=t,i.data.secret=r,i.data.login=s,n&&(i.data.tags=n.tags,i.data.cred=n.cred,i.data.token=n.token,i.data.desc.defacs=n.defacs,i.data.desc.public=n.public,i.data.desc.private=n.private),this.send(i,i.id)}createAccount(e,t,r,s){let n=this.account(o.TopicNames.USER_NEW,e,t,r,s);return r&&(n=n.then((e=>(this.loginSuccessful(e),e)))),n}createAccountBasic(e,t,r,s){e=e||"",t=t||"";const n=i.Utilities.base64encode(e+":"+t);return this.createAccount(o.AuthenticationScheme.Basic,n,r,s)}updateAccountBasic(e,t,r,s){return t=t||"",r=r||"",this.account(e,o.AuthenticationScheme.Basic,i.Utilities.base64encode(t+":"+r),!1,s)}login(e,t,r){return s(this,void 0,void 0,(function*(){const s=this.initPacket(o.PacketTypes.Login);s.data.scheme=e,s.data.secret=t,s.data.cred=r;const n=yield this.send(s,s.id);return this.loginSuccessful(n),n}))}loginBasic(e,t,r){return s(this,void 0,void 0,(function*(){const s=this.login(o.AuthenticationScheme.Basic,i.Utilities.base64encode(e+":"+t),r);return this.lastLogin=e,s}))}loginToken(e,t){return this.login(o.AuthenticationScheme.Token,e,t)}requestResetAuthSecret(e,t,r){return this.login(o.AuthenticationScheme.Reset,i.Utilities.base64encode(e+":"+t+":"+r))}getAuthToken(){if(this.authToken&&this.authToken.expires.getTime()>Date.now())return this.authToken;this.authToken=null}setAuthToken(e){this.authToken=e}setDeviceToken(e,t){let r=!1;if(e&&e!==this.deviceToken&&(this.deviceToken=e,t&&this.isConnected()&&this.isAuthenticated())){const t=this.initPacket(o.PacketTypes.Hi);t.data.dev=e,this.send(t,t.id),r=!0}return r}subscribe(e,t,r){const s=this.initPacket(o.PacketTypes.Sub,e);return e||(e=o.TopicNames.TOPIC_NEW),s.data.get=t,r&&(r.sub&&(s.data.set.sub=r.sub),r.desc&&(i.Utilities.isNewGroupTopicName(e)?s.data.set.desc=r.desc:"p2p"===i.Utilities.topicType(e)&&r.desc.defacs&&(s.data.set.desc={defacs:r.desc.defacs})),r.tags&&(s.data.set.tags=r.tags)),this.send(s,s.id)}leave(e,t){const r=this.initPacket(o.PacketTypes.Leave,e);return r.data.unsub=t,this.send(r,r.id)}createMessage(e,t,r=!1){return new a.Message(e,t,!r)}publishMessage(e){return e.resetLocalValues(),this.send(e.getPubPacket(this))}publish(e,t,r=!1){return this.publishMessage(this.createMessage(e,t,r))}getMeta(e,t){const r=this.initPacket(o.PacketTypes.Get,e);return r.data=i.Utilities.mergeObj(r.data,t),this.send(r,r.id)}setMeta(e,t){const r=this.initPacket(o.PacketTypes.Set,e),s=[];return t&&["desc","sub","tags","cred"].forEach((e=>{t.hasOwnProperty(e)&&(s.push(e),r.data[e]=t[e])})),0===s.length?Promise.reject(new Error("Invalid {set} parameters")):this.send(r,r.id)}delMessages(e,t,r){const s=this.initPacket(o.PacketTypes.Del,e);return s.data.what="msg",s.data.delseq=t,s.data.hard=r,this.send(s,s.id)}delTopic(e,t){return s(this,void 0,void 0,(function*(){const r=this.initPacket(o.PacketTypes.Del,e);r.data.what="topic",r.data.hard=t;const s=yield this.send(r,r.id);return this.cacheDel("topic",e),s}))}delSubscription(e,t){const r=this.initPacket(o.PacketTypes.Del,e);return r.data.what="sub",r.data.user=t,this.send(r,r.id)}delCredential(e,t){const r=this.initPacket(o.PacketTypes.Del,o.TopicNames.TOPIC_ME);return r.data.what="cred",r.data.cred={meth:e,val:t},this.send(r,r.id)}delCurrentUser(e){return s(this,void 0,void 0,(function*(){const t=this.initPacket(o.PacketTypes.Del,null);t.data.what="user",t.data.hard=e;const r=yield this.send(t,t.id);return this.myUserID=null,r}))}note(e,t,r){if(r<=0||r>=o.AppSettings.LOCAL_SEQ_ID)throw new Error("Invalid message id "+r);const s=this.initPacket(o.PacketTypes.Note,e);s.data.what=t,s.data.seq=r,this.send(s)}noteKeyPress(e){const t=this.initPacket(o.PacketTypes.Note,e);t.data.what="kp",this.send(t)}getTopic(e){let t=this.cacheGet("topic",e);return!t&&e&&(t=e===o.TopicNames.TOPIC_ME?new l.TopicMe(this):e===o.TopicNames.TOPIC_FND?new d.TopicFnd(this):new u.Topic(e,this),this.cachePut("topic",e,t),this.attachCacheToTopic(t)),t}newTopic(){const e=new u.Topic(o.TopicNames.TOPIC_NEW,this);return this.attachCacheToTopic(e),e}newGroupTopicName(){return o.TopicNames.TOPIC_NEW+this.getNextUniqueId()}newTopicWith(e){const t=new u.Topic(e,this);return this.attachCacheToTopic(t),t}getMeTopic(){return this.getTopic(o.TopicNames.TOPIC_ME)}getFndTopic(){return this.getTopic(o.TopicNames.TOPIC_FND)}getLargeFileHelper(){return new p.LargeFileHelper(this)}getCurrentUserID(){return this.myUserID}isMe(e){return this.myUserID===e}getCurrentLogin(){return this.lastLogin}getServerInfo(){return this.serverInfo}getServerLimit(e,t){return(this.serverInfo?this.serverInfo[e]:null)||t}setHumanLanguage(e){e&&(this.humanLanguage=e)}isTopicOnline(e){const t=this.getMeTopic(),r=t&&t.getContact(String(name));return r&&r.online}}},"./src/topic/index.ts":function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){void 0===s&&(s=r),Object.defineProperty(e,s,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,s){void 0===s&&(s=r),e[s]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||s(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),n(r("./src/topic/topic-fnd.ts"),t),n(r("./src/topic/topic-me.ts"),t),n(r("./src/topic/topic.ts"),t)},"./src/topic/topic-fnd.ts":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TopicFnd=void 0;const s=r("./src/constants.ts"),n=r("./src/utilities.ts"),o=r("./src/topic/topic.ts");class i extends o.Topic{constructor(e){super(s.TopicNames.TOPIC_FND,e),this.contacts={}}processMetaSub(e){let t=Object.getOwnPropertyNames(this.contacts).length;this.contacts={};for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)){let s=e[r];const o=s.topic?s.topic:s.user;s.updated=new Date(s.updated),s.seen&&s.seen.when&&(s.seen.when=new Date(s.seen.when)),s=n.Utilities.mergeToCache(this.contacts,o,s),t++,this.onMetaSub&&this.onMetaSub.next(s)}t>0&&this.onSubsUpdated&&this.onSubsUpdated.next(this.contacts)}publish(){return Promise.reject(new Error('Publishing to "fnd" is not supported'))}setMeta(e){return Object.getPrototypeOf(i.prototype).setMeta.call(this,e).then((()=>{Object.keys(this.contacts).length>0&&(this.contacts={},this.onSubsUpdated.next([]))}))}getContacts(){return this.contacts}}t.TopicFnd=i},"./src/topic/topic-me.ts":function(e,t,r){"use strict";var s=this&&this.__awaiter||function(e,t,r,s){return new(r||(r=Promise))((function(n,o){function i(e){try{a(s.next(e))}catch(e){o(e)}}function c(e){try{a(s.throw(e))}catch(e){o(e)}}function a(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,c)}a((s=s.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.TopicMe=void 0;const n=r("./src/constants.ts"),o=r("./src/access-mode.ts"),i=r("./src/utilities.ts"),c=r("./src/topic/topic.ts"),a=r("./node_modules/rxjs/_esm5/index.js");class u extends c.Topic{constructor(e){super(n.TopicNames.TOPIC_ME,e),this.contacts={},this.onContactUpdate=new a.Subject,this.processMetaCreds=(e,t)=>{1===e.length&&e[0]===n.DEL_CHAR&&(e=[]),t?e.forEach((e=>{if(e.val){let t=this.credentials.findIndex((t=>t.meth===e.meth&&t.val===e.val));t<0?(e.done||(t=this.credentials.findIndex((t=>t.meth===e.meth&&!t.done)),t>=0&&this.credentials.splice(t,1)),this.credentials.push(e)):this.credentials[t].done=e.done}else if(e.resp){const t=this.credentials.findIndex((t=>t.meth===e.meth&&!t.done));t>=0&&(this.credentials[t].done=!0)}})):this.credentials=e,this.onCredsUpdated.next(this.credentials)},this.contacts={}}processMetaDesc(e){const t=e.acs&&!e.acs.isPresencer()&&this.acs&&this.acs.isPresencer();if(i.Utilities.mergeObj(this,e),i.Utilities.stringToDate(this),t)for(const e in this.contacts)if(Object.prototype.hasOwnProperty.call(this.contacts,e)){const t=this.contacts[e];t.online&&(t.online=!1,t.seen?t.seen.when=new Date:t.seen={when:new Date},this.onContactUpdate.next(),this.onContactUpdate&&this.onContactUpdate.next({what:"off",contact:t}))}this.onMetaDesc.next(this)}processMetaSub(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t)){const r=e[t],s=r.topic;if(s===n.TopicNames.TOPIC_FND||s===n.TopicNames.TOPIC_ME)continue;r.updated=new Date(r.updated),r.touched=r.touched?new Date(r.touched):void 0,r.deleted=r.deleted?new Date(r.deleted):null;let o=null;if(r.deleted)o=r,delete this.contacts[s];else if(void 0!==r.seq&&(r.seq=0|r.seq,r.recv=0|r.recv,r.read=0|r.read,r.unread=r.seq-r.read),r.seen&&r.seen.when&&(r.seen.when=new Date(r.seen.when)),o=i.Utilities.mergeToCache(this.contacts,s,r),i.Utilities.isP2PTopicName(s)&&this.cachePutUser(s,o),!r.noForwarding){const e=this.tinode.getTopic(s);e&&(r._noForwarding=!0,e._processMetaDesc(r))}this.onMetaSub.next(o),this.onSubsUpdated.next(Object.keys(this.contacts))}}routePres(e){if("term"===e.what)return void this.resetSub();if("upd"===e.what&&e.src===n.TopicNames.TOPIC_ME)return void this.getMeta(this.startMetaQuery().withDesc().build());const t=this.contacts[e.src];if(t){switch(e.what){case"on":t.online=!0;break;case"off":t.online&&(t.online=!1,t.seen?t.seen.when=new Date:t.seen={when:new Date});break;case"msg":t.touched=new Date,t.seq=0|e.seq,e.act&&!this.tinode.isMe(e.act)||(t.read=t.read?Math.max(t.read,t.seq):t.seq,t.recv=t.recv?Math.max(t.read,t.recv):t.recv),t.unread=t.seq-t.read;break;case"upd":this.getMeta(this.startMetaQuery().withLaterOneSub(e.src).build());break;case"acs":t.acs?t.acs.updateAll(e.dacs):t.acs=(new o.AccessMode).updateAll(e.dacs),t.touched=new Date;break;case"ua":t.seen={when:new Date,ua:e.ua};break;case"recv":e.seq=0|e.seq,t.recv=t.recv?Math.max(t.recv,e.seq):e.seq;break;case"read":e.seq=0|e.seq,t.read=t.read?Math.max(t.read,e.seq):e.seq,t.recv=t.recv?Math.max(t.read,t.recv):t.recv,t.unread=t.seq-t.read;break;case"gone":delete this.contacts[e.src];break;case"del":break;default:this.tinode.logger('INFO: Unsupported presence update in "me"',e.what)}this.onContactUpdate.next({what:e.what,contact:t})}else if("acs"===e.what){const t=new o.AccessMode(e.dacs);if(!t||t.mode===n.AccessModeFlags.INVALID)return void this.tinode.logger("ERROR: Invalid access mode update",e.src,e.dacs);if(t.mode===n.AccessModeFlags.NONE)return void this.tinode.logger("WARNING: Removing non-existent subscription",e.src,e.dacs);this.getMeta(this.startMetaQuery().withOneSub(void 0,e.src).build()),this.contacts[e.src]={touched:new Date,topic:e.src,online:!1,acs:t}}else"tags"===e.what&&this.getMeta(this.startMetaQuery().withTags().build());this.onPres.next(e)}publish(){return Promise.reject(new Error('Publishing to "me" is not supported'))}delCredential(e,t){return s(this,void 0,void 0,(function*(){if(!this.subscribed)return Promise.reject(new Error('Cannot delete credential in inactive "me" topic'));const r=this.tinode.delCredential(e,t),s=this.credentials.findIndex((r=>r.meth===e&&r.val===t));return s>-1&&this.credentials.splice(s,1),this.onCredsUpdated.next(this.credentials),r}))}getContacts(){return this.contacts}setMsgReadRecv(e,t,r,s){const n=this.contacts[e];let o=!1,i=!1;if(n){switch(r|=0,n.seq=0|n.seq,n.read=0|n.read,n.recv=0|n.recv,t){case"recv":o=n.recv,n.recv=Math.max(n.recv,r),i=o!==n.recv;break;case"read":o=n.read,n.read=Math.max(n.read,r),i=o!==n.read;break;case"msg":o=n.seq,n.seq=Math.max(n.seq,r),(!n.touched||n.touched<s)&&(n.touched=s),i=o!==n.seq}n.recv<n.read&&(n.recv=n.read,i=!0),n.seq<n.recv&&(n.seq=n.recv,(!n.touched||n.touched<s)&&(n.touched=s),i=!0),n.unread=n.seq-n.read,!i||n.acs&&n.acs.isMuted()||this.onContactUpdate.next({what:t,contact:n})}}getMsgReadRecv(e,t){const r=this.contacts[e];if(r)switch(t){case"recv":return 0|r.recv;case"read":return 0|r.read;case"msg":return 0|r.seq}return 0}getContact(e){return this.contacts[e]}getAccessMode(){if(String(name)){const e=this.contacts[Number(name)];return e?e.acs:null}return this.acs}isContactArchived(e){const t=this.contacts[e];return t?!(!t.private||!t.private.arch):null}getCredentials(){return this.credentials}}t.TopicMe=u},"./src/topic/topic.ts":function(e,t,r){"use strict";var s=this&&this.__awaiter||function(e,t,r,s){return new(r||(r=Promise))((function(n,o){function i(e){try{a(s.next(e))}catch(e){o(e)}}function c(e){try{a(s.throw(e))}catch(e){o(e)}}function a(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,c)}a((s=s.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.Topic=void 0;const n=r("./src/constants.ts"),o=r("./src/meta-get-builder.ts"),i=r("./src/access-mode.ts"),c=r("./src/utilities.ts"),a=r("./src/cbuffer.ts"),u=r("./node_modules/rxjs/_esm5/index.js");t.Topic=class{constructor(e,t){this.new=!0,this.tags=[],this.users={},this.credentials=[],this.subscribed=!1,this.created=null,this.update=null,this.touched=null,this.noEarlierMsgs=!1,this.acs=new i.AccessMode(null),this.queuedSeqId=n.AppSettings.LOCAL_SEQ_ID,this.messages=new a.CBuffer(((e,t)=>e.seq-t.seq),!0),this.maxSeq=0,this.minSeq=0,this.maxDel=0,this.private=null,this.public=null,this.onData=new u.Subject,this.onMeta=new u.Subject,this.onPres=new u.Subject,this.onInfo=new u.Subject,this.onMetaSub=new u.Subject,this.onMetaDesc=new u.Subject,this.onSubsUpdated=new u.Subject,this.onTagsUpdated=new u.Subject,this.onCredsUpdated=new u.Subject,this.onDeleteTopic=new u.Subject,this.onAllMessagesReceived=new u.Subject,this.cacheDelSelf=()=>{},this.cachePutSelf=()=>{},this.cacheGetUser=e=>{},this.cacheDelUser=e=>{},this.cachePutUser=(e,t)=>{},this.processMetaCreds=(e,t)=>{},this.name=e,this.tinode=t}isSubscribed(){return this.subscribed}subscribe(e,t){return s(this,void 0,void 0,(function*(){if(this.isSubscribed())return Promise.resolve(this);const r=yield this.tinode.subscribe(this.name||n.TopicNames.TOPIC_NEW,e,t);if(r.code>=300)return r;if(this.subscribed=!0,this.acs=r.params&&r.params.acs?r.params.acs:this.acs,this.new){if(this.new=!1,this.name=r.topic,this.created=r.ts,this.updated=r.ts,this.cachePutSelf(),this.name!==n.TopicNames.TOPIC_ME&&this.name!==n.TopicNames.TOPIC_FND){const e=this.tinode.getMeTopic();e&&e.processMetaSub([{noForwarding:!0,topic:this.name,created:r.ts,updated:r.ts,acs:this.acs}])}t&&t.desc&&(t.desc.noForwarding=!0,this.processMetaDesc(t.desc))}return r}))}createMessage(e,t){return this.tinode.createMessage(this.name,e,t)}publish(e,t){return this.publishMessage(this.createMessage(e,t))}publishMessage(e){return s(this,void 0,void 0,(function*(){if(!this.subscribed)return Promise.reject(new Error("Cannot publish on inactive topic"));e.setStatus(n.MessageStatus.SENDING);try{const t=yield this.tinode.publishMessage(e),r=t.params.seq;return r&&e.setStatus(n.MessageStatus.SENT),e.ts=t.ts,this.swapMessageId(e,r),this.routeData(e),t}catch(t){this.tinode.logger("WARNING: Message rejected by the server",t),e.setStatus(n.MessageStatus.FAILED),this.onData.next()}}))}publishDraft(e,t){if(!this.subscribed)return Promise.reject(new Error("Cannot publish on inactive topic"));const r=e.seq||this.getQueuedSeqId();return e.noForwarding||(e.noForwarding=!0,e.seq=r,e.ts=new Date,e.from=this.tinode.getCurrentUserID(),e.echo=!1,this.messages.put(e),this.onData.next(e)),t=(t||Promise.resolve()).then((()=>e.cancelled?{code:300,text:"cancelled"}:this.publishMessage(e)),(t=>{this.tinode.logger("WARNING: Message draft rejected by the server",t),e.setStatus(n.MessageStatus.FAILED),this.messages.delAt(this.messages.find(e)),this.onData.next()}))}leave(e){return s(this,void 0,void 0,(function*(){if(!this.subscribed&&!e)return Promise.reject(new Error("Cannot leave inactive topic"));const t=yield this.tinode.leave(this.name,e);return this.resetSub(),e&&(this.tinode.cacheDel("topic",this.name),this.gone()),t}))}getMeta(e){return this.tinode.getMeta(this.name,e)}getMessagesPage(e,t){const r=this.startMetaQuery();let s=this.getMeta(r.build());return t?r.withLaterData(e):(r.withEarlierData(e),s=s.then((e=>{e&&e.params&&!e.params.count&&(this.noEarlierMsgs=!0)}))),s}setMeta(e){return s(this,void 0,void 0,(function*(){e.tags&&(e.tags=c.Utilities.normalizeArray(e.tags));const t=yield this.tinode.setMeta(this.name,e);return t&&t.code>=300||(e.sub&&(e.sub.topic=this.name,t.params&&t.params.acs&&(e.sub.acs=t.params.acs,e.sub.updated=t.ts),e.sub.user||(e.sub.user=this.tinode.getCurrentUserID(),e.desc||(e.desc={})),e.sub.noForwarding=!0,this.processMetaSub([e.sub])),e.desc&&(t.params&&t.params.acs&&(e.desc.acs=t.params.acs,e.desc.updated=t.ts),this.processMetaDesc(e.desc)),e.tags&&this.processMetaTags(e.tags),e.cred&&this.processMetaCreds([e.cred],!0)),t}))}updateMode(e,t){const r=e?this.subscriber(e):null,s=r?r.acs.updateGiven(t).getGiven():this.getAccessMode().updateWant(t).getWant();return this.setMeta({sub:{user:e,mode:s}})}invite(e,t){return this.setMeta({sub:{user:e,mode:t}})}archive(e){return this.private&&this.private.arch===e?Promise.resolve(e):this.setMeta({desc:{private:{arch:!!e||n.DEL_CHAR}}})}delMessages(e,t){return s(this,void 0,void 0,(function*(){if(!this.subscribed)return Promise.reject(new Error("Cannot delete messages in inactive topic"));e.sort(((e,t)=>e.low<t.low?1:e.low===t.low?t.hi&&e.hi>=t.hi!=!0?-1:1:-1));const r=e.reduce(((e,t)=>(t.low<n.AppSettings.LOCAL_SEQ_ID&&(!t.hi||t.hi<n.AppSettings.LOCAL_SEQ_ID?e.push(t):e.push({low:t.low,hi:this.maxSeq+1})),e)),[]);let s;s=r.length>0?this.tinode.delMessages(this.name,r,t):Promise.resolve({params:{del:0}});const o=yield s;return o.params.del>this.maxDel&&(this.maxDel=o.params.del),e.forEach((e=>{e.hi?this.flushMessageRange(e.low,e.hi):this.flushMessage(e.low)})),this.updateDeletedRanges(),this.onData.next(),o}))}delMessagesAll(e){return!this.maxSeq||this.maxSeq<=0?Promise.resolve():this.delMessages([{low:1,hi:this.maxSeq+1,all:!0}],e)}delMessagesList(e,t){e.sort(((e,t)=>e-t));const r=e.reduce(((e,t)=>{if(0===e.length)e.push({low:t});else{const r=e[e.length-1];!r.hi&&t!==r.low+1||t>r.hi?e.push({low:t}):r.hi=r.hi?Math.max(r.hi,t+1):t+1}return e}),[]);return this.delMessages(r,t)}delTopic(e=!1){return s(this,void 0,void 0,(function*(){const t=yield this.tinode.delTopic(this.name,e);return this.resetSub(),this.gone(),t}))}delSubscription(e){return s(this,void 0,void 0,(function*(){if(!this.subscribed)return Promise.reject(new Error("Cannot delete subscription in inactive topic"));const t=yield this.tinode.delSubscription(this.name,e);return delete this.users[e],this.onSubsUpdated.next(Object.keys(this.users)),t}))}note(e,t){if(!this.subscribed)return;const r=this.tinode.getMeTopic(),s=this.users[this.tinode.getCurrentUserID()];let n=!1;s?(!s[e]||s[e]<t)&&(s[e]=t,n=!0):r&&(n=r.getMsgReadRecv(this.name,e)<t),n&&this.tinode.note(this.name,e,t),r&&r.setMsgReadRecv(this.name,e,t)}noteRecv(e){this.note("recv",e)}noteRead(e){(e=e||this.maxSeq)>0&&this.note("read",e)}noteKeyPress(){this.subscribed?this.tinode.noteKeyPress(this.name):this.tinode.logger("INFO: Cannot send notification in inactive topic")}userDesc(e){const t=this.cacheGetUser(e);if(t)return t}p2pPeerDesc(){if(this.isP2P())return this.users[this.name]}getSubscribers(){return this.users}subscriber(e){return this.users[e]}getTags(){return this.tags.slice(0)}getMessages(e,t){const r="number"==typeof e?this.messages.find({seq:e},!0):void 0,s="number"==typeof t?this.messages.find({seq:t},!0):void 0;if(-1!==r&&-1!==s){const e=[];return this.messages.forEach((t=>e.push(t)),r,s),e}}queuedMessages(){return this.getMessages(n.AppSettings.LOCAL_SEQ_ID)}msgReceiptCount(e,t){let r=0;if(t>0){const s=this.tinode.getCurrentUserID();for(const n in this.users)if(n){const o=this.users[n];o.user!==s&&o[e]>=t&&r++}}return r}msgReadCount(e){return this.msgReceiptCount("read",e)}msgRecvCount(e){return this.msgReceiptCount("recv",e)}msgHasMoreMessages(e){return e?this.seq>this.maxSeq:this.minSeq>1&&!this.noEarlierMsgs}isNewMessage(e){return this.maxSeq<=e}flushMessage(e){const t=this.messages.find({seq:e});return t>=0?this.messages.delAt(t):void 0}swapMessageId(e,t){const r=this.messages.find({seq:e.seq},!0),s=this.messages.length();e.seq=t,0<=r&&r<s&&(r>0&&this.messages.getAt(r-1).seq>=t||r+1<s&&this.messages.getAt(r+1).seq<=t)&&(this.messages.delAt(r),this.messages.put(e))}flushMessageRange(e,t){const r=this.messages.find({seq:e},!0);return r>=0?this.messages.delRange(r,this.messages.find({seq:t},!0)):[]}cancelSend(e){const t=this.messages.find({seq:e});if(t>=0){const e=this.messages.getAt(t),r=this.msgStatus(e);if(r===n.MessageStatus.QUEUED||r===n.MessageStatus.FAILED)return e.cancelled=!0,this.messages.delAt(t),this.onData.next(),!0}return!1}getType(){return this.name}getAccessMode(){return this.acs}startMetaQuery(){return new o.MetaGetBuilder(this.tinode,this)}isArchived(){return!(!this.private||!this.private.arch)}isChannel(){return c.Utilities.isChannelTopicName(this.name)}isGroup(){return"grp"===this.getType()}isP2P(){return"p2p"===this.getType()}msgStatus(e){let t=n.MessageStatus.NONE;return this.tinode.isMe(e.from)?e.sending?t=n.MessageStatus.SENDING:e.failed?t=n.MessageStatus.FAILED:e.seq>=n.AppSettings.LOCAL_SEQ_ID?t=n.MessageStatus.QUEUED:this.msgReadCount(e.seq)>0?t=n.MessageStatus.READ:this.msgRecvCount(e.seq)>0?t=n.MessageStatus.RECEIVED:e.seq>0&&(t=n.MessageStatus.SENT):t=n.MessageStatus.TO_ME,t}routeData(e){e.content&&(!this.touched||this.touched<e.ts)&&(this.touched=e.ts),e.seq>this.maxSeq&&(this.maxSeq=e.seq),(e.seq<this.minSeq||0===this.minSeq)&&(this.minSeq=e.seq),e.noForwarding||(this.messages.put(e),this.updateDeletedRanges()),this.onData.next(e);const t=this.tinode.getMeTopic();t&&t.setMsgReadRecv(this.name,!e.from||this.tinode.isMe(e.from)?"read":"msg",e.seq,e.ts)}routeMeta(e){e.desc&&(this.lastDescUpdate=e.ts,this.processMetaDesc(e.desc)),e.sub&&e.sub.length>0&&(this.lastSubsUpdate=e.ts,this.processMetaSub(e.sub)),e.del&&this.processDelMessages(e.del.clear,e.del.delseq),e.tags&&this.processMetaTags(e.tags),e.cred&&this.processMetaCreds(e.cred),this.onMeta.next(e)}routePres(e){let t;switch(e.what){case"del":this.processDelMessages(e.clear,e.delseq);break;case"on":case"off":t=this.users[e.src],t?t.online="on"===e.what:this.tinode.logger("WARNING: Presence update for an unknown user",this.name,e.src);break;case"term":this.resetSub();break;case"acs":const r=e.src||this.tinode.getCurrentUserID();if(t=this.users[r],t)t.acs.updateAll(e.dacs),this.processMetaSub([{user:r,updated:new Date,acs:t.acs}]);else{const s=(new i.AccessMode).updateAll(e.dacs);s&&s.mode!==n.AccessModeFlags.NONE&&(t=this.cacheGetUser(r),t?t.acs=s:(t={user:r,acs:s},this.getMeta(this.startMetaQuery().withOneSub(void 0,r).build())),t.updated=new Date,this.processMetaSub([t]))}break;default:this.tinode.logger("INFO: Ignored presence update",e.what)}this.onPres.next(e)}routeInfo(e){if("kp"!==e.what){const t=this.users[e.from];if(t&&(t[e.what]=e.seq,t.recv<t.read&&(t.recv=t.read)),this.tinode.isMe(e.from)){const t=this.tinode.getMeTopic();t&&t.setMsgReadRecv(e.topic,e.what,e.seq)}}this.onInfo.next(e)}processMetaDesc(e){if("p2p"===this.getType()&&delete e.defacs,c.Utilities.mergeObj(this,e),c.Utilities.stringToDate(this),this.name!==n.TopicNames.TOPIC_ME&&!e.noForwarding){const t=this.tinode.getMeTopic();t&&t.processMetaSub([{noForwarding:!0,topic:this.name,updated:this.updated,touched:this.touched,acs:e.acs,seq:e.seq,read:e.read,recv:e.recv,public:e.public,private:e.private}])}this.onMetaDesc.next(this)}processMetaSub(e){for(const t in e)if(t){const r=e[t];r.updated=new Date(r.updated),r.deleted=r.deleted?new Date(r.deleted):null;let s=null;r.deleted?(delete this.users[r.user],s=r):(this.tinode.isMe(r.user)&&r.acs&&this.processMetaDesc({updated:r.updated||new Date,touched:r.updated,acs:r.acs}),s=this.updateCachedUser(r.user,r)),this.onMetaSub.next(s)}this.onSubsUpdated&&this.onSubsUpdated.next(Object.keys(this.users))}processMetaTags(e){1===e.length&&e[0]===n.DEL_CHAR&&(e=[]),this.tags=e,this.onTagsUpdated.next(e)}processDelMessages(e,t){this.maxDel=Math.max(e,this.maxDel),this.clear=Math.max(e,this.clear);const r=this;let s=0;Array.isArray(t)&&t.forEach((e=>{if(e.hi)for(let t=e.low;t<e.hi;t++)s++,r.flushMessage(t);else s++,r.flushMessage(e.low)})),s>0&&(this.updateDeletedRanges(),this.onData.next())}allMessagesReceived(e){this.updateDeletedRanges(),this.onAllMessagesReceived.next(e)}resetSub(){this.subscribed=!1}gone(){this.messages.reset(),this.users={},this.acs=new i.AccessMode(null),this.private=null,this.public=null,this.maxSeq=0,this.minSeq=0,this.subscribed=!1;const e=this.tinode.getMeTopic();e&&e.routePres({noForwarding:!0,what:"gone",topic:n.TopicNames.TOPIC_ME,src:this.name}),this.onDeleteTopic.next()}updateCachedUser(e,t){let r=this.cacheGetUser(e);return r=c.Utilities.mergeObj(r||{},t),this.cachePutUser(e,r),c.Utilities.mergeToCache(this.users,e,r)}getQueuedSeqId(){return this.queuedSeqId++}updateDeletedRanges(){const e=[];let t=null;const r=this.messages.getAt(0);r&&this.minSeq>1&&!this.noEarlierMsgs?r.hi?(r.seq>1&&(r.seq=1),r.hi<this.minSeq-1&&(r.hi=this.minSeq-1),t=r):(t={seq:1,hi:this.minSeq-1},e.push(t)):t={seq:0,hi:0},this.messages.forEach((r=>{r.seq>=n.AppSettings.LOCAL_SEQ_ID||(r.seq!==(t.hi||t.seq)+1?t.hi?t.hi=r.hi||r.seq:(t={seq:(t.hi||t.seq)+1,hi:r.hi||r.seq},e.push(t)):t=r)}));const s=this.messages.getLast(),o=Math.max(this.seq,this.maxSeq)||0;(o>0&&!s||s&&(s.hi||s.seq)<o)&&(s&&s.hi?s.hi=o:e.push({seq:s?s.seq+1:1,hi:o})),e.forEach((e=>{this.messages.put(e)}))}}},"./src/utilities.ts":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Utilities=t.CTextEncoder=t.CTextDecoder=t.NetworkProviders=void 0;const s=r("./src/constants.ts"),n=r("./src/access-mode.ts");t.NetworkProviders={WebSocket:null,XMLHTTPRequest:null},"undefined"==typeof TextDecoder?(t.CTextEncoder=r("./node_modules/util/util.js").TextEncoder,t.CTextDecoder=r("./node_modules/util/util.js").TextDecoder):(t.CTextDecoder=TextDecoder,t.CTextEncoder=TextEncoder);class o{static getBase64Code(e){if(e>=s.base64codes.length)throw new Error("Unable to parse base64 string.");const t=s.base64codes[e];if(255===t)throw new Error("Unable to parse base64 string.");return t}static bytesToBase64(e){const t=e.length;let r="",n=0;for(n=2;n<t;n+=3)r+=s.base64abc[e[n-2]>>2],r+=s.base64abc[(3&e[n-2])<<4|e[n-1]>>4],r+=s.base64abc[(15&e[n-1])<<2|e[n]>>6],r+=s.base64abc[63&e[n]];return n===t+1&&(r+=s.base64abc[e[n-2]>>2],r+=s.base64abc[(3&e[n-2])<<4],r+="=="),n===t&&(r+=s.base64abc[e[n-2]>>2],r+=s.base64abc[(3&e[n-2])<<4|e[n-1]>>4],r+=s.base64abc[(15&e[n-1])<<2],r+="="),r}static base64ToBytes(e){if(e.length%4!=0)throw new Error("Unable to parse base64 string.");const t=e.indexOf("=");if(-1!==t&&t<e.length-2)throw new Error("Unable to parse base64 string.");const r=e.endsWith("==")?2:e.endsWith("=")?1:0,s=e.length,n=new Uint8Array(s/4*3);for(let t=0,r=0;t<s;t+=4,r+=3){const s=o.getBase64Code(e.charCodeAt(t))<<18|o.getBase64Code(e.charCodeAt(t+1))<<12|o.getBase64Code(e.charCodeAt(t+2))<<6|o.getBase64Code(e.charCodeAt(t+3));n[r]=s>>16,n[r+1]=s>>8&255,n[r+2]=255&s}return n.subarray(0,n.length-r)}static base64encode(e,r=new t.CTextEncoder){return o.bytesToBase64(r.encode(e))}static base64decode(e,r=new t.CTextDecoder){return r.decode(o.base64ToBytes(e))}static initializeNetworkProviders(e,r){e||r?(t.NetworkProviders.WebSocket=e,t.NetworkProviders.XMLHTTPRequest=r):("undefined"!=typeof WebSocket&&(t.NetworkProviders.WebSocket=WebSocket),"undefined"!=typeof XMLHttpRequest&&(t.NetworkProviders.XMLHTTPRequest=XMLHttpRequest))}static pad(e,t=2){return"0".repeat(t-(""+e).length)+e}static rfc3339DateString(e){if(!e||0===e.getTime())return;const t=e.getUTCMilliseconds();return e.getUTCFullYear()+"-"+o.pad(e.getUTCMonth()+1)+"-"+o.pad(e.getUTCDate())+"T"+o.pad(e.getUTCHours())+":"+o.pad(e.getUTCMinutes())+":"+o.pad(e.getUTCSeconds())+(t?"."+o.pad(t,3):"")+"Z"}static mergeObj(e,t,r=!1){if("object"!=typeof t){if(t===s.DEL_CHAR)return;return void 0===t?e:t}if(null===t)return t;if(t instanceof Date)return e&&e instanceof Date&&!(e<t)?e:t;if(t instanceof n.AccessMode)return new n.AccessMode(t);if(t instanceof Array)return t;e&&e!==s.DEL_CHAR||(e=t.constructor());for(const s in t)!t.hasOwnProperty(s)||r&&r[s]||"_noForwarding"===s||(e[s]=o.mergeObj(e[s],t[s]));return e}static mergeToCache(e,t,r,s){return e[t]=o.mergeObj(e[t],r,s),e[t]}static stringToDate(e){"string"==typeof e.created&&(e.created=new Date(e.created)),"string"==typeof e.updated&&(e.updated=new Date(e.updated)),"string"==typeof e.touched&&(e.touched=new Date(e.touched))}static jsonBuildHelper(e,t){if(t instanceof Date)t=o.rfc3339DateString(t);else if(t instanceof n.AccessMode)t=t.jsonHelper();else if(null==t||!1===t||Array.isArray(t)&&0===t.length||"object"==typeof t&&0===Object.keys(t).length)return;return t}static simplify(e){return Object.keys(e).forEach((t=>{"_"===t[0]?delete e[t]:e[t]?Array.isArray(e[t])&&0===e[t].length?delete e[t]:"object"!=typeof e[t]||e[t]instanceof Date||(o.simplify(e[t]),0===Object.getOwnPropertyNames(e[t]).length&&delete e[t]):delete e[t]})),e}static normalizeArray(e){let t=[];if(Array.isArray(e)){for(let r=0,s=e.length;r<s;r++){let s=e[r];s&&(s=s.trim().toLowerCase(),s.length>1&&t.push(s))}t.sort(),t=t.filter(((e,t,r)=>!t||e!==r[t-1]))}return 0===t.length&&t.push(s.DEL_CHAR),t}static jsonParseHelper(e,t){if("ts"===e&&"string"==typeof t&&t.length>=20&&t.length<=24){const e=new Date(t);if(e)return e}else if("acs"===e&&"object"==typeof t)return new n.AccessMode(t);return t}static jsonLoggerHelper(e,t){return"string"==typeof t&&t.length>128?"<"+t.length+", bytes: "+t.substring(0,12)+"..."+t.substring(t.length-12)+">":o.jsonBuildHelper(e,t)}static getBrowserInfo(e,t){e=e||"";let r="";/reactnative/i.test(t)&&(r="ReactNative; ");let s,n=(e=e.replace(" (KHTML, like Gecko)","")).match(/(AppleWebKit\/[.\d]+)/i);if(n){const t=["chrome","safari","mobile","version"],r=e.substr(n.index+n[0].length).split(" "),o=[];for(const e of r){const r=/([\w.]+)[\/]([\.\d]+)/.exec(e);r&&o.push([r[1],r[2],t.findIndex((e=>e===r[1].toLowerCase()))])}o.sort(((e,t)=>{const r=e[2]-t[2];return 0!==r?r:t[0].length-e[0].length})),s=o.length>0?o[0][0]+"/"+o[0][1]:n[1]}else/trident/i.test(e)?(n=/(?:\brv[ :]+([.\d]+))|(?:\bMSIE ([.\d]+))/g.exec(e),s=n?"MSIE/"+(n[1]||n[2]):"MSIE/?"):/firefox/i.test(e)?(n=/Firefox\/([.\d]+)/g.exec(e),s=n?"Firefox/"+n[1]:"Firefox/?"):/presto/i.test(e)?(n=/Opera\/([.\d]+)/g.exec(e),s=n?"Opera/"+n[1]:"Opera/?"):(n=/([\w.]+)\/([.\d]+)/.exec(e),n?s=n[1]+"/"+n[2]:(n=e.split(" "),s=n[0]));if(n=s.split("/"),n.length>1){const e=n[1].split(".");s=n[0]+"/"+e[0]+(e[1]?"."+e[1]:"")}return r+s}static findNearest(e,t,r,s){s||(s=(e,t)=>e===t?0:e<t?-1:1);let n=0,o=t.length-1,i=0,c=0,a=!1;for(;n<=o;)if(i=(n+o)/2|0,c=s(t[i],e),c<0)n=i+1;else{if(!(c>0)){a=!0;break}o=i-1}return a?{idx:i,exact:!0}:r?{idx:-1}:{idx:c<0?i+1:i}}static insertSorted(e,t,r,s){const n=o.findNearest(e,t,!1,s),i=n.exact&&r?1:0;return t.splice(n.idx,i,e),t}static makeBaseUrl(e,t,r){let n=null;return"http"!==t&&"https"!==t&&"ws"!==t&&"wss"!==t||(n=t+"://",n+=e,"/"!==n.charAt(n.length-1)&&(n+="/"),n+="v"+s.AppInfo.PROTOCOL_VERSION+"/channels","http"!==t&&"https"!==t||(n+="/lp"),n+="?apikey="+r),n}static log(e,...t){}static credential(e,t,r,s){return"object"==typeof e&&({val:t,params:r,resp:s,meth:e}=e),e&&(t||s)?[{meth:e,val:t,resp:s,params:r}]:null}static topicType(e){return s.TopicTypesObj["string"==typeof e?e.substring(0,3):"xxx"]}static isNewGroupTopicName(e){return"string"==typeof e&&e.substring(0,3)===s.TopicNames.TOPIC_NEW}static isNullValue(e){return e===s.DEL_CHAR}static isChannelTopicName(e){return"string"==typeof e&&(e.substring(0,3)===s.TopicNames.TOPIC_CHAN||e.substring(0,3)===s.TopicNames.TOPIC_NEW_CHAN)}static isP2PTopicName(e){return"string"==typeof e&&"p2p"===e.substring(0,3)}}t.Utilities=o},"./node_modules/call-bind/callBound.js":(e,t,r)=>{"use strict";var s=r("./node_modules/get-intrinsic/index.js"),n=r("./node_modules/call-bind/index.js"),o=n(s("String.prototype.indexOf"));e.exports=function(e,t){var r=s(e,!!t);return"function"==typeof r&&o(e,".prototype.")>-1?n(r):r}},"./node_modules/call-bind/index.js":(e,t,r)=>{"use strict";var s=r("./node_modules/function-bind/index.js"),n=r("./node_modules/get-intrinsic/index.js"),o=n("%Function.prototype.apply%"),i=n("%Function.prototype.call%"),c=n("%Reflect.apply%",!0)||s.call(i,o),a=n("%Object.getOwnPropertyDescriptor%",!0),u=n("%Object.defineProperty%",!0),l=n("%Math.max%");if(u)try{u({},"a",{value:1})}catch(e){u=null}e.exports=function(e){var t=c(s,i,arguments);if(a&&u){var r=a(t,"length");r.configurable&&u(t,"length",{value:1+l(0,e.length-(arguments.length-1))})}return t};var d=function(){return c(s,o,arguments)};u?u(e.exports,"apply",{value:d}):e.exports.apply=d},"./node_modules/for-each/index.js":(e,t,r)=>{"use strict";var s=r("./node_modules/is-callable/index.js"),n=Object.prototype.toString,o=Object.prototype.hasOwnProperty,i=function(e,t,r){for(var s=0,n=e.length;s<n;s++)o.call(e,s)&&(null==r?t(e[s],s,e):t.call(r,e[s],s,e))},c=function(e,t,r){for(var s=0,n=e.length;s<n;s++)null==r?t(e.charAt(s),s,e):t.call(r,e.charAt(s),s,e)},a=function(e,t,r){for(var s in e)o.call(e,s)&&(null==r?t(e[s],s,e):t.call(r,e[s],s,e))};e.exports=function(e,t,r){if(!s(t))throw new TypeError("iterator must be a function");var o;arguments.length>=3&&(o=r),"[object Array]"===n.call(e)?i(e,t,o):"string"==typeof e?c(e,t,o):a(e,t,o)}},"./node_modules/function-bind/implementation.js":e=>{"use strict";var t="Function.prototype.bind called on incompatible ",r=Array.prototype.slice,s=Object.prototype.toString,n="[object Function]";e.exports=function(e){var o=this;if("function"!=typeof o||s.call(o)!==n)throw new TypeError(t+o);for(var i,c=r.call(arguments,1),a=function(){if(this instanceof i){var t=o.apply(this,c.concat(r.call(arguments)));return Object(t)===t?t:this}return o.apply(e,c.concat(r.call(arguments)))},u=Math.max(0,o.length-c.length),l=[],d=0;d<u;d++)l.push("$"+d);if(i=Function("binder","return function ("+l.join(",")+"){ return binder.apply(this,arguments); }")(a),o.prototype){var h=function(){};h.prototype=o.prototype,i.prototype=new h,h.prototype=null}return i}},"./node_modules/function-bind/index.js":(e,t,r)=>{"use strict";var s=r("./node_modules/function-bind/implementation.js");e.exports=Function.prototype.bind||s},"./node_modules/get-intrinsic/index.js":(e,t,r)=>{"use strict";var s,n=SyntaxError,o=Function,i=TypeError,c=function(e){try{return o('"use strict"; return ('+e+").constructor;")()}catch(e){}},a=Object.getOwnPropertyDescriptor;if(a)try{a({},"")}catch(e){a=null}var u=function(){throw new i},l=a?function(){try{return u}catch(e){try{return a(arguments,"callee").get}catch(e){return u}}}():u,d=r("./node_modules/has-symbols/index.js")(),h=Object.getPrototypeOf||function(e){return e.__proto__},p={},f="undefined"==typeof Uint8Array?s:h(Uint8Array),b={"%AggregateError%":"undefined"==typeof AggregateError?s:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?s:ArrayBuffer,"%ArrayIteratorPrototype%":d?h([][Symbol.iterator]()):s,"%AsyncFromSyncIteratorPrototype%":s,"%AsyncFunction%":p,"%AsyncGenerator%":p,"%AsyncGeneratorFunction%":p,"%AsyncIteratorPrototype%":p,"%Atomics%":"undefined"==typeof Atomics?s:Atomics,"%BigInt%":"undefined"==typeof BigInt?s:BigInt,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?s:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":"undefined"==typeof Float32Array?s:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?s:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?s:FinalizationRegistry,"%Function%":o,"%GeneratorFunction%":p,"%Int8Array%":"undefined"==typeof Int8Array?s:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?s:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?s:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":d?h(h([][Symbol.iterator]())):s,"%JSON%":"object"==typeof JSON?JSON:s,"%Map%":"undefined"==typeof Map?s:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&d?h((new Map)[Symbol.iterator]()):s,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?s:Promise,"%Proxy%":"undefined"==typeof Proxy?s:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":"undefined"==typeof Reflect?s:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?s:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&d?h((new Set)[Symbol.iterator]()):s,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?s:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":d?h(""[Symbol.iterator]()):s,"%Symbol%":d?Symbol:s,"%SyntaxError%":n,"%ThrowTypeError%":l,"%TypedArray%":f,"%TypeError%":i,"%Uint8Array%":"undefined"==typeof Uint8Array?s:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?s:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?s:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?s:Uint32Array,"%URIError%":URIError,"%WeakMap%":"undefined"==typeof WeakMap?s:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?s:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?s:WeakSet},m=function e(t){var r;if("%AsyncFunction%"===t)r=c("async function () {}");else if("%GeneratorFunction%"===t)r=c("function* () {}");else if("%AsyncGeneratorFunction%"===t)r=c("async function* () {}");else if("%AsyncGenerator%"===t){var s=e("%AsyncGeneratorFunction%");s&&(r=s.prototype)}else if("%AsyncIteratorPrototype%"===t){var n=e("%AsyncGenerator%");n&&(r=h(n.prototype))}return b[t]=r,r},y={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},_=r("./node_modules/function-bind/index.js"),v=r("./node_modules/has/src/index.js"),g=_.call(Function.call,Array.prototype.concat),j=_.call(Function.apply,Array.prototype.splice),x=_.call(Function.call,String.prototype.replace),S=_.call(Function.call,String.prototype.slice),w=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,O=/\\(\\)?/g,A=function(e){var t=S(e,0,1),r=S(e,-1);if("%"===t&&"%"!==r)throw new n("invalid intrinsic syntax, expected closing `%`");if("%"===r&&"%"!==t)throw new n("invalid intrinsic syntax, expected opening `%`");var s=[];return x(e,w,(function(e,t,r,n){s[s.length]=r?x(n,O,"$1"):t||e})),s},E=function(e,t){var r,s=e;if(v(y,s)&&(s="%"+(r=y[s])[0]+"%"),v(b,s)){var o=b[s];if(o===p&&(o=m(s)),void 0===o&&!t)throw new i("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:r,name:s,value:o}}throw new n("intrinsic "+e+" does not exist!")};e.exports=function(e,t){if("string"!=typeof e||0===e.length)throw new i("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof t)throw new i('"allowMissing" argument must be a boolean');var r=A(e),s=r.length>0?r[0]:"",o=E("%"+s+"%",t),c=o.name,u=o.value,l=!1,d=o.alias;d&&(s=d[0],j(r,g([0,1],d)));for(var h=1,p=!0;h<r.length;h+=1){var f=r[h],m=S(f,0,1),y=S(f,-1);if(('"'===m||"'"===m||"`"===m||'"'===y||"'"===y||"`"===y)&&m!==y)throw new n("property names with quotes must have matching quotes");if("constructor"!==f&&p||(l=!0),v(b,c="%"+(s+="."+f)+"%"))u=b[c];else if(null!=u){if(!(f in u)){if(!t)throw new i("base intrinsic for "+e+" exists, but the property is not available.");return}if(a&&h+1>=r.length){var _=a(u,f);u=(p=!!_)&&"get"in _&&!("originalValue"in _.get)?_.get:u[f]}else p=v(u,f),u=u[f];p&&!l&&(b[c]=u)}}return u}},"./node_modules/has-symbols/index.js":(e,t,r)=>{"use strict";var s="undefined"!=typeof Symbol&&Symbol,n=r("./node_modules/has-symbols/shams.js");e.exports=function(){return"function"==typeof s&&("function"==typeof Symbol&&("symbol"==typeof s("foo")&&("symbol"==typeof Symbol("bar")&&n())))}},"./node_modules/has-symbols/shams.js":e=>{"use strict";e.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var e={},t=Symbol("test"),r=Object(t);if("string"==typeof t)return!1;if("[object Symbol]"!==Object.prototype.toString.call(t))return!1;if("[object Symbol]"!==Object.prototype.toString.call(r))return!1;for(t in e[t]=42,e)return!1;if("function"==typeof Object.keys&&0!==Object.keys(e).length)return!1;if("function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(e).length)return!1;var s=Object.getOwnPropertySymbols(e);if(1!==s.length||s[0]!==t)return!1;if(!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var n=Object.getOwnPropertyDescriptor(e,t);if(42!==n.value||!0!==n.enumerable)return!1}return!0}},"./node_modules/has-tostringtag/shams.js":(e,t,r)=>{"use strict";var s=r("./node_modules/has-symbols/shams.js");e.exports=function(){return s()&&!!Symbol.toStringTag}},"./node_modules/has/src/index.js":(e,t,r)=>{"use strict";var s=r("./node_modules/function-bind/index.js");e.exports=s.call(Function.call,Object.prototype.hasOwnProperty)},"./node_modules/inherits/inherits_browser.js":e=>{"function"==typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}}},"./node_modules/is-arguments/index.js":(e,t,r)=>{"use strict";var s=r("./node_modules/has-tostringtag/shams.js")(),n=r("./node_modules/call-bind/callBound.js")("Object.prototype.toString"),o=function(e){return!(s&&e&&"object"==typeof e&&Symbol.toStringTag in e)&&"[object Arguments]"===n(e)},i=function(e){return!!o(e)||null!==e&&"object"==typeof e&&"number"==typeof e.length&&e.length>=0&&"[object Array]"!==n(e)&&"[object Function]"===n(e.callee)},c=function(){return o(arguments)}();o.isLegacyArguments=i,e.exports=c?o:i},"./node_modules/is-callable/index.js":e=>{"use strict";var t,r,s=Function.prototype.toString,n="object"==typeof Reflect&&null!==Reflect&&Reflect.apply;if("function"==typeof n&&"function"==typeof Object.defineProperty)try{t=Object.defineProperty({},"length",{get:function(){throw r}}),r={},n((function(){throw 42}),null,t)}catch(e){e!==r&&(n=null)}else n=null;var o=/^\s*class\b/,i=function(e){try{var t=s.call(e);return o.test(t)}catch(e){return!1}},c=Object.prototype.toString,a="function"==typeof Symbol&&!!Symbol.toStringTag,u="object"==typeof document&&void 0===document.all&&void 0!==document.all?document.all:{};e.exports=n?function(e){if(e===u)return!0;if(!e)return!1;if("function"!=typeof e&&"object"!=typeof e)return!1;if("function"==typeof e&&!e.prototype)return!0;try{n(e,null,t)}catch(e){if(e!==r)return!1}return!i(e)}:function(e){if(e===u)return!0;if(!e)return!1;if("function"!=typeof e&&"object"!=typeof e)return!1;if("function"==typeof e&&!e.prototype)return!0;if(a)return function(e){try{return!i(e)&&(s.call(e),!0)}catch(e){return!1}}(e);if(i(e))return!1;var t=c.call(e);return"[object Function]"===t||"[object GeneratorFunction]"===t}},"./node_modules/is-generator-function/index.js":(e,t,r)=>{"use strict";var s,n=Object.prototype.toString,o=Function.prototype.toString,i=/^\s*(?:function)?\*/,c=r("./node_modules/has-tostringtag/shams.js")(),a=Object.getPrototypeOf;e.exports=function(e){if("function"!=typeof e)return!1;if(i.test(o.call(e)))return!0;if(!c)return"[object GeneratorFunction]"===n.call(e);if(!a)return!1;if(void 0===s){var t=function(){if(!c)return!1;try{return Function("return function*() {}")()}catch(e){}}();s=!!t&&a(t)}return a(e)===s}},"./node_modules/is-typed-array/index.js":(e,t,r)=>{"use strict";var s=r("./node_modules/for-each/index.js"),n=r("./node_modules/available-typed-arrays/index.js"),o=r("./node_modules/call-bind/callBound.js"),i=o("Object.prototype.toString"),c=r("./node_modules/has-tostringtag/shams.js")(),a="undefined"==typeof globalThis?r.g:globalThis,u=n(),l=o("Array.prototype.indexOf",!0)||function(e,t){for(var r=0;r<e.length;r+=1)if(e[r]===t)return r;return-1},d=o("String.prototype.slice"),h={},p=r("./node_modules/es-abstract/helpers/getOwnPropertyDescriptor.js"),f=Object.getPrototypeOf;c&&p&&f&&s(u,(function(e){var t=new a[e];if(Symbol.toStringTag in t){var r=f(t),s=p(r,Symbol.toStringTag);if(!s){var n=f(r);s=p(n,Symbol.toStringTag)}h[e]=s.get}}));e.exports=function(e){if(!e||"object"!=typeof e)return!1;if(!c||!(Symbol.toStringTag in e)){var t=d(i(e),8,-1);return l(u,t)>-1}return!!p&&function(e){var t=!1;return s(h,(function(r,s){if(!t)try{t=r.call(e)===s}catch(e){}})),t}(e)}},"./node_modules/rxjs/_esm5/index.js":(e,t,r)=>{"use strict";r.r(t),r.d(t,{ArgumentOutOfRangeError:()=>w.ArgumentOutOfRangeError,AsyncSubject:()=>l.AsyncSubject,BehaviorSubject:()=>a.BehaviorSubject,ConnectableObservable:()=>n.ConnectableObservable,EMPTY:()=>N.EMPTY,EmptyError:()=>O.EmptyError,GroupedObservable:()=>o.GroupedObservable,NEVER:()=>V.NEVER,Notification:()=>v.Notification,NotificationKind:()=>v.NotificationKind,ObjectUnsubscribedError:()=>A.ObjectUnsubscribedError,Observable:()=>s.Observable,ReplaySubject:()=>u.ReplaySubject,Scheduler:()=>m.Scheduler,Subject:()=>c.Subject,Subscriber:()=>_.Subscriber,Subscription:()=>y.Subscription,TimeoutError:()=>P.TimeoutError,UnsubscriptionError:()=>E.UnsubscriptionError,VirtualAction:()=>b.VirtualAction,VirtualTimeScheduler:()=>b.VirtualTimeScheduler,animationFrame:()=>f.animationFrame,animationFrameScheduler:()=>f.animationFrameScheduler,asap:()=>d.asap,asapScheduler:()=>d.asapScheduler,async:()=>h.async,asyncScheduler:()=>h.asyncScheduler,bindCallback:()=>T.bindCallback,bindNodeCallback:()=>M.bindNodeCallback,combineLatest:()=>I.combineLatest,concat:()=>R.concat,config:()=>te.config,defer:()=>k.defer,empty:()=>N.empty,forkJoin:()=>C.forkJoin,from:()=>D.from,fromEvent:()=>U.fromEvent,fromEventPattern:()=>F.fromEventPattern,generate:()=>q.generate,identity:()=>x.identity,iif:()=>L.iif,interval:()=>B.interval,isObservable:()=>S.isObservable,merge:()=>W.merge,never:()=>V.never,noop:()=>j.noop,observable:()=>i.observable,of:()=>G.of,onErrorResumeNext:()=>H.onErrorResumeNext,pairs:()=>z.pairs,partition:()=>K.partition,pipe:()=>g.pipe,queue:()=>p.queue,queueScheduler:()=>p.queueScheduler,race:()=>J.race,range:()=>Y.range,scheduled:()=>ee.scheduled,throwError:()=>Q.throwError,timer:()=>X.timer,using:()=>$.using,zip:()=>Z.zip});var s=r("./node_modules/rxjs/_esm5/internal/Observable.js"),n=r("./node_modules/rxjs/_esm5/internal/observable/ConnectableObservable.js"),o=r("./node_modules/rxjs/_esm5/internal/operators/groupBy.js"),i=r("./node_modules/rxjs/_esm5/internal/symbol/observable.js"),c=r("./node_modules/rxjs/_esm5/internal/Subject.js"),a=r("./node_modules/rxjs/_esm5/internal/BehaviorSubject.js"),u=r("./node_modules/rxjs/_esm5/internal/ReplaySubject.js"),l=r("./node_modules/rxjs/_esm5/internal/AsyncSubject.js"),d=r("./node_modules/rxjs/_esm5/internal/scheduler/asap.js"),h=r("./node_modules/rxjs/_esm5/internal/scheduler/async.js"),p=r("./node_modules/rxjs/_esm5/internal/scheduler/queue.js"),f=r("./node_modules/rxjs/_esm5/internal/scheduler/animationFrame.js"),b=r("./node_modules/rxjs/_esm5/internal/scheduler/VirtualTimeScheduler.js"),m=r("./node_modules/rxjs/_esm5/internal/Scheduler.js"),y=r("./node_modules/rxjs/_esm5/internal/Subscription.js"),_=r("./node_modules/rxjs/_esm5/internal/Subscriber.js"),v=r("./node_modules/rxjs/_esm5/internal/Notification.js"),g=r("./node_modules/rxjs/_esm5/internal/util/pipe.js"),j=r("./node_modules/rxjs/_esm5/internal/util/noop.js"),x=r("./node_modules/rxjs/_esm5/internal/util/identity.js"),S=r("./node_modules/rxjs/_esm5/internal/util/isObservable.js"),w=r("./node_modules/rxjs/_esm5/internal/util/ArgumentOutOfRangeError.js"),O=r("./node_modules/rxjs/_esm5/internal/util/EmptyError.js"),A=r("./node_modules/rxjs/_esm5/internal/util/ObjectUnsubscribedError.js"),E=r("./node_modules/rxjs/_esm5/internal/util/UnsubscriptionError.js"),P=r("./node_modules/rxjs/_esm5/internal/util/TimeoutError.js"),T=r("./node_modules/rxjs/_esm5/internal/observable/bindCallback.js"),M=r("./node_modules/rxjs/_esm5/internal/observable/bindNodeCallback.js"),I=r("./node_modules/rxjs/_esm5/internal/observable/combineLatest.js"),R=r("./node_modules/rxjs/_esm5/internal/observable/concat.js"),k=r("./node_modules/rxjs/_esm5/internal/observable/defer.js"),N=r("./node_modules/rxjs/_esm5/internal/observable/empty.js"),C=r("./node_modules/rxjs/_esm5/internal/observable/forkJoin.js"),D=r("./node_modules/rxjs/_esm5/internal/observable/from.js"),U=r("./node_modules/rxjs/_esm5/internal/observable/fromEvent.js"),F=r("./node_modules/rxjs/_esm5/internal/observable/fromEventPattern.js"),q=r("./node_modules/rxjs/_esm5/internal/observable/generate.js"),L=r("./node_modules/rxjs/_esm5/internal/observable/iif.js"),B=r("./node_modules/rxjs/_esm5/internal/observable/interval.js"),W=r("./node_modules/rxjs/_esm5/internal/observable/merge.js"),V=r("./node_modules/rxjs/_esm5/internal/observable/never.js"),G=r("./node_modules/rxjs/_esm5/internal/observable/of.js"),H=r("./node_modules/rxjs/_esm5/internal/observable/onErrorResumeNext.js"),z=r("./node_modules/rxjs/_esm5/internal/observable/pairs.js"),K=r("./node_modules/rxjs/_esm5/internal/observable/partition.js"),J=r("./node_modules/rxjs/_esm5/internal/observable/race.js"),Y=r("./node_modules/rxjs/_esm5/internal/observable/range.js"),Q=r("./node_modules/rxjs/_esm5/internal/observable/throwError.js"),X=r("./node_modules/rxjs/_esm5/internal/observable/timer.js"),$=r("./node_modules/rxjs/_esm5/internal/observable/using.js"),Z=r("./node_modules/rxjs/_esm5/internal/observable/zip.js"),ee=r("./node_modules/rxjs/_esm5/internal/scheduled/scheduled.js"),te=r("./node_modules/rxjs/_esm5/internal/config.js")},"./node_modules/rxjs/_esm5/internal/AsyncSubject.js":(e,t,r)=>{"use strict";r.r(t),r.d(t,{AsyncSubject:()=>i});var s=r("./node_modules/tslib/tslib.es6.js"),n=r("./node_modules/rxjs/_esm5/internal/Subject.js"),o=r("./node_modules/rxjs/_esm5/internal/Subscription.js"),i=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.value=null,t.hasNext=!1,t.hasCompleted=!1,t}return s.__extends(t,e),t.prototype._subscribe=function(t){return this.hasError?(t.error(this.thrownError),o.Subscription.EMPTY):this.hasCompleted&&this.hasNext?(t.next(this.value),t.complete(),o.Subscription.EMPTY):e.prototype._subscribe.call(this,t)},t.prototype.next=function(e){this.hasCompleted||(this.value=e,this.hasNext=!0)},t.prototype.error=function(t){this.hasCompleted||e.prototype.error.call(this,t)},t.prototype.complete=function(){this.hasCompleted=!0,this.hasNext&&e.prototype.next.call(this,this.value),e.prototype.complete.call(this)},t}(n.Subject)},"./node_modules/rxjs/_esm5/internal/BehaviorSubject.js":(e,t,r)=>{"use strict";r.r(t),r.d(t,{BehaviorSubject:()=>i});var s=r("./node_modules/tslib/tslib.es6.js"),n=r("./node_modules/rxjs/_esm5/internal/Subject.js"),o=r("./node_modules/rxjs/_esm5/internal/util/ObjectUnsubscribedError.js"),i=function(e){function t(t){var r=e.call(this)||this;return r._value=t,r}return s.__extends(t,e),Object.defineProperty(t.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),t.prototype._subscribe=function(t){var r=e.prototype._subscribe.call(this,t);return r&&!r.closed&&t.next(this._value),r},t.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new o.ObjectUnsubscribedError;return this._value},t.prototype.next=function(t){e.prototype.next.call(this,this._value=t)},t}(n.Subject)},"./node_modules/rxjs/_esm5/internal/InnerSubscriber.js":(e,t,r)=>{"use strict";r.r(t),r.d(t,{InnerSubscriber:()=>n});var s=r("./node_modules/tslib/tslib.es6.js"),n=function(e){function t(t,r,s){var n=e.call(this)||this;return n.parent=t,n.outerValue=r,n.outerIndex=s,n.index=0,n}return s.__extends(t,e),t.prototype._next=function(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)},t.prototype._error=function(e){this.parent.notifyError(e,this),this.unsubscribe()},t.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},t}(r("./node_modules/rxjs/_esm5/internal/Subscriber.js").Subscriber)},"./node_modules/rxjs/_esm5/internal/Notification.js":(e,t,r)=>{"use strict";r.r(t),r.d(t,{Notification:()=>c,NotificationKind:()=>s});var s,n=r("./node_modules/rxjs/_esm5/internal/observable/empty.js"),o=r("./node_modules/rxjs/_esm5/internal/observable/of.js"),i=r("./node_modules/rxjs/_esm5/internal/observable/throwError.js");s||(s={});var c=function(){function e(e,t,r){this.kind=e,this.value=t,this.error=r,this.hasValue="N"===e}return e.prototype.observe=function(e){switch(this.kind){case"N":return e.next&&e.next(this.value);case"E":return e.error&&e.error(this.error);case"C":return e.complete&&e.complete()}},e.prototype.do=function(e,t,r){switch(this.kind){case"N":return e&&e(this.value);case"E":return t&&t(this.error);case"C":return r&&r()}},e.prototype.accept=function(e,t,r){return e&&"function"==typeof e.next?this.observe(e):this.do(e,t,r)},e.prototype.toObservable=function(){switch(this.kind){case"N":return(0,o.of)(this.value);case"E":return(0,i.throwError)(this.error);case"C":return(0,n.empty)()}throw new Error("unexpected notification kind value")},e.createNext=function(t){return void 0!==t?new e("N",t):e.undefinedValueNotification},e.createError=function(t){return new e("E",void 0,t)},e.createComplete=function(){return e.completeNotification},e.completeNotification=new e("C"),e.undefinedValueNotification=new e("N",void 0),e}()},"./node_modules/rxjs/_esm5/internal/Observable.js":(e,t,r)=>{"use strict";r.r(t),r.d(t,{Observable:()=>a});var s=r("./node_modules/rxjs/_esm5/internal/util/canReportError.js"),n=r("./node_modules/rxjs/_esm5/internal/util/toSubscriber.js"),o=r("./node_modules/rxjs/_esm5/internal/symbol/observable.js"),i=r("./node_modules/rxjs/_esm5/internal/util/pipe.js"),c=r("./node_modules/rxjs/_esm5/internal/config.js"),a=function(){function e(e){this._isScalar=!1,e&&(this._subscribe=e)}return e.prototype.lift=function(t){var r=new e;return r.source=this,r.operator=t,r},e.prototype.subscribe=function(e,t,r){var s=this.operator,o=(0,n.toSubscriber)(e,t,r);if(s?o.add(s.call(o,this.source)):o.add(this.source||c.config.useDeprecatedSynchronousErrorHandling&&!o.syncErrorThrowable?this._subscribe(o):this._trySubscribe(o)),c.config.useDeprecatedSynchronousErrorHandling&&o.syncErrorThrowable&&(o.syncErrorThrowable=!1,o.syncErrorThrown))throw o.syncErrorValue;return o},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){c.config.useDeprecatedSynchronousErrorHandling&&(e.syncErrorThrown=!0,e.syncErrorValue=t),(0,s.canReportError)(e)?e.error(t):console.warn(t)}},e.prototype.forEach=function(e,t){var r=this;return new(t=u(t))((function(t,s){var n;n=r.subscribe((function(t){try{e(t)}catch(e){s(e),n&&n.unsubscribe()}}),s,t)}))},e.prototype._subscribe=function(e){var t=this.source;return t&&t.subscribe(e)},e.prototype[o.observable]=function(){return this},e.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return 0===e.length?this:(0,i.pipeFromArray)(e)(this)},e.prototype.toPromise=function(e){var t=this;return new(e=u(e))((function(e,r){var s;t.subscribe((function(e){return s=e}),(function(e){return r(e)}),(function(){return e(s)}))}))},e.create=function(t){return new e(t)},e}();function u(e){if(e||(e=c.config.Promise||Promise),!e)throw new Error("no Promise impl found");return e}},"./node_modules/rxjs/_esm5/internal/Observer.js":(e,t,r)=>{"use strict";r.r(t),r.d(t,{empty:()=>o});var s=r("./node_modules/rxjs/_esm5/internal/config.js"),n=r("./node_modules/rxjs/_esm5/internal/util/hostReportError.js"),o={closed:!0,next:function(e){},error:function(e){if(s.config.useDeprecatedSynchronousErrorHandling)throw e;(0,n.hostReportError)(e)},complete:function(){}}},"./node_modules/rxjs/_esm5/internal/OuterSubscriber.js":(e,t,r)=>{"use strict";r.r(t),r.d(t,{OuterSubscriber:()=>n});var s=r("./node_modules/tslib/tslib.es6.js"),n=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s.__extends(t,e),t.prototype.notifyNext=function(e,t,r,s,n){this.destination.next(t)},t.prototype.notifyError=function(e,t){this.destination.error(e)},t.prototype.notifyComplete=function(e){this.destination.complete()},t}(r("./node_modules/rxjs/_esm5/internal/Subscriber.js").Subscriber)},"./node_modules/rxjs/_esm5/internal/ReplaySubject.js":(e,t,r)=>{"use strict";r.r(t),r.d(t,{ReplaySubject:()=>l});var s=r("./node_modules/tslib/tslib.es6.js"),n=r("./node_modules/rxjs/_esm5/internal/Subject.js"),o=r("./node_modules/rxjs/_esm5/internal/scheduler/queue.js"),i=r("./node_modules/rxjs/_esm5/internal/Subscription.js"),c=r("./node_modules/rxjs/_esm5/internal/operators/observeOn.js"),a=r("./node_modules/rxjs/_esm5/internal/util/ObjectUnsubscribedError.js"),u=r("./node_modules/rxjs/_esm5/internal/SubjectSubscription.js"),l=function(e){function t(t,r,s){void 0===t&&(t=Number.POSITIVE_INFINITY),void 0===r&&(r=Number.POSITIVE_INFINITY);var n=e.call(this)||this;return n.scheduler=s,n._events=[],n._infiniteTimeWindow=!1,n._bufferSize=t<1?1:t,n._windowTime=r<1?1:r,r===Number.POSITIVE_INFINITY?(n._infiniteTimeWindow=!0,n.next=n.nextInfiniteTimeWindow):n.next=n.nextTimeWindow,n}return s.__extends(t,e),t.prototype.nextInfiniteTimeWindow=function(t){if(!this.isStopped){var r=this._events;r.push(t),r.length>this._bufferSize&&r.shift()}e.prototype.next.call(this,t)},t.prototype.nextTimeWindow=function(t){this.isStopped||(this._events.push(new d(this._getNow(),t)),this._trimBufferThenGetEvents()),e.prototype.next.call(this,t)},t.prototype._subscribe=function(e){var t,r=this._infiniteTimeWindow,s=r?this._events:this._trimBufferThenGetEvents(),n=this.scheduler,o=s.length;if(this.closed)throw new a.ObjectUnsubscribedError;if(this.isStopped||this.hasError?t=i.Subscription.EMPTY:(this.observers.push(e),t=new u.SubjectSubscription(this,e)),n&&e.add(e=new c.ObserveOnSubscriber(e,n)),r)for(var l=0;l<o&&!e.closed;l++)e.next(s[l]);else for(l=0;l<o&&!e.closed;l++)e.next(s[l].value);return this.hasError?e.error(this.thrownError):this.isStopped&&e.complete(),t},t.prototype._getNow=function(){return(this.scheduler||o.queue).now()},t.prototype._trimBufferThenGetEvents=function(){for(var e=this._getNow(),t=this._bufferSize,r=this._windowTime,s=this._events,n=s.length,o=0;o<n&&!(e-s[o].time<r);)o++;return n>t&&(o=Math.max(o,n-t)),o>0&&s.splice(0,o),s},t}(n.Subject),d=function(){return function(e,t){this.time=e,this.value=t}}()},"./node_modules/rxjs/_esm5/internal/Scheduler.js":(e,t,r)=>{"use strict";r.r(t),r.d(t,{Scheduler:()=>s});var s=function(){function e(t,r){void 0===r&&(r=e.now),this.SchedulerAction=t,this.now=r}return e.prototype.schedule=function(e,t,r){return void 0===t&&(t=0),new this.SchedulerAction(this,e).schedule(r,t)},e.now=function(){return Date.now()},e}()},"./node_modules/rxjs/_esm5/internal/Subject.js":(e,t,r)=>{"use strict";r.r(t),r.d(t,{AnonymousSubject:()=>h,Subject:()=>d,SubjectSubscriber:()=>l});var s=r("./node_modules/tslib/tslib.es6.js"),n=r("./node_modules/rxjs/_esm5/internal/Observable.js"),o=r("./node_modules/rxjs/_esm5/internal/Subscriber.js"),i=r("./node_modules/rxjs/_esm5/internal/Subscription.js"),c=r("./node_modules/rxjs/_esm5/internal/util/ObjectUnsubscribedError.js"),a=r("./node_modules/rxjs/_esm5/internal/SubjectSubscription.js"),u=r("./node_modules/rxjs/_esm5/internal/symbol/rxSubscriber.js"),l=function(e){function t(t){var r=e.call(this,t)||this;return r.destination=t,r}return s.__extends(t,e),t}(o.Subscriber),d=function(e){function t(){var t=e.call(this)||this;return t.observers=[],t.closed=!1,t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return s.__extends(t,e),t.prototype[u.rxSubscriber]=function(){return new l(this)},t.prototype.lift=function(e){var t=new h(this,this);return t.operator=e,t},t.prototype.next=function(e){if(this.closed)throw new c.ObjectUnsubscribedError;if(!this.isStopped)for(var t=this.observers,r=t.length,s=t.slice(),n=0;n<r;n++)s[n].next(e)},t.prototype.error=function(e){if(this.closed)throw new c.ObjectUnsubscribedError;this.hasError=!0,this.thrownError=e,this.isStopped=!0;for(var t=this.observers,r=t.length,s=t.slice(),n=0;n<r;n++)s[n].error(e);this.observers.length=0},t.prototype.complete=function(){if(this.closed)throw new c.ObjectUnsubscribedError;this.isStopped=!0;for(var e=this.observers,t=e.length,r=e.slice(),s=0;s<t;s++)r[s].complete();this.observers.length=0},t.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},t.prototype._trySubscribe=function(t){if(this.closed)throw new c.ObjectUnsubscribedError;return e.prototype._trySubscribe.call(this,t)},t.prototype._subscribe=function(e){if(this.closed)throw new c.ObjectUnsubscribedError;return this.hasError?(e.error(this.thrownError),i.Subscription.EMPTY):this.isStopped?(e.complete(),i.Subscription.EMPTY):(this.observers.push(e),new a.SubjectSubscription(this,e))},t.prototype.asObservable=function(){var e=new n.Observable;return e.source=this,e},t.create=function(e,t){return new h(e,t)},t}(n.Observable),h=function(e){function t(t,r){var s=e.call(this)||this;return s.destination=t,s.source=r,s}return s.__extends(t,e),t.prototype.next=function(e){var t=this.destination;t&&t.next&&t.next(e)},t.prototype.error=function(e){var t=this.destination;t&&t.error&&this.destination.error(e)},t.prototype.complete=function(){var e=this.destination;e&&e.complete&&this.destination.complete()},t.prototype._subscribe=function(e){return this.source?this.source.subscribe(e):i.Subscription.EMPTY},t}(d)},"./node_modules/rxjs/_esm5/internal/SubjectSubscription.js":(e,t,r)=>{"use strict";r.r(t),r.d(t,{SubjectSubscription:()=>n});var s=r("./node_modules/tslib/tslib.es6.js"),n=function(e){function t(t,r){var s=e.call(this)||this;return s.subject=t,s.subscriber=r,s.closed=!1,s}return s.__extends(t,e),t.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var e=this.subject,t=e.observers;if(this.subject=null,t&&0!==t.length&&!e.isStopped&&!e.closed){var r=t.indexOf(this.subscriber);-1!==r&&t.splice(r,1)}}},t}(r("./node_modules/rxjs/_esm5/internal/Subscription.js").Subscription)},"./node_modules/rxjs/_esm5/internal/Subscriber.js":(e,t,r)=>{"use strict";r.r(t),r.d(t,{SafeSubscriber:()=>d,Subscriber:()=>l});var s=r("./node_modules/tslib/tslib.es6.js"),n=r("./node_modules/rxjs/_esm5/internal/util/isFunction.js"),o=r("./node_modules/rxjs/_esm5/internal/Observer.js"),i=r("./node_modules/rxjs/_esm5/internal/Subscription.js"),c=r("./node_modules/rxjs/_esm5/internal/symbol/rxSubscriber.js"),a=r("./node_modules/rxjs/_esm5/internal/config.js"),u=r("./node_modules/rxjs/_esm5/internal/util/hostReportError.js"),l=function(e){function t(r,s,n){var i=e.call(this)||this;switch(i.syncErrorValue=null,i.syncErrorThrown=!1,i.syncErrorThrowable=!1,i.isStopped=!1,arguments.length){case 0:i.destination=o.empty;break;case 1:if(!r){i.destination=o.empty;break}if("object"==typeof r){r instanceof t?(i.syncErrorThrowable=r.syncErrorThrowable,i.destination=r,r.add(i)):(i.syncErrorThrowable=!0,i.destination=new d(i,r));break}default:i.syncErrorThrowable=!0,i.destination=new d(i,r,s,n)}return i}return s.__extends(t,e),t.prototype[c.rxSubscriber]=function(){return this},t.create=function(e,r,s){var n=new t(e,r,s);return n.syncErrorThrowable=!1,n},t.prototype.next=function(e){this.isStopped||this._next(e)},t.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this))},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){this.destination.error(e),this.unsubscribe()},t.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},t.prototype._unsubscribeAndRecycle=function(){var e=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=e,this},t}(i.Subscription),d=function(e){function t(t,r,s,i){var c,a=e.call(this)||this;a._parentSubscriber=t;var u=a;return(0,n.isFunction)(r)?c=r:r&&(c=r.next,s=r.error,i=r.complete,r!==o.empty&&(u=Object.create(r),(0,n.isFunction)(u.unsubscribe)&&a.add(u.unsubscribe.bind(u)),u.unsubscribe=a.unsubscribe.bind(a))),a._context=u,a._next=c,a._error=s,a._complete=i,a}return s.__extends(t,e),t.prototype.next=function(e){if(!this.isStopped&&this._next){var t=this._parentSubscriber;a.config.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}},t.prototype.error=function(e){if(!this.isStopped){var t=this._parentSubscriber,r=a.config.useDeprecatedSynchronousErrorHandling;if(this._error)r&&t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else if(t.syncErrorThrowable)r?(t.syncErrorValue=e,t.syncErrorThrown=!0):(0,u.hostReportError)(e),this.unsubscribe();else{if(this.unsubscribe(),r)throw e;(0,u.hostReportError)(e)}}},t.prototype.complete=function(){var e=this;if(!this.isStopped){var t=this._parentSubscriber;if(this._complete){var r=function(){return e._complete.call(e._context)};a.config.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,r),this.unsubscribe()):(this.__tryOrUnsub(r),this.unsubscribe())}else this.unsubscribe()}},t.prototype.__tryOrUnsub=function(e,t){try{e.call(this._context,t)}catch(e){if(this.unsubscribe(),a.config.useDeprecatedSynchronousErrorHandling)throw e;(0,u.hostReportError)(e)}},t.prototype.__tryOrSetError=function(e,t,r){if(!a.config.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{t.call(this._context,r)}catch(t){return a.config.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=t,e.syncErrorThrown=!0,!0):((0,u.hostReportError)(t),!0)}return!1},t.prototype._unsubscribe=function(){var e=this._parentSubscriber;this._context=null,this._parentSubscriber=null,e.unsubscribe()},t}(l)},"./node_modules/rxjs/_esm5/internal/Subscription.js":(e,t,r)=>{"use strict";r.r(t),r.d(t,{Subscription:()=>c});var s=r("./node_modules/rxjs/_esm5/internal/util/isArray.js"),n=r("./node_modules/rxjs/_esm5/internal/util/isObject.js"),o=r("./node_modules/rxjs/_esm5/internal/util/isFunction.js"),i=r("./node_modules/rxjs/_esm5/internal/util/UnsubscriptionError.js"),c=function(){function e(e){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,e&&(this._ctorUnsubscribe=!0,this._unsubscribe=e)}var t;return e.prototype.unsubscribe=function(){var t;if(!this.closed){var r=this,c=r._parentOrParents,u=r._ctorUnsubscribe,l=r._unsubscribe,d=r._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,c instanceof e)c.remove(this);else if(null!==c)for(var h=0;h<c.length;++h){c[h].remove(this)}if((0,o.isFunction)(l)){u&&(this._unsubscribe=void 0);try{l.call(this)}catch(e){t=e instanceof i.UnsubscriptionError?a(e.errors):[e]}}if((0,s.isArray)(d)){h=-1;for(var p=d.length;++h<p;){var f=d[h];if((0,n.isObject)(f))try{f.unsubscribe()}catch(e){t=t||[],e instanceof i.UnsubscriptionError?t=t.concat(a(e.errors)):t.push(e)}}}if(t)throw new i.UnsubscriptionError(t)}},e.prototype.add=function(t){var r=t;if(!t)return e.EMPTY;switch(typeof t){case"function":r=new e(t);case"object":if(r===this||r.closed||"function"!=typeof r.unsubscribe)return r;if(this.closed)return r.unsubscribe(),r;if(!(r instanceof e)){var s=r;(r=new e)._subscriptions=[s]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}var n=r._parentOrParents;if(null===n)r._parentOrParents=this;else if(n instanceof e){if(n===this)return r;r._parentOrParents=[n,this]}else{if(-1!==n.indexOf(this))return r;n.push(this)}var o=this._subscriptions;return null===o?this._subscriptions=[r]:o.push(r),r},e.prototype.remove=function(e){var t=this._subscriptions;if(t){var r=t.indexOf(e);-1!==r&&t.splice(r,1)}},e.EMPTY=((t=new e).closed=!0,t),e}();function a(e){return e.reduce((function(e,t){return e.concat(t instanceof i.UnsubscriptionError?t.errors:t)}),[])}},"./node_modules/rxjs/_esm5/internal/config.js":(e,t,r)=>{"use strict";r.r(t),r.d(t,{config:()=>n});var s=!1,n={Promise:void 0,set useDeprecatedSynchronousErrorHandling(e){e&&(new Error).stack;s=e},get useDeprecatedSynchronousErrorHandling(){return s}}},"./node_modules/rxjs/_esm5/internal/innerSubscribe.js":(e,t,r)=>{"use strict";r.r(t),r.d(t,{ComplexInnerSubscriber:()=>a,ComplexOuterSubscriber:()=>l,SimpleInnerSubscriber:()=>c,SimpleOuterSubscriber:()=>u,innerSubscribe:()=>d});var s=r("./node_modules/tslib/tslib.es6.js"),n=r("./node_modules/rxjs/_esm5/internal/Subscriber.js"),o=r("./node_modules/rxjs/_esm5/internal/Observable.js"),i=r("./node_modules/rxjs/_esm5/internal/util/subscribeTo.js"),c=function(e){function t(t){var r=e.call(this)||this;return r.parent=t,r}return s.__extends(t,e),t.prototype._next=function(e){this.parent.notifyNext(e)},t.prototype._error=function(e){this.parent.notifyError(e),this.unsubscribe()},t.prototype._complete=function(){this.parent.notifyComplete(),this.unsubscribe()},t}(n.Subscriber),a=function(e){function t(t,r,s){var n=e.call(this)||this;return n.parent=t,n.outerValue=r,n.outerIndex=s,n}return s.__extends(t,e),t.prototype._next=function(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this)},t.prototype._error=function(e){this.parent.notifyError(e),this.unsubscribe()},t.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},t}(n.Subscriber),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s.__extends(t,e),t.prototype.notifyNext=function(e){this.destination.next(e)},t.prototype.notifyError=function(e){this.destination.error(e)},t.prototype.notifyComplete=function(){this.destination.complete()},t}(n.Subscriber),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s.__extends(t,e),t.prototype.notifyNext=function(e,t,r,s){this.destination.next(t)},t.prototype.notifyError=function(e){this.destination.error(e)},t.prototype.notifyComplete=function(e){this.destination.complete()},t}(n.Subscriber);function d(e,t){if(!t.closed){if(e instanceof o.Observable)return e.subscribe(t);var r;try{r=(0,i.subscribeTo)(e)(t)}catch(e){t.error(e)}return r}}},"./node_modules/rxjs/_esm5/internal/observable/ConnectableObservable.js":(e,t,r)=>{"use strict";r.r(t),r.d(t,{ConnectableObservable:()=>u,connectableObservableDescriptor:()=>l});var s=r("./node_modules/tslib/tslib.es6.js"),n=r("./node_modules/rxjs/_esm5/internal/Subject.js"),o=r("./node_modules/rxjs/_esm5/internal/Observable.js"),i=r("./node_modules/rxjs/_esm5/internal/Subscriber.js"),c=r("./node_modules/rxjs/_esm5/internal/Subscription.js"),a=r("./node_modules/rxjs/_esm5/internal/operators/refCount.js"),u=function(e){function t(t,r){var s=e.call(this)||this;return s.source=t,s.subjectFactory=r,s._refCount=0,s._isComplete=!1,s}return s.__extends(t,e),t.prototype._subscribe=function(e){return this.getSubject().subscribe(e)},t.prototype.getSubject=function(){var e=this._subject;return e&&!e.isStopped||(this._subject=this.subjectFactory()),this._subject},t.prototype.connect=function(){var e=this._connection;return e||(this._isComplete=!1,(e=this._connection=new c.Subscription).add(this.source.subscribe(new d(this.getSubject(),this))),e.closed&&(this._connection=null,e=c.Subscription.EMPTY)),e},t.prototype.refCount=function(){return(0,a.refCount)()(this)},t}(o.Observable),l=function(){var e=u.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:e._subscribe},_isComplete:{value:e._isComplete,writable:!0},getSubject:{value:e.getSubject},connect:{value:e.connect},refCount:{value:e.refCount}}}(),d=function(e){function t(t,r){var s=e.call(this,t)||this;return s.connectable=r,s}return s.__extends(t,e),t.prototype._error=function(t){this._unsubscribe(),e.prototype._error.call(this,t)},t.prototype._complete=function(){this.connectable._isComplete=!0,this._unsubscribe(),e.prototype._complete.call(this)},t.prototype._unsubscribe=function(){var e=this.connectable;if(e){this.connectable=null;var t=e._connection;e._refCount=0,e._subject=null,e._connection=null,t&&t.unsubscribe()}},t}(n.SubjectSubscriber);i.Subscriber},"./node_modules/rxjs/_esm5/internal/observable/bindCallback.js":(e,t,r)=>{"use strict";r.r(t),r.d(t,{bindCallback:()=>u});var s=r("./node_modules/rxjs/_esm5/internal/Observable.js"),n=r("./node_modules/rxjs/_esm5/internal/AsyncSubject.js"),o=r("./node_modules/rxjs/_esm5/internal/operators/map.js"),i=r("./node_modules/rxjs/_esm5/internal/util/canReportError.js"),c=r("./node_modules/rxjs/_esm5/internal/util/isArray.js"),a=r("./node_modules/rxjs/_esm5/internal/util/isScheduler.js");function u(e,t,r){if(t){if(!(0,a.isScheduler)(t))return function(){for(var s=[],n=0;n<arguments.length;n++)s[n]=arguments[n];return u(e,r).apply(void 0,s).pipe((0,o.map)((function(e){return(0,c.isArray)(e)?t.apply(void 0,e):t(e)})))};r=t}return function(){for(var t=[],o=0;o<arguments.length;o++)t[o]=arguments[o];var c,a=this,u={context:a,subject:c,callbackFunc:e,scheduler:r};return new s.Observable((function(s){if(r){var o={args:t,subscriber:s,params:u};return r.schedule(l,0,o)}if(!c){c=new n.AsyncSubject;try{e.apply(a,t.concat([function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];c.next(e.length<=1?e[0]:e),c.complete()}]))}catch(e){(0,i.canReportError)(c)?c.error(e):console.warn(e)}}return c.subscribe(s)}))}}function l(e){var t=this,r=e.args,s=e.subscriber,o=e.params,i=o.callbackFunc,c=o.context,a=o.scheduler,u=o.subject;if(!u){u=o.subject=new n.AsyncSubject;try{i.apply(c,r.concat([function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var s=e.length<=1?e[0]:e;t.add(a.schedule(d,0,{value:s,subject:u}))}]))}catch(e){u.error(e)}}this.add(u.subscribe(s))}function d(e){var t=e.value,r=e.subject;r.next(t),r.complete()}},"./node_modules/rxjs/_esm5/internal/observable/bindNodeCallback.js":(e,t,r)=>{"use strict";r.r(t),r.d(t,{bindNodeCallback:()=>u});var s=r("./node_modules/rxjs/_esm5/internal/Observable.js"),n=r("./node_modules/rxjs/_esm5/internal/AsyncSubject.js"),o=r("./node_modules/rxjs/_esm5/internal/operators/map.js"),i=r("./node_modules/rxjs/_esm5/internal/util/canReportError.js"),c=r("./node_modules/rxjs/_esm5/internal/util/isScheduler.js"),a=r("./node_modules/rxjs/_esm5/internal/util/isArray.js");function u(e,t,r){if(t){if(!(0,c.isScheduler)(t))return function(){for(var s=[],n=0;n<arguments.length;n++)s[n]=arguments[n];return u(e,r).apply(void 0,s).pipe((0,o.map)((function(e){return(0,a.isArray)(e)?t.apply(void 0,e):t(e)})))};r=t}return function(){for(var t=[],o=0;o<arguments.length;o++)t[o]=arguments[o];var c={subject:void 0,args:t,callbackFunc:e,scheduler:r,context:this};return new s.Observable((function(s){var o=c.context,a=c.subject;if(r)return r.schedule(l,0,{params:c,subscriber:s,context:o});if(!a){a=c.subject=new n.AsyncSubject;try{e.apply(o,t.concat([function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=e.shift();r?a.error(r):(a.next(e.length<=1?e[0]:e),a.complete())}]))}catch(e){(0,i.canReportError)(a)?a.error(e):console.warn(e)}}return a.subscribe(s)}))}}function l(e){var t=this,r=e.params,s=e.subscriber,o=e.context,i=r.callbackFunc,c=r.args,a=r.scheduler,u=r.subject;if(!u){u=r.subject=new n.AsyncSubject;try{i.apply(o,c.concat([function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var s=e.shift();if(s)t.add(a.schedule(h,0,{err:s,subject:u}));else{var n=e.length<=1?e[0]:e;t.add(a.schedule(d,0,{value:n,subject:u}))}}]))}catch(e){this.add(a.schedule(h,0,{err:e,subject:u}))}}this.add(u.subscribe(s))}function d(e){var t=e.value,r=e.subject;r.next(t),r.complete()}function h(e){var t=e.err;e.subject.error(t)}},"./node_modules/rxjs/_esm5/internal/observable/combineLatest.js":(e,t,r)=>{"use strict";r.r(t),r.d(t,{CombineLatestOperator:()=>d,CombineLatestSubscriber:()=>h,combineLatest:()=>l});var s=r("./node_modules/tslib/tslib.es6.js"),n=r("./node_modules/rxjs/_esm5/internal/util/isScheduler.js"),o=r("./node_modules/rxjs/_esm5/internal/util/isArray.js"),i=r("./node_modules/rxjs/_esm5/internal/OuterSubscriber.js"),c=r("./node_modules/rxjs/_esm5/internal/util/subscribeToResult.js"),a=r("./node_modules/rxjs/_esm5/internal/observable/fromArray.js"),u={};function l(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=void 0,s=void 0;return(0,n.isScheduler)(e[e.length-1])&&(s=e.pop()),"function"==typeof e[e.length-1]&&(r=e.pop()),1===e.length&&(0,o.isArray)(e[0])&&(e=e[0]),(0,a.fromArray)(e,s).lift(new d(r))}var d=function(){function e(e){this.resultSelector=e}return e.prototype.call=function(e,t){return t.subscribe(new h(e,this.resultSelector))},e}(),h=function(e){function t(t,r){var s=e.call(this,t)||this;return s.resultSelector=r,s.active=0,s.values=[],s.observables=[],s}return s.__extends(t,e),t.prototype._next=function(e){this.values.push(u),this.observables.push(e)},t.prototype._complete=function(){var e=this.observables,t=e.length;if(0===t)this.destination.complete();else{this.active=t,this.toRespond=t;for(var r=0;r<t;r++){var s=e[r];this.add((0,c.subscribeToResult)(this,s,void 0,r))}}},t.prototype.notifyComplete=function(e){0==(this.active-=1)&&this.destination.complete()},t.prototype.notifyNext=function(e,t,r){var s=this.values,n=s[r],o=this.toRespond?n===u?--this.toRespond:this.toRespond:0;s[r]=t,0===o&&(this.resultSelector?this._tryResultSelector(s):this.destination.next(s.slice()))},t.prototype._tryResultSelector=function(e){var t;try{t=this.resultSelector.apply(this,e)}catch(e){return void this.destination.error(e)}this.destination.next(t)},t}(i.OuterSubscriber)},"./node_modules/rxjs/_esm5/internal/observable/concat.js":(e,t,r)=>{"use strict";r.r(t),r.d(t,{concat:()=>o});var s=r("./node_modules/rxjs/_esm5/internal/observable/of.js"),n=r("./node_modules/rxjs/_esm5/internal/operators/concatAll.js");function o(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return(0,n.concatAll)()(s.of.apply(void 0,e))}},"./node_modules/rxjs/_esm5/internal/observable/defer.js":(e,t,r)=>{"use strict";r.r(t),r.d(t,{defer:()=>i});var s=r("./node_modules/rxjs/_esm5/internal/Observable.js"),n=r("./node_modules/rxjs/_esm5/internal/observable/from.js"),o=r("./node_modules/rxjs/_esm5/internal/observable/empty.js");function i(e){return new s.Observable((function(t){var r;try{r=e()}catch(e){return void t.error(e)}return(r?(0,n.from)(r):(0,o.empty)()).subscribe(t)}))}},"./node_modules/rxjs/_esm5/internal/observable/empty.js":(e,t,r)=>{"use strict";r.r(t),r.d(t,{EMPTY:()=>n,empty:()=>o});var s=r("./node_modules/rxjs/_esm5/internal/Observable.js"),n=new s.Observable((function(e){return e.complete()}));function o(e){return e?function(e){return new s.Observable((function(t){return e.schedule((function(){return t.complete()}))}))}(e):n}},"./node_modules/rxjs/_esm5/internal/observable/forkJoin.js":(e,t,r)=>{"use strict";r.r(t),r.d(t,{forkJoin:()=>a});var s=r("./node_modules/rxjs/_esm5/internal/Observable.js"),n=r("./node_modules/rxjs/_esm5/internal/util/isArray.js"),o=r("./node_modules/rxjs/_esm5/internal/operators/map.js"),i=r("./node_modules/rxjs/_esm5/internal/util/isObject.js"),c=r("./node_modules/rxjs/_esm5/internal/observable/from.js");function a(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(1===e.length){var r=e[0];if((0,n.isArray)(r))return u(r,null);if((0,i.isObject)(r)&&Object.getPrototypeOf(r)===Object.prototype){var s=Object.keys(r);return u(s.map((function(e){return r[e]})),s)}}if("function"==typeof e[e.length-1]){var c=e.pop();return u(e=1===e.length&&(0,n.isArray)(e[0])?e[0]:e,null).pipe((0,o.map)((function(e){return c.apply(void 0,e)})))}return u(e,null)}function u(e,t){return new s.Observable((function(r){var s=e.length;if(0!==s)for(var n=new Array(s),o=0,i=0,a=function(a){var u=(0,c.from)(e[a]),l=!1;r.add(u.subscribe({next:function(e){l||(l=!0,i++),n[a]=e},error:function(e){return r.error(e)},complete:function(){++o!==s&&l||(i===s&&r.next(t?t.reduce((function(e,t,r){return e[t]=n[r],e}),{}):n),r.complete())}}))},u=0;u<s;u++)a(u);else r.complete()}))}},"./node_modules/rxjs/_esm5/internal/observable/from.js":(e,t,r)=>{"use strict";r.r(t),r.d(t,{from:()=>i});var s=r("./node_modules/rxjs/_esm5/internal/Observable.js"),n=r("./node_modules/rxjs/_esm5/internal/util/subscribeTo.js"),o=r("./node_modules/rxjs/_esm5/internal/scheduled/scheduled.js");function i(e,t){return t?(0,o.scheduled)(e,t):e instanceof s.Observable?e:new s.Observable((0,n.subscribeTo)(e))}},"./node_modules/rxjs/_esm5/internal/observable/fromArray.js":(e,t,r)=>{"use strict";r.r(t),r.d(t,{fromArray:()=>i});var s=r("./node_modules/rxjs/_esm5/internal/Observable.js"),n=r("./node_modules/rxjs/_esm5/internal/util/subscribeToArray.js"),o=r("./node_modules/rxjs/_esm5/internal/scheduled/scheduleArray.js");function i(e,t){return t?(0,o.scheduleArray)(e,t):new s.Observable((0,n.subscribeToArray)(e))}},"./node_modules/rxjs/_esm5/internal/observable/fromEvent.js":(e,t,r)=>{"use strict";r.r(t),r.d(t,{fromEvent:()=>c});var s=r("./node_modules/rxjs/_esm5/internal/Observable.js"),n=r("./node_modules/rxjs/_esm5/internal/util/isArray.js"),o=r("./node_modules/rxjs/_esm5/internal/util/isFunction.js"),i=r("./node_modules/rxjs/_esm5/internal/operators/map.js");function c(e,t,r,u){return(0,o.isFunction)(r)&&(u=r,r=void 0),u?c(e,t,r).pipe((0,i.map)((function(e){return(0,n.isArray)(e)?u.apply(void 0,e):u(e)}))):new s.Observable((function(s){a(e,t,(function(e){arguments.length>1?s.next(Array.prototype.slice.call(arguments)):s.next(e)}),s,r)}))}function a(e,t,r,s,n){var o;if(function(e){return e&&"function"==typeof e.addEventListener&&"function"==typeof e.removeEventListener}(e)){var i=e;e.addEventListener(t,r,n),o=function(){return i.removeEventListener(t,r,n)}}else if(function(e){return e&&"function"==typeof e.on&&"function"==typeof e.off}(e)){var c=e;e.on(t,r),o=function(){return c.off(t,r)}}else if(function(e){return e&&"function"==typeof e.addListener&&"function"==typeof e.removeListener}(e)){var u=e;e.addListener(t,r),o=function(){return u.removeListener(t,r)}}else{if(!e||!e.length)throw new TypeError("Invalid event target");for(var l=0,d=e.length;l<d;l++)a(e[l],t,r,s,n)}s.add(o)}},"./node_modules/rxjs/_esm5/internal/observable/fromEventPattern.js":(e,t,r)=>{"use strict";r.r(t),r.d(t,{fromEventPattern:()=>c});var s=r("./node_modules/rxjs/_esm5/internal/Observable.js"),n=r("./node_modules/rxjs/_esm5/internal/util/isArray.js"),o=r("./node_modules/rxjs/_esm5/internal/util/isFunction.js"),i=r("./node_modules/rxjs/_esm5/internal/operators/map.js");function c(e,t,r){return r?c(e,t).pipe((0,i.map)((function(e){return(0,n.isArray)(e)?r.apply(void 0,e):r(e)}))):new s.Observable((function(r){var s,n=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return r.next(1===e.length?e[0]:e)};try{s=e(n)}catch(e){return void r.error(e)}if((0,o.isFunction)(t))return function(){return t(n,s)}}))}},"./node_modules/rxjs/_esm5/internal/observable/generate.js":(e,t,r)=>{"use strict";r.r(t),r.d(t,{generate:()=>i});var s=r("./node_modules/rxjs/_esm5/internal/Observable.js"),n=r("./node_modules/rxjs/_esm5/internal/util/identity.js"),o=r("./node_modules/rxjs/_esm5/internal/util/isScheduler.js");function i(e,t,r,i,a){var u,l;if(1==arguments.length){var d=e;l=d.initialState,t=d.condition,r=d.iterate,u=d.resultSelector||n.identity,a=d.scheduler}else void 0===i||(0,o.isScheduler)(i)?(l=e,u=n.identity,a=i):(l=e,u=i);return new s.Observable((function(e){var s=l;if(a)return a.schedule(c,0,{subscriber:e,iterate:r,condition:t,resultSelector:u,state:s});for(;;){if(t){var n=void 0;try{n=t(s)}catch(t){return void e.error(t)}if(!n){e.complete();break}}var o=void 0;try{o=u(s)}catch(t){return void e.error(t)}if(e.next(o),e.closed)break;try{s=r(s)}catch(t){return void e.error(t)}}}))}function c(e){var t=e.subscriber,r=e.condition;if(!t.closed){if(e.needIterate)try{e.state=e.iterate(e.state)}catch(e){return void t.error(e)}else e.needIterate=!0;if(r){var s=void 0;try{s=r(e.state)}catch(e){return void t.error(e)}if(!s)return void t.complete();if(t.closed)return}var n;try{n=e.resultSelector(e.state)}catch(e){return void t.error(e)}if(!t.closed&&(t.next(n),!t.closed))return this.schedule(e)}}},"./node_modules/rxjs/_esm5/internal/observable/iif.js":(e,t,r)=>{"use strict";r.r(t),r.d(t,{iif:()=>o});var s=r("./node_modules/rxjs/_esm5/internal/observable/defer.js"),n=r("./node_modules/rxjs/_esm5/internal/observable/empty.js");function o(e,t,r){return void 0===t&&(t=n.EMPTY),void 0===r&&(r=n.EMPTY),(0,s.defer)((function(){return e()?t:r}))}},"./node_modules/rxjs/_esm5/internal/observable/interval.js":(e,t,r)=>{"use strict";r.r(t),r.d(t,{interval:()=>i});var s=r("./node_modules/rxjs/_esm5/internal/Observable.js"),n=r("./node_modules/rxjs/_esm5/internal/scheduler/async.js"),o=r("./node_modules/rxjs/_esm5/internal/util/isNumeric.js");function i(e,t){return void 0===e&&(e=0),void 0===t&&(t=n.async),(!(0,o.isNumeric)(e)||e<0)&&(e=0),t&&"function"==typeof t.schedule||(t=n.async),new s.Observable((function(r){return r.add(t.schedule(c,e,{subscriber:r,counter:0,period:e})),r}))}function c(e){var t=e.subscriber,r=e.counter,s=e.period;t.next(r),this.schedule({subscriber:t,counter:r+1,period:s},s)}},"./node_modules/rxjs/_esm5/internal/observable/merge.js":(e,t,r)=>{"use strict";r.r(t),r.d(t,{merge:()=>c});var s=r("./node_modules/rxjs/_esm5/internal/Observable.js"),n=r("./node_modules/rxjs/_esm5/internal/util/isScheduler.js"),o=r("./node_modules/rxjs/_esm5/internal/operators/mergeAll.js"),i=r("./node_modules/rxjs/_esm5/internal/observable/fromArray.js");function c(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=Number.POSITIVE_INFINITY,c=null,a=e[e.length-1];return(0,n.isScheduler)(a)?(c=e.pop(),e.length>1&&"number"==typeof e[e.length-1]&&(r=e.pop())):"number"==typeof a&&(r=e.pop()),null===c&&1===e.length&&e[0]instanceof s.Observable?e[0]:(0,o.mergeAll)(r)((0,i.fromArray)(e,c))}},"./node_modules/rxjs/_esm5/internal/observable/never.js":(e,t,r)=>{"use strict";r.r(t),r.d(t,{NEVER:()=>o,never:()=>i});var s=r("./node_modules/rxjs/_esm5/internal/Observable.js"),n=r("./node_modules/rxjs/_esm5/internal/util/noop.js"),o=new s.Observable(n.noop);function i(){return o}},"./node_modules/rxjs/_esm5/internal/observable/of.js":(e,t,r)=>{"use strict";r.r(t),r.d(t,{of:()=>i});var s=r("./node_modules/rxjs/_esm5/internal/util/isScheduler.js"),n=r("./node_modules/rxjs/_esm5/internal/observable/fromArray.js"),o=r("./node_modules/rxjs/_esm5/internal/scheduled/scheduleArray.js");function i(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=e[e.length-1];return(0,s.isScheduler)(r)?(e.pop(),(0,o.scheduleArray)(e,r)):(0,n.fromArray)(e)}},"./node_modules/rxjs/_esm5/internal/observable/onErrorResumeNext.js":(e,t,r)=>{"use strict";r.r(t),r.d(t,{onErrorResumeNext:()=>c});var s=r("./node_modules/rxjs/_esm5/internal/Observable.js"),n=r("./node_modules/rxjs/_esm5/internal/observable/from.js"),o=r("./node_modules/rxjs/_esm5/internal/util/isArray.js"),i=r("./node_modules/rxjs/_esm5/internal/observable/empty.js");function c(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(0===e.length)return i.EMPTY;var r=e[0],a=e.slice(1);return 1===e.length&&(0,o.isArray)(r)?c.apply(void 0,r):new s.Observable((function(e){var t=function(){return e.add(c.apply(void 0,a).subscribe(e))};return(0,n.from)(r).subscribe({next:function(t){e.next(t)},error:t,complete:t})}))}},"./node_modules/rxjs/_esm5/internal/observable/pairs.js":(e,t,r)=>{"use strict";r.r(t),r.d(t,{dispatch:()=>i,pairs:()=>o});var s=r("./node_modules/rxjs/_esm5/internal/Observable.js"),n=r("./node_modules/rxjs/_esm5/internal/Subscription.js");function o(e,t){return t?new s.Observable((function(r){var s=Object.keys(e),o=new n.Subscription;return o.add(t.schedule(i,0,{keys:s,index:0,subscriber:r,subscription:o,obj:e})),o})):new s.Observable((function(t){for(var r=Object.keys(e),s=0;s<r.length&&!t.closed;s++){var n=r[s];e.hasOwnProperty(n)&&t.next([n,e[n]])}t.complete()}))}function i(e){var t=e.keys,r=e.index,s=e.subscriber,n=e.subscription,o=e.obj;if(!s.closed)if(r<t.length){var i=t[r];s.next([i,o[i]]),n.add(this.schedule({keys:t,index:r+1,subscriber:s,subscription:n,obj:o}))}else s.complete()}},"./node_modules/rxjs/_esm5/internal/observable/partition.js":(e,t,r)=>{"use strict";r.r(t),r.d(t,{partition:()=>c});var s=r("./node_modules/rxjs/_esm5/internal/util/not.js"),n=r("./node_modules/rxjs/_esm5/internal/util/subscribeTo.js"),o=r("./node_modules/rxjs/_esm5/internal/operators/filter.js"),i=r("./node_modules/rxjs/_esm5/internal/Observable.js");function c(e,t,r){return[(0,o.filter)(t,r)(new i.Observable((0,n.subscribeTo)(e))),(0,o.filter)((0,s.not)(t,r))(new i.Observable((0,n.subscribeTo)(e)))]}},"./node_modules/rxjs/_esm5/internal/observable/race.js":(e,t,r)=>{"use strict";r.r(t),r.d(t,{RaceOperator:()=>u,RaceSubscriber:()=>l,race:()=>a});var s=r("./node_modules/tslib/tslib.es6.js"),n=r("./node_modules/rxjs/_esm5/internal/util/isArray.js"),o=r("./node_modules/rxjs/_esm5/internal/observable/fromArray.js"),i=r("./node_modules/rxjs/_esm5/internal/OuterSubscriber.js"),c=r("./node_modules/rxjs/_esm5/internal/util/subscribeToResult.js");function a(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(1===e.length){if(!(0,n.isArray)(e[0]))return e[0];e=e[0]}return(0,o.fromArray)(e,void 0).lift(new u)}var u=function(){function e(){}return e.prototype.call=function(e,t){return t.subscribe(new l(e))},e}(),l=function(e){function t(t){var r=e.call(this,t)||this;return r.hasFirst=!1,r.observables=[],r.subscriptions=[],r}return s.__extends(t,e),t.prototype._next=function(e){this.observables.push(e)},t.prototype._complete=function(){var e=this.observables,t=e.length;if(0===t)this.destination.complete();else{for(var r=0;r<t&&!this.hasFirst;r++){var s=e[r],n=(0,c.subscribeToResult)(this,s,void 0,r);this.subscriptions&&this.subscriptions.push(n),this.add(n)}this.observables=null}},t.prototype.notifyNext=function(e,t,r){if(!this.hasFirst){this.hasFirst=!0;for(var s=0;s<this.subscriptions.length;s++)if(s!==r){var n=this.subscriptions[s];n.unsubscribe(),this.remove(n)}this.subscriptions=null}this.destination.next(t)},t}(i.OuterSubscriber)},"./node_modules/rxjs/_esm5/internal/observable/range.js":(e,t,r)=>{"use strict";r.r(t),r.d(t,{dispatch:()=>o,range:()=>n});var s=r("./node_modules/rxjs/_esm5/internal/Observable.js");function n(e,t,r){return void 0===e&&(e=0),new s.Observable((function(s){void 0===t&&(t=e,e=0);var n=0,i=e;if(r)return r.schedule(o,0,{index:n,count:t,start:e,subscriber:s});for(;;){if(n++>=t){s.complete();break}if(s.next(i++),s.closed)break}}))}function o(e){var t=e.start,r=e.index,s=e.count,n=e.subscriber;r>=s?n.complete():(n.next(t),n.closed||(e.index=r+1,e.start=t+1,this.schedule(e)))}},"./node_modules/rxjs/_esm5/internal/observable/throwError.js":(e,t,r)=>{"use strict";r.r(t),r.d(t,{throwError:()=>n});var s=r("./node_modules/rxjs/_esm5/internal/Observable.js");function n(e,t){return t?new s.Observable((function(r){return t.schedule(o,0,{error:e,subscriber:r})})):new s.Observable((function(t){return t.error(e)}))}function o(e){var t=e.error;e.subscriber.error(t)}},"./node_modules/rxjs/_esm5/internal/observable/timer.js":(e,t,r)=>{"use strict";r.r(t),r.d(t,{timer:()=>c});var s=r("./node_modules/rxjs/_esm5/internal/Observable.js"),n=r("./node_modules/rxjs/_esm5/internal/scheduler/async.js"),o=r("./node_modules/rxjs/_esm5/internal/util/isNumeric.js"),i=r("./node_modules/rxjs/_esm5/internal/util/isScheduler.js");function c(e,t,r){void 0===e&&(e=0);var c=-1;return(0,o.isNumeric)(t)?c=Number(t)<1?1:Number(t):(0,i.isScheduler)(t)&&(r=t),(0,i.isScheduler)(r)||(r=n.async),new s.Observable((function(t){var s=(0,o.isNumeric)(e)?e:+e-r.now();return r.schedule(a,s,{index:0,period:c,subscriber:t})}))}function a(e){var t=e.index,r=e.period,s=e.subscriber;if(s.next(t),!s.closed){if(-1===r)return s.complete();e.index=t+1,this.schedule(e,r)}}},"./node_modules/rxjs/_esm5/internal/observable/using.js":(e,t,r)=>{"use strict";r.r(t),r.d(t,{using:()=>i});var s=r("./node_modules/rxjs/_esm5/internal/Observable.js"),n=r("./node_modules/rxjs/_esm5/internal/observable/from.js"),o=r("./node_modules/rxjs/_esm5/internal/observable/empty.js");function i(e,t){return new s.Observable((function(r){var s,i;try{s=e()}catch(e){return void r.error(e)}try{i=t(s)}catch(e){return void r.error(e)}var c=(i?(0,n.from)(i):o.EMPTY).subscribe(r);return function(){c.unsubscribe(),s&&s.unsubscribe()}}))}},"./node_modules/rxjs/_esm5/internal/observable/zip.js":(e,t,r)=>{"use strict";r.r(t),r.d(t,{ZipOperator:()=>l,ZipSubscriber:()=>d,zip:()=>u});var s=r("./node_modules/tslib/tslib.es6.js"),n=r("./node_modules/rxjs/_esm5/internal/observable/fromArray.js"),o=r("./node_modules/rxjs/_esm5/internal/util/isArray.js"),i=r("./node_modules/rxjs/_esm5/internal/Subscriber.js"),c=r("./node_modules/rxjs/_esm5/internal/symbol/iterator.js"),a=r("./node_modules/rxjs/_esm5/internal/innerSubscribe.js");function u(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=e[e.length-1];return"function"==typeof r&&e.pop(),(0,n.fromArray)(e,void 0).lift(new l(r))}var l=function(){function e(e){this.resultSelector=e}return e.prototype.call=function(e,t){return t.subscribe(new d(e,this.resultSelector))},e}(),d=function(e){function t(t,r,s){void 0===s&&(s=Object.create(null));var n=e.call(this,t)||this;return n.resultSelector=r,n.iterators=[],n.active=0,n.resultSelector="function"==typeof r?r:void 0,n}return s.__extends(t,e),t.prototype._next=function(e){var t=this.iterators;(0,o.isArray)(e)?t.push(new p(e)):"function"==typeof e[c.iterator]?t.push(new h(e[c.iterator]())):t.push(new f(this.destination,this,e))},t.prototype._complete=function(){var e=this.iterators,t=e.length;if(this.unsubscribe(),0!==t){this.active=t;for(var r=0;r<t;r++){var s=e[r];if(s.stillUnsubscribed)this.destination.add(s.subscribe());else this.active--}}else this.destination.complete()},t.prototype.notifyInactive=function(){this.active--,0===this.active&&this.destination.complete()},t.prototype.checkIterators=function(){for(var e=this.iterators,t=e.length,r=this.destination,s=0;s<t;s++){if("function"==typeof(i=e[s]).hasValue&&!i.hasValue())return}var n=!1,o=[];for(s=0;s<t;s++){var i,c=(i=e[s]).next();if(i.hasCompleted()&&(n=!0),c.done)return void r.complete();o.push(c.value)}this.resultSelector?this._tryresultSelector(o):r.next(o),n&&r.complete()},t.prototype._tryresultSelector=function(e){var t;try{t=this.resultSelector.apply(this,e)}catch(e){return void this.destination.error(e)}this.destination.next(t)},t}(i.Subscriber),h=function(){function e(e){this.iterator=e,this.nextResult=e.next()}return e.prototype.hasValue=function(){return!0},e.prototype.next=function(){var e=this.nextResult;return this.nextResult=this.iterator.next(),e},e.prototype.hasCompleted=function(){var e=this.nextResult;return Boolean(e&&e.done)},e}(),p=function(){function e(e){this.array=e,this.index=0,this.length=0,this.length=e.length}return e.prototype[c.iterator]=function(){return this},e.prototype.next=function(e){var t=this.index++,r=this.array;return t<this.length?{value:r[t],done:!1}:{value:null,done:!0}},e.prototype.hasValue=function(){return this.array.length>this.index},e.prototype.hasCompleted=function(){return this.array.length===this.index},e}(),f=function(e){function t(t,r,s){var n=e.call(this,t)||this;return n.parent=r,n.observable=s,n.stillUnsubscribed=!0,n.buffer=[],n.isComplete=!1,n}return s.__extends(t,e),t.prototype[c.iterator]=function(){return this},t.prototype.next=function(){var e=this.buffer;return 0===e.length&&this.isComplete?{value:null,done:!0}:{value:e.shift(),done:!1}},t.prototype.hasValue=function(){return this.buffer.length>0},t.prototype.hasCompleted=function(){return 0===this.buffer.length&&this.isComplete},t.prototype.notifyComplete=function(){this.buffer.length>0?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()},t.prototype.notifyNext=function(e){this.buffer.push(e),this.parent.checkIterators()},t.prototype.subscribe=function(){return(0,a.innerSubscribe)(this.observable,new a.SimpleInnerSubscriber(this))},t}(a.SimpleOuterSubscriber)},"./node_modules/rxjs/_esm5/internal/operators/concatAll.js":(e,t,r)=>{"use strict";r.r(t),r.d(t,{concatAll:()=>n});var s=r("./node_modules/rxjs/_esm5/internal/operators/mergeAll.js");function n(){return(0,s.mergeAll)(1)}},"./node_modules/rxjs/_esm5/internal/operators/filter.js":(e,t,r)=>{"use strict";r.r(t),r.d(t,{filter:()=>o});var s=r("./node_modules/tslib/tslib.es6.js"),n=r("./node_modules/rxjs/_esm5/internal/Subscriber.js");function o(e,t){return function(r){return r.lift(new i(e,t))}}var i=function(){function e(e,t){this.predicate=e,this.thisArg=t}return e.prototype.call=function(e,t){return t.subscribe(new c(e,this.predicate,this.thisArg))},e}(),c=function(e){function t(t,r,s){var n=e.call(this,t)||this;return n.predicate=r,n.thisArg=s,n.count=0,n}return s.__extends(t,e),t.prototype._next=function(e){var t;try{t=this.predicate.call(this.thisArg,e,this.count++)}catch(e){return void this.destination.error(e)}t&&this.destination.next(e)},t}(n.Subscriber)},"./node_modules/rxjs/_esm5/internal/operators/groupBy.js":(e,t,r)=>{"use strict";r.r(t),r.d(t,{GroupedObservable:()=>h,groupBy:()=>a});var s=r("./node_modules/tslib/tslib.es6.js"),n=r("./node_modules/rxjs/_esm5/internal/Subscriber.js"),o=r("./node_modules/rxjs/_esm5/internal/Subscription.js"),i=r("./node_modules/rxjs/_esm5/internal/Observable.js"),c=r("./node_modules/rxjs/_esm5/internal/Subject.js");function a(e,t,r,s){return function(n){return n.lift(new u(e,t,r,s))}}var u=function(){function e(e,t,r,s){this.keySelector=e,this.elementSelector=t,this.durationSelector=r,this.subjectSelector=s}return e.prototype.call=function(e,t){return t.subscribe(new l(e,this.keySelector,this.elementSelector,this.durationSelector,this.subjectSelector))},e}(),l=function(e){function t(t,r,s,n,o){var i=e.call(this,t)||this;return i.keySelector=r,i.elementSelector=s,i.durationSelector=n,i.subjectSelector=o,i.groups=null,i.attemptedToUnsubscribe=!1,i.count=0,i}return s.__extends(t,e),t.prototype._next=function(e){var t;try{t=this.keySelector(e)}catch(e){return void this.error(e)}this._group(e,t)},t.prototype._group=function(e,t){var r=this.groups;r||(r=this.groups=new Map);var s,n=r.get(t);if(this.elementSelector)try{s=this.elementSelector(e)}catch(e){this.error(e)}else s=e;if(!n){n=this.subjectSelector?this.subjectSelector():new c.Subject,r.set(t,n);var o=new h(t,n,this);if(this.destination.next(o),this.durationSelector){var i=void 0;try{i=this.durationSelector(new h(t,n))}catch(e){return void this.error(e)}this.add(i.subscribe(new d(t,n,this)))}}n.closed||n.next(s)},t.prototype._error=function(e){var t=this.groups;t&&(t.forEach((function(t,r){t.error(e)})),t.clear()),this.destination.error(e)},t.prototype._complete=function(){var e=this.groups;e&&(e.forEach((function(e,t){e.complete()})),e.clear()),this.destination.complete()},t.prototype.removeGroup=function(e){this.groups.delete(e)},t.prototype.unsubscribe=function(){this.closed||(this.attemptedToUnsubscribe=!0,0===this.count&&e.prototype.unsubscribe.call(this))},t}(n.Subscriber),d=function(e){function t(t,r,s){var n=e.call(this,r)||this;return n.key=t,n.group=r,n.parent=s,n}return s.__extends(t,e),t.prototype._next=function(e){this.complete()},t.prototype._unsubscribe=function(){var e=this.parent,t=this.key;this.key=this.parent=null,e&&e.removeGroup(t)},t}(n.Subscriber),h=function(e){function t(t,r,s){var n=e.call(this)||this;return n.key=t,n.groupSubject=r,n.refCountSubscription=s,n}return s.__extends(t,e),t.prototype._subscribe=function(e){var t=new o.Subscription,r=this.refCountSubscription,s=this.groupSubject;return r&&!r.closed&&t.add(new p(r)),t.add(s.subscribe(e)),t},t}(i.Observable),p=function(e){function t(t){var r=e.call(this)||this;return r.parent=t,t.count++,r}return s.__extends(t,e),t.prototype.unsubscribe=function(){var t=this.parent;t.closed||this.closed||(e.prototype.unsubscribe.call(this),t.count-=1,0===t.count&&t.attemptedToUnsubscribe&&t.unsubscribe())},t}(o.Subscription)},"./node_modules/rxjs/_esm5/internal/operators/map.js":(e,t,r)=>{"use strict";r.r(t),r.d(t,{MapOperator:()=>i,map:()=>o});var s=r("./node_modules/tslib/tslib.es6.js"),n=r("./node_modules/rxjs/_esm5/internal/Subscriber.js");function o(e,t){return function(r){if("function"!=typeof e)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return r.lift(new i(e,t))}}var i=function(){function e(e,t){this.project=e,this.thisArg=t}return e.prototype.call=function(e,t){return t.subscribe(new c(e,this.project,this.thisArg))},e}(),c=function(e){function t(t,r,s){var n=e.call(this,t)||this;return n.project=r,n.count=0,n.thisArg=s||n,n}return s.__extends(t,e),t.prototype._next=function(e){var t;try{t=this.project.call(this.thisArg,e,this.count++)}catch(e){return void this.destination.error(e)}this.destination.next(t)},t}(n.Subscriber)},"./node_modules/rxjs/_esm5/internal/operators/mergeAll.js":(e,t,r)=>{"use strict";r.r(t),r.d(t,{mergeAll:()=>o});var s=r("./node_modules/rxjs/_esm5/internal/operators/mergeMap.js"),n=r("./node_modules/rxjs/_esm5/internal/util/identity.js");function o(e){return void 0===e&&(e=Number.POSITIVE_INFINITY),(0,s.mergeMap)(n.identity,e)}},"./node_modules/rxjs/_esm5/internal/operators/mergeMap.js":(e,t,r)=>{"use strict";r.r(t),r.d(t,{MergeMapOperator:()=>a,MergeMapSubscriber:()=>u,flatMap:()=>l,mergeMap:()=>c});var s=r("./node_modules/tslib/tslib.es6.js"),n=r("./node_modules/rxjs/_esm5/internal/operators/map.js"),o=r("./node_modules/rxjs/_esm5/internal/observable/from.js"),i=r("./node_modules/rxjs/_esm5/internal/innerSubscribe.js");function c(e,t,r){return void 0===r&&(r=Number.POSITIVE_INFINITY),"function"==typeof t?function(s){return s.pipe(c((function(r,s){return(0,o.from)(e(r,s)).pipe((0,n.map)((function(e,n){return t(r,e,s,n)})))}),r))}:("number"==typeof t&&(r=t),function(t){return t.lift(new a(e,r))})}var a=function(){function e(e,t){void 0===t&&(t=Number.POSITIVE_INFINITY),this.project=e,this.concurrent=t}return e.prototype.call=function(e,t){return t.subscribe(new u(e,this.project,this.concurrent))},e}(),u=function(e){function t(t,r,s){void 0===s&&(s=Number.POSITIVE_INFINITY);var n=e.call(this,t)||this;return n.project=r,n.concurrent=s,n.hasCompleted=!1,n.buffer=[],n.active=0,n.index=0,n}return s.__extends(t,e),t.prototype._next=function(e){this.active<this.concurrent?this._tryNext(e):this.buffer.push(e)},t.prototype._tryNext=function(e){var t,r=this.index++;try{t=this.project(e,r)}catch(e){return void this.destination.error(e)}this.active++,this._innerSub(t)},t.prototype._innerSub=function(e){var t=new i.SimpleInnerSubscriber(this),r=this.destination;r.add(t);var s=(0,i.innerSubscribe)(e,t);s!==t&&r.add(s)},t.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()},t.prototype.notifyNext=function(e){this.destination.next(e)},t.prototype.notifyComplete=function(){var e=this.buffer;this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},t}(i.SimpleOuterSubscriber),l=c},"./node_modules/rxjs/_esm5/internal/operators/observeOn.js":(e,t,r)=>{"use strict";r.r(t),r.d(t,{ObserveOnMessage:()=>u,ObserveOnOperator:()=>c,ObserveOnSubscriber:()=>a,observeOn:()=>i});var s=r("./node_modules/tslib/tslib.es6.js"),n=r("./node_modules/rxjs/_esm5/internal/Subscriber.js"),o=r("./node_modules/rxjs/_esm5/internal/Notification.js");function i(e,t){return void 0===t&&(t=0),function(r){return r.lift(new c(e,t))}}var c=function(){function e(e,t){void 0===t&&(t=0),this.scheduler=e,this.delay=t}return e.prototype.call=function(e,t){return t.subscribe(new a(e,this.scheduler,this.delay))},e}(),a=function(e){function t(t,r,s){void 0===s&&(s=0);var n=e.call(this,t)||this;return n.scheduler=r,n.delay=s,n}return s.__extends(t,e),t.dispatch=function(e){var t=e.notification,r=e.destination;t.observe(r),this.unsubscribe()},t.prototype.scheduleMessage=function(e){this.destination.add(this.scheduler.schedule(t.dispatch,this.delay,new u(e,this.destination)))},t.prototype._next=function(e){this.scheduleMessage(o.Notification.createNext(e))},t.prototype._error=function(e){this.scheduleMessage(o.Notification.createError(e)),this.unsubscribe()},t.prototype._complete=function(){this.scheduleMessage(o.Notification.createComplete()),this.unsubscribe()},t}(n.Subscriber),u=function(){return function(e,t){this.notification=e,this.destination=t}}()},"./node_modules/rxjs/_esm5/internal/operators/refCount.js":(e,t,r)=>{"use strict";r.r(t),r.d(t,{refCount:()=>o});var s=r("./node_modules/tslib/tslib.es6.js"),n=r("./node_modules/rxjs/_esm5/internal/Subscriber.js");function o(){return function(e){return e.lift(new i(e))}}var i=function(){function e(e){this.connectable=e}return e.prototype.call=function(e,t){var r=this.connectable;r._refCount++;var s=new c(e,r),n=t.subscribe(s);return s.closed||(s.connection=r.connect()),n},e}(),c=function(e){function t(t,r){var s=e.call(this,t)||this;return s.connectable=r,s}return s.__extends(t,e),t.prototype._unsubscribe=function(){var e=this.connectable;if(e){this.connectable=null;var t=e._refCount;if(t<=0)this.connection=null;else if(e._refCount=t-1,t>1)this.connection=null;else{var r=this.connection,s=e._connection;this.connection=null,!s||r&&s!==r||s.unsubscribe()}}else this.connection=null},t}(n.Subscriber)},"./node_modules/rxjs/_esm5/internal/scheduled/scheduleArray.js":(e,t,r)=>{"use strict";r.r(t),r.d(t,{scheduleArray:()=>o});var s=r("./node_modules/rxjs/_esm5/internal/Observable.js"),n=r("./node_modules/rxjs/_esm5/internal/Subscription.js");function o(e,t){return new s.Observable((function(r){var s=new n.Subscription,o=0;return s.add(t.schedule((function(){o!==e.length?(r.next(e[o++]),r.closed||s.add(this.schedule())):r.complete()}))),s}))}},"./node_modules/rxjs/_esm5/internal/scheduled/scheduleIterable.js":(e,t,r)=>{"use strict";r.r(t),r.d(t,{scheduleIterable:()=>i});var s=r("./node_modules/rxjs/_esm5/internal/Observable.js"),n=r("./node_modules/rxjs/_esm5/internal/Subscription.js"),o=r("./node_modules/rxjs/_esm5/internal/symbol/iterator.js");function i(e,t){if(!e)throw new Error("Iterable cannot be null");return new s.Observable((function(r){var s,i=new n.Subscription;return i.add((function(){s&&"function"==typeof s.return&&s.return()})),i.add(t.schedule((function(){s=e[o.iterator](),i.add(t.schedule((function(){if(!r.closed){var e,t;try{var n=s.next();e=n.value,t=n.done}catch(e){return void r.error(e)}t?r.complete():(r.next(e),this.schedule())}})))}))),i}))}},"./node_modules/rxjs/_esm5/internal/scheduled/scheduleObservable.js":(e,t,r)=>{"use strict";r.r(t),r.d(t,{scheduleObservable:()=>i});var s=r("./node_modules/rxjs/_esm5/internal/Observable.js"),n=r("./node_modules/rxjs/_esm5/internal/Subscription.js"),o=r("./node_modules/rxjs/_esm5/internal/symbol/observable.js");function i(e,t){return new s.Observable((function(r){var s=new n.Subscription;return s.add(t.schedule((function(){var n=e[o.observable]();s.add(n.subscribe({next:function(e){s.add(t.schedule((function(){return r.next(e)})))},error:function(e){s.add(t.schedule((function(){return r.error(e)})))},complete:function(){s.add(t.schedule((function(){return r.complete()})))}}))}))),s}))}},"./node_modules/rxjs/_esm5/internal/scheduled/schedulePromise.js":(e,t,r)=>{"use strict";r.r(t),r.d(t,{schedulePromise:()=>o});var s=r("./node_modules/rxjs/_esm5/internal/Observable.js"),n=r("./node_modules/rxjs/_esm5/internal/Subscription.js");function o(e,t){return new s.Observable((function(r){var s=new n.Subscription;return s.add(t.schedule((function(){return e.then((function(e){s.add(t.schedule((function(){r.next(e),s.add(t.schedule((function(){return r.complete()})))})))}),(function(e){s.add(t.schedule((function(){return r.error(e)})))}))}))),s}))}},"./node_modules/rxjs/_esm5/internal/scheduled/scheduled.js":(e,t,r)=>{"use strict";r.r(t),r.d(t,{scheduled:()=>d});var s=r("./node_modules/rxjs/_esm5/internal/scheduled/scheduleObservable.js"),n=r("./node_modules/rxjs/_esm5/internal/scheduled/schedulePromise.js"),o=r("./node_modules/rxjs/_esm5/internal/scheduled/scheduleArray.js"),i=r("./node_modules/rxjs/_esm5/internal/scheduled/scheduleIterable.js"),c=r("./node_modules/rxjs/_esm5/internal/util/isInteropObservable.js"),a=r("./node_modules/rxjs/_esm5/internal/util/isPromise.js"),u=r("./node_modules/rxjs/_esm5/internal/util/isArrayLike.js"),l=r("./node_modules/rxjs/_esm5/internal/util/isIterable.js");function d(e,t){if(null!=e){if((0,c.isInteropObservable)(e))return(0,s.scheduleObservable)(e,t);if((0,a.isPromise)(e))return(0,n.schedulePromise)(e,t);if((0,u.isArrayLike)(e))return(0,o.scheduleArray)(e,t);if((0,l.isIterable)(e)||"string"==typeof e)return(0,i.scheduleIterable)(e,t)}throw new TypeError((null!==e&&typeof e||e)+" is not observable")}},"./node_modules/rxjs/_esm5/internal/scheduler/Action.js":(e,t,r)=>{"use strict";r.r(t),r.d(t,{Action:()=>n});var s=r("./node_modules/tslib/tslib.es6.js"),n=function(e){function t(t,r){return e.call(this)||this}return s.__extends(t,e),t.prototype.schedule=function(e,t){return void 0===t&&(t=0),this},t}(r("./node_modules/rxjs/_esm5/internal/Subscription.js").Subscription)},"./node_modules/rxjs/_esm5/internal/scheduler/AnimationFrameAction.js":(e,t,r)=>{"use strict";r.r(t),r.d(t,{AnimationFrameAction:()=>n});var s=r("./node_modules/tslib/tslib.es6.js"),n=function(e){function t(t,r){var s=e.call(this,t,r)||this;return s.scheduler=t,s.work=r,s}return s.__extends(t,e),t.prototype.requestAsyncId=function(t,r,s){return void 0===s&&(s=0),null!==s&&s>0?e.prototype.requestAsyncId.call(this,t,r,s):(t.actions.push(this),t.scheduled||(t.scheduled=requestAnimationFrame((function(){return t.flush(null)}))))},t.prototype.recycleAsyncId=function(t,r,s){if(void 0===s&&(s=0),null!==s&&s>0||null===s&&this.delay>0)return e.prototype.recycleAsyncId.call(this,t,r,s);0===t.actions.length&&(cancelAnimationFrame(r),t.scheduled=void 0)},t}(r("./node_modules/rxjs/_esm5/internal/scheduler/AsyncAction.js").AsyncAction)},"./node_modules/rxjs/_esm5/internal/scheduler/AnimationFrameScheduler.js":(e,t,r)=>{"use strict";r.r(t),r.d(t,{AnimationFrameScheduler:()=>n});var s=r("./node_modules/tslib/tslib.es6.js"),n=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s.__extends(t,e),t.prototype.flush=function(e){this.active=!0,this.scheduled=void 0;var t,r=this.actions,s=-1,n=r.length;e=e||r.shift();do{if(t=e.execute(e.state,e.delay))break}while(++s<n&&(e=r.shift()));if(this.active=!1,t){for(;++s<n&&(e=r.shift());)e.unsubscribe();throw t}},t}(r("./node_modules/rxjs/_esm5/internal/scheduler/AsyncScheduler.js").AsyncScheduler)},"./node_modules/rxjs/_esm5/internal/scheduler/AsapAction.js":(e,t,r)=>{"use strict";r.r(t),r.d(t,{AsapAction:()=>o});var s=r("./node_modules/tslib/tslib.es6.js"),n=r("./node_modules/rxjs/_esm5/internal/util/Immediate.js"),o=function(e){function t(t,r){var s=e.call(this,t,r)||this;return s.scheduler=t,s.work=r,s}return s.__extends(t,e),t.prototype.requestAsyncId=function(t,r,s){return void 0===s&&(s=0),null!==s&&s>0?e.prototype.requestAsyncId.call(this,t,r,s):(t.actions.push(this),t.scheduled||(t.scheduled=n.Immediate.setImmediate(t.flush.bind(t,null))))},t.prototype.recycleAsyncId=function(t,r,s){if(void 0===s&&(s=0),null!==s&&s>0||null===s&&this.delay>0)return e.prototype.recycleAsyncId.call(this,t,r,s);0===t.actions.length&&(n.Immediate.clearImmediate(r),t.scheduled=void 0)},t}(r("./node_modules/rxjs/_esm5/internal/scheduler/AsyncAction.js").AsyncAction)},"./node_modules/rxjs/_esm5/internal/scheduler/AsapScheduler.js":(e,t,r)=>{"use strict";r.r(t),r.d(t,{AsapScheduler:()=>n});var s=r("./node_modules/tslib/tslib.es6.js"),n=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s.__extends(t,e),t.prototype.flush=function(e){this.active=!0,this.scheduled=void 0;var t,r=this.actions,s=-1,n=r.length;e=e||r.shift();do{if(t=e.execute(e.state,e.delay))break}while(++s<n&&(e=r.shift()));if(this.active=!1,t){for(;++s<n&&(e=r.shift());)e.unsubscribe();throw t}},t}(r("./node_modules/rxjs/_esm5/internal/scheduler/AsyncScheduler.js").AsyncScheduler)},"./node_modules/rxjs/_esm5/internal/scheduler/AsyncAction.js":(e,t,r)=>{"use strict";r.r(t),r.d(t,{AsyncAction:()=>n});var s=r("./node_modules/tslib/tslib.es6.js"),n=function(e){function t(t,r){var s=e.call(this,t,r)||this;return s.scheduler=t,s.work=r,s.pending=!1,s}return s.__extends(t,e),t.prototype.schedule=function(e,t){if(void 0===t&&(t=0),this.closed)return this;this.state=e;var r=this.id,s=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(s,r,t)),this.pending=!0,this.delay=t,this.id=this.id||this.requestAsyncId(s,this.id,t),this},t.prototype.requestAsyncId=function(e,t,r){return void 0===r&&(r=0),setInterval(e.flush.bind(e,this),r)},t.prototype.recycleAsyncId=function(e,t,r){if(void 0===r&&(r=0),null!==r&&this.delay===r&&!1===this.pending)return t;clearInterval(t)},t.prototype.execute=function(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var r=this._execute(e,t);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},t.prototype._execute=function(e,t){var r=!1,s=void 0;try{this.work(e)}catch(e){r=!0,s=!!e&&e||new Error(e)}if(r)return this.unsubscribe(),s},t.prototype._unsubscribe=function(){var e=this.id,t=this.scheduler,r=t.actions,s=r.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==s&&r.splice(s,1),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null},t}(r("./node_modules/rxjs/_esm5/internal/scheduler/Action.js").Action)},"./node_modules/rxjs/_esm5/internal/scheduler/AsyncScheduler.js":(e,t,r)=>{"use strict";r.r(t),r.d(t,{AsyncScheduler:()=>o});var s=r("./node_modules/tslib/tslib.es6.js"),n=r("./node_modules/rxjs/_esm5/internal/Scheduler.js"),o=function(e){function t(r,s){void 0===s&&(s=n.Scheduler.now);var o=e.call(this,r,(function(){return t.delegate&&t.delegate!==o?t.delegate.now():s()}))||this;return o.actions=[],o.active=!1,o.scheduled=void 0,o}return s.__extends(t,e),t.prototype.schedule=function(r,s,n){return void 0===s&&(s=0),t.delegate&&t.delegate!==this?t.delegate.schedule(r,s,n):e.prototype.schedule.call(this,r,s,n)},t.prototype.flush=function(e){var t=this.actions;if(this.active)t.push(e);else{var r;this.active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=t.shift());if(this.active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}},t}(n.Scheduler)},"./node_modules/rxjs/_esm5/internal/scheduler/QueueAction.js":(e,t,r)=>{"use strict";r.r(t),r.d(t,{QueueAction:()=>n});var s=r("./node_modules/tslib/tslib.es6.js"),n=function(e){function t(t,r){var s=e.call(this,t,r)||this;return s.scheduler=t,s.work=r,s}return s.__extends(t,e),t.prototype.schedule=function(t,r){return void 0===r&&(r=0),r>0?e.prototype.schedule.call(this,t,r):(this.delay=r,this.state=t,this.scheduler.flush(this),this)},t.prototype.execute=function(t,r){return r>0||this.closed?e.prototype.execute.call(this,t,r):this._execute(t,r)},t.prototype.requestAsyncId=function(t,r,s){return void 0===s&&(s=0),null!==s&&s>0||null===s&&this.delay>0?e.prototype.requestAsyncId.call(this,t,r,s):t.flush(this)},t}(r("./node_modules/rxjs/_esm5/internal/scheduler/AsyncAction.js").AsyncAction)},"./node_modules/rxjs/_esm5/internal/scheduler/QueueScheduler.js":(e,t,r)=>{"use strict";r.r(t),r.d(t,{QueueScheduler:()=>n});var s=r("./node_modules/tslib/tslib.es6.js"),n=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s.__extends(t,e),t}(r("./node_modules/rxjs/_esm5/internal/scheduler/AsyncScheduler.js").AsyncScheduler)},"./node_modules/rxjs/_esm5/internal/scheduler/VirtualTimeScheduler.js":(e,t,r)=>{"use strict";r.r(t),r.d(t,{VirtualAction:()=>i,VirtualTimeScheduler:()=>o});var s=r("./node_modules/tslib/tslib.es6.js"),n=r("./node_modules/rxjs/_esm5/internal/scheduler/AsyncAction.js"),o=function(e){function t(t,r){void 0===t&&(t=i),void 0===r&&(r=Number.POSITIVE_INFINITY);var s=e.call(this,t,(function(){return s.frame}))||this;return s.maxFrames=r,s.frame=0,s.index=-1,s}return s.__extends(t,e),t.prototype.flush=function(){for(var e,t,r=this.actions,s=this.maxFrames;(t=r[0])&&t.delay<=s&&(r.shift(),this.frame=t.delay,!(e=t.execute(t.state,t.delay))););if(e){for(;t=r.shift();)t.unsubscribe();throw e}},t.frameTimeFactor=10,t}(r("./node_modules/rxjs/_esm5/internal/scheduler/AsyncScheduler.js").AsyncScheduler),i=function(e){function t(t,r,s){void 0===s&&(s=t.index+=1);var n=e.call(this,t,r)||this;return n.scheduler=t,n.work=r,n.index=s,n.active=!0,n.index=t.index=s,n}return s.__extends(t,e),t.prototype.schedule=function(r,s){if(void 0===s&&(s=0),!this.id)return e.prototype.schedule.call(this,r,s);this.active=!1;var n=new t(this.scheduler,this.work);return this.add(n),n.schedule(r,s)},t.prototype.requestAsyncId=function(e,r,s){void 0===s&&(s=0),this.delay=e.frame+s;var n=e.actions;return n.push(this),n.sort(t.sortActions),!0},t.prototype.recycleAsyncId=function(e,t,r){void 0===r&&(r=0)},t.prototype._execute=function(t,r){if(!0===this.active)return e.prototype._execute.call(this,t,r)},t.sortActions=function(e,t){return e.delay===t.delay?e.index===t.index?0:e.index>t.index?1:-1:e.delay>t.delay?1:-1},t}(n.AsyncAction)},"./node_modules/rxjs/_esm5/internal/scheduler/animationFrame.js":(e,t,r)=>{"use strict";r.r(t),r.d(t,{animationFrame:()=>o,animationFrameScheduler:()=>n});var s=r("./node_modules/rxjs/_esm5/internal/scheduler/AnimationFrameAction.js"),n=new(r("./node_modules/rxjs/_esm5/internal/scheduler/AnimationFrameScheduler.js").AnimationFrameScheduler)(s.AnimationFrameAction),o=n},"./node_modules/rxjs/_esm5/internal/scheduler/asap.js":(e,t,r)=>{"use strict";r.r(t),r.d(t,{asap:()=>o,asapScheduler:()=>n});var s=r("./node_modules/rxjs/_esm5/internal/scheduler/AsapAction.js"),n=new(r("./node_modules/rxjs/_esm5/internal/scheduler/AsapScheduler.js").AsapScheduler)(s.AsapAction),o=n},"./node_modules/rxjs/_esm5/internal/scheduler/async.js":(e,t,r)=>{"use strict";r.r(t),r.d(t,{async:()=>o,asyncScheduler:()=>n});var s=r("./node_modules/rxjs/_esm5/internal/scheduler/AsyncAction.js"),n=new(r("./node_modules/rxjs/_esm5/internal/scheduler/AsyncScheduler.js").AsyncScheduler)(s.AsyncAction),o=n},"./node_modules/rxjs/_esm5/internal/scheduler/queue.js":(e,t,r)=>{"use strict";r.r(t),r.d(t,{queue:()=>o,queueScheduler:()=>n});var s=r("./node_modules/rxjs/_esm5/internal/scheduler/QueueAction.js"),n=new(r("./node_modules/rxjs/_esm5/internal/scheduler/QueueScheduler.js").QueueScheduler)(s.QueueAction),o=n},"./node_modules/rxjs/_esm5/internal/symbol/iterator.js":(e,t,r)=>{"use strict";function s(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}r.r(t),r.d(t,{$$iterator:()=>o,getSymbolIterator:()=>s,iterator:()=>n});var n=s(),o=n},"./node_modules/rxjs/_esm5/internal/symbol/observable.js":(e,t,r)=>{"use strict";r.r(t),r.d(t,{observable:()=>s});var s=function(){return"function"==typeof Symbol&&Symbol.observable||"@@observable"}()},"./node_modules/rxjs/_esm5/internal/symbol/rxSubscriber.js":(e,t,r)=>{"use strict";r.r(t),r.d(t,{$$rxSubscriber:()=>n,rxSubscriber:()=>s});var s=function(){return"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()}(),n=s},"./node_modules/rxjs/_esm5/internal/util/ArgumentOutOfRangeError.js":(e,t,r)=>{"use strict";r.r(t),r.d(t,{ArgumentOutOfRangeError:()=>s});var s=function(){function e(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return e.prototype=Object.create(Error.prototype),e}()},"./node_modules/rxjs/_esm5/internal/util/EmptyError.js":(e,t,r)=>{"use strict";r.r(t),r.d(t,{EmptyError:()=>s});var s=function(){function e(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return e.prototype=Object.create(Error.prototype),e}()},"./node_modules/rxjs/_esm5/internal/util/Immediate.js":(e,t,r)=>{"use strict";r.r(t),r.d(t,{Immediate:()=>c,TestTools:()=>a});var s=1,n=function(){return Promise.resolve()}(),o={};function i(e){return e in o&&(delete o[e],!0)}var c={setImmediate:function(e){var t=s++;return o[t]=!0,n.then((function(){return i(t)&&e()})),t},clearImmediate:function(e){i(e)}},a={pending:function(){return Object.keys(o).length}}},"./node_modules/rxjs/_esm5/internal/util/ObjectUnsubscribedError.js":(e,t,r)=>{"use strict";r.r(t),r.d(t,{ObjectUnsubscribedError:()=>s});var s=function(){function e(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return e.prototype=Object.create(Error.prototype),e}()},"./node_modules/rxjs/_esm5/internal/util/TimeoutError.js":(e,t,r)=>{"use strict";r.r(t),r.d(t,{TimeoutError:()=>s});var s=function(){function e(){return Error.call(this),this.message="Timeout has occurred",this.name="TimeoutError",this}return e.prototype=Object.create(Error.prototype),e}()},"./node_modules/rxjs/_esm5/internal/util/UnsubscriptionError.js":(e,t,r)=>{"use strict";r.r(t),r.d(t,{UnsubscriptionError:()=>s});var s=function(){function e(e){return Error.call(this),this.message=e?e.length+" errors occurred during unsubscription:\n"+e.map((function(e,t){return t+1+") "+e.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=e,this}return e.prototype=Object.create(Error.prototype),e}()},"./node_modules/rxjs/_esm5/internal/util/canReportError.js":(e,t,r)=>{"use strict";r.r(t),r.d(t,{canReportError:()=>n});var s=r("./node_modules/rxjs/_esm5/internal/Subscriber.js");function n(e){for(;e;){var t=e,r=t.closed,n=t.destination,o=t.isStopped;if(r||o)return!1;e=n&&n instanceof s.Subscriber?n:null}return!0}},"./node_modules/rxjs/_esm5/internal/util/hostReportError.js":(e,t,r)=>{"use strict";function s(e){setTimeout((function(){throw e}),0)}r.r(t),r.d(t,{hostReportError:()=>s})},"./node_modules/rxjs/_esm5/internal/util/identity.js":(e,t,r)=>{"use strict";function s(e){return e}r.r(t),r.d(t,{identity:()=>s})},"./node_modules/rxjs/_esm5/internal/util/isArray.js":(e,t,r)=>{"use strict";r.r(t),r.d(t,{isArray:()=>s});var s=function(){return Array.isArray||function(e){return e&&"number"==typeof e.length}}()},"./node_modules/rxjs/_esm5/internal/util/isArrayLike.js":(e,t,r)=>{"use strict";r.r(t),r.d(t,{isArrayLike:()=>s});var s=function(e){return e&&"number"==typeof e.length&&"function"!=typeof e}},"./node_modules/rxjs/_esm5/internal/util/isFunction.js":(e,t,r)=>{"use strict";function s(e){return"function"==typeof e}r.r(t),r.d(t,{isFunction:()=>s})},"./node_modules/rxjs/_esm5/internal/util/isInteropObservable.js":(e,t,r)=>{"use strict";r.r(t),r.d(t,{isInteropObservable:()=>n});var s=r("./node_modules/rxjs/_esm5/internal/symbol/observable.js");function n(e){return e&&"function"==typeof e[s.observable]}},"./node_modules/rxjs/_esm5/internal/util/isIterable.js":(e,t,r)=>{"use strict";r.r(t),r.d(t,{isIterable:()=>n});var s=r("./node_modules/rxjs/_esm5/internal/symbol/iterator.js");function n(e){return e&&"function"==typeof e[s.iterator]}},"./node_modules/rxjs/_esm5/internal/util/isNumeric.js":(e,t,r)=>{"use strict";r.r(t),r.d(t,{isNumeric:()=>n});var s=r("./node_modules/rxjs/_esm5/internal/util/isArray.js");function n(e){return!(0,s.isArray)(e)&&e-parseFloat(e)+1>=0}},"./node_modules/rxjs/_esm5/internal/util/isObject.js":(e,t,r)=>{"use strict";function s(e){return null!==e&&"object"==typeof e}r.r(t),r.d(t,{isObject:()=>s})},"./node_modules/rxjs/_esm5/internal/util/isObservable.js":(e,t,r)=>{"use strict";r.r(t),r.d(t,{isObservable:()=>n});var s=r("./node_modules/rxjs/_esm5/internal/Observable.js");function n(e){return!!e&&(e instanceof s.Observable||"function"==typeof e.lift&&"function"==typeof e.subscribe)}},"./node_modules/rxjs/_esm5/internal/util/isPromise.js":(e,t,r)=>{"use strict";function s(e){return!!e&&"function"!=typeof e.subscribe&&"function"==typeof e.then}r.r(t),r.d(t,{isPromise:()=>s})},"./node_modules/rxjs/_esm5/internal/util/isScheduler.js":(e,t,r)=>{"use strict";function s(e){return e&&"function"==typeof e.schedule}r.r(t),r.d(t,{isScheduler:()=>s})},"./node_modules/rxjs/_esm5/internal/util/noop.js":(e,t,r)=>{"use strict";function s(){}r.r(t),r.d(t,{noop:()=>s})},"./node_modules/rxjs/_esm5/internal/util/not.js":(e,t,r)=>{"use strict";function s(e,t){function r(){return!r.pred.apply(r.thisArg,arguments)}return r.pred=e,r.thisArg=t,r}r.r(t),r.d(t,{not:()=>s})},"./node_modules/rxjs/_esm5/internal/util/pipe.js":(e,t,r)=>{"use strict";r.r(t),r.d(t,{pipe:()=>n,pipeFromArray:()=>o});var s=r("./node_modules/rxjs/_esm5/internal/util/identity.js");function n(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return o(e)}function o(e){return 0===e.length?s.identity:1===e.length?e[0]:function(t){return e.reduce((function(e,t){return t(e)}),t)}}},"./node_modules/rxjs/_esm5/internal/util/subscribeTo.js":(e,t,r)=>{"use strict";r.r(t),r.d(t,{subscribeTo:()=>h});var s=r("./node_modules/rxjs/_esm5/internal/util/subscribeToArray.js"),n=r("./node_modules/rxjs/_esm5/internal/util/subscribeToPromise.js"),o=r("./node_modules/rxjs/_esm5/internal/util/subscribeToIterable.js"),i=r("./node_modules/rxjs/_esm5/internal/util/subscribeToObservable.js"),c=r("./node_modules/rxjs/_esm5/internal/util/isArrayLike.js"),a=r("./node_modules/rxjs/_esm5/internal/util/isPromise.js"),u=r("./node_modules/rxjs/_esm5/internal/util/isObject.js"),l=r("./node_modules/rxjs/_esm5/internal/symbol/iterator.js"),d=r("./node_modules/rxjs/_esm5/internal/symbol/observable.js"),h=function(e){if(e&&"function"==typeof e[d.observable])return(0,i.subscribeToObservable)(e);if((0,c.isArrayLike)(e))return(0,s.subscribeToArray)(e);if((0,a.isPromise)(e))return(0,n.subscribeToPromise)(e);if(e&&"function"==typeof e[l.iterator])return(0,o.subscribeToIterable)(e);var t=(0,u.isObject)(e)?"an invalid object":"'"+e+"'";throw new TypeError("You provided "+t+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.")}},"./node_modules/rxjs/_esm5/internal/util/subscribeToArray.js":(e,t,r)=>{"use strict";r.r(t),r.d(t,{subscribeToArray:()=>s});var s=function(e){return function(t){for(var r=0,s=e.length;r<s&&!t.closed;r++)t.next(e[r]);t.complete()}}},"./node_modules/rxjs/_esm5/internal/util/subscribeToIterable.js":(e,t,r)=>{"use strict";r.r(t),r.d(t,{subscribeToIterable:()=>n});var s=r("./node_modules/rxjs/_esm5/internal/symbol/iterator.js"),n=function(e){return function(t){for(var r=e[s.iterator]();;){var n=void 0;try{n=r.next()}catch(e){return t.error(e),t}if(n.done){t.complete();break}if(t.next(n.value),t.closed)break}return"function"==typeof r.return&&t.add((function(){r.return&&r.return()})),t}}},"./node_modules/rxjs/_esm5/internal/util/subscribeToObservable.js":(e,t,r)=>{"use strict";r.r(t),r.d(t,{subscribeToObservable:()=>n});var s=r("./node_modules/rxjs/_esm5/internal/symbol/observable.js"),n=function(e){return function(t){var r=e[s.observable]();if("function"!=typeof r.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return r.subscribe(t)}}},"./node_modules/rxjs/_esm5/internal/util/subscribeToPromise.js":(e,t,r)=>{"use strict";r.r(t),r.d(t,{subscribeToPromise:()=>n});var s=r("./node_modules/rxjs/_esm5/internal/util/hostReportError.js"),n=function(e){return function(t){return e.then((function(e){t.closed||(t.next(e),t.complete())}),(function(e){return t.error(e)})).then(null,s.hostReportError),t}}},"./node_modules/rxjs/_esm5/internal/util/subscribeToResult.js":(e,t,r)=>{"use strict";r.r(t),r.d(t,{subscribeToResult:()=>i});var s=r("./node_modules/rxjs/_esm5/internal/InnerSubscriber.js"),n=r("./node_modules/rxjs/_esm5/internal/util/subscribeTo.js"),o=r("./node_modules/rxjs/_esm5/internal/Observable.js");function i(e,t,r,i,c){if(void 0===c&&(c=new s.InnerSubscriber(e,r,i)),!c.closed)return t instanceof o.Observable?t.subscribe(c):(0,n.subscribeTo)(t)(c)}},"./node_modules/rxjs/_esm5/internal/util/toSubscriber.js":(e,t,r)=>{"use strict";r.r(t),r.d(t,{toSubscriber:()=>i});var s=r("./node_modules/rxjs/_esm5/internal/Subscriber.js"),n=r("./node_modules/rxjs/_esm5/internal/symbol/rxSubscriber.js"),o=r("./node_modules/rxjs/_esm5/internal/Observer.js");function i(e,t,r){if(e){if(e instanceof s.Subscriber)return e;if(e[n.rxSubscriber])return e[n.rxSubscriber]()}return e||t||r?new s.Subscriber(e,t,r):new s.Subscriber(o.empty)}},"./node_modules/tslib/tslib.es6.js":(e,t,r)=>{"use strict";r.r(t),r.d(t,{__assign:()=>o,__asyncDelegator:()=>g,__asyncGenerator:()=>v,__asyncValues:()=>j,__await:()=>_,__awaiter:()=>l,__classPrivateFieldGet:()=>O,__classPrivateFieldSet:()=>A,__createBinding:()=>h,__decorate:()=>c,__exportStar:()=>p,__extends:()=>n,__generator:()=>d,__importDefault:()=>w,__importStar:()=>S,__makeTemplateObject:()=>x,__metadata:()=>u,__param:()=>a,__read:()=>b,__rest:()=>i,__spread:()=>m,__spreadArrays:()=>y,__values:()=>f});var s=function(e,t){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},s(e,t)};function n(e,t){function r(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var o=function(){return o=Object.assign||function(e){for(var t,r=1,s=arguments.length;r<s;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},o.apply(this,arguments)};function i(e,t){var r={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(r[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(s=Object.getOwnPropertySymbols(e);n<s.length;n++)t.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(e,s[n])&&(r[s[n]]=e[s[n]])}return r}function c(e,t,r,s){var n,o=arguments.length,i=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,r):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,s);else for(var c=e.length-1;c>=0;c--)(n=e[c])&&(i=(o<3?n(i):o>3?n(t,r,i):n(t,r))||i);return o>3&&i&&Object.defineProperty(t,r,i),i}function a(e,t){return function(r,s){t(r,s,e)}}function u(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function l(e,t,r,s){return new(r||(r=Promise))((function(n,o){function i(e){try{a(s.next(e))}catch(e){o(e)}}function c(e){try{a(s.throw(e))}catch(e){o(e)}}function a(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,c)}a((s=s.apply(e,t||[])).next())}))}function d(e,t){var r,s,n,o,i={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(o){return function(c){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,s&&(n=2&o[0]?s.return:o[0]?s.throw||((n=s.return)&&n.call(s),0):s.next)&&!(n=n.call(s,o[1])).done)return n;switch(s=0,n&&(o=[2&o[0],n.value]),o[0]){case 0:case 1:n=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,s=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!(n=i.trys,(n=n.length>0&&n[n.length-1])||6!==o[0]&&2!==o[0])){i=0;continue}if(3===o[0]&&(!n||o[1]>n[0]&&o[1]<n[3])){i.label=o[1];break}if(6===o[0]&&i.label<n[1]){i.label=n[1],n=o;break}if(n&&i.label<n[2]){i.label=n[2],i.ops.push(o);break}n[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(e){o=[6,e],s=0}finally{r=n=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,c])}}}function h(e,t,r,s){void 0===s&&(s=r),e[s]=t[r]}function p(e,t){for(var r in e)"default"===r||t.hasOwnProperty(r)||(t[r]=e[r])}function f(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],s=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&s>=e.length&&(e=void 0),{value:e&&e[s++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function b(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var s,n,o=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(s=o.next()).done;)i.push(s.value)}catch(e){n={error:e}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return i}function m(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(b(arguments[t]));return e}function y(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var s=Array(e),n=0;for(t=0;t<r;t++)for(var o=arguments[t],i=0,c=o.length;i<c;i++,n++)s[n]=o[i];return s}function _(e){return this instanceof _?(this.v=e,this):new _(e)}function v(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var s,n=r.apply(e,t||[]),o=[];return s={},i("next"),i("throw"),i("return"),s[Symbol.asyncIterator]=function(){return this},s;function i(e){n[e]&&(s[e]=function(t){return new Promise((function(r,s){o.push([e,t,r,s])>1||c(e,t)}))})}function c(e,t){try{(r=n[e](t)).value instanceof _?Promise.resolve(r.value.v).then(a,u):l(o[0][2],r)}catch(e){l(o[0][3],e)}var r}function a(e){c("next",e)}function u(e){c("throw",e)}function l(e,t){e(t),o.shift(),o.length&&c(o[0][0],o[0][1])}}function g(e){var t,r;return t={},s("next"),s("throw",(function(e){throw e})),s("return"),t[Symbol.iterator]=function(){return this},t;function s(s,n){t[s]=e[s]?function(t){return(r=!r)?{value:_(e[s](t)),done:"return"===s}:n?n(t):t}:n}}function j(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,r=e[Symbol.asyncIterator];return r?r.call(e):(e=f(e),t={},s("next"),s("throw"),s("return"),t[Symbol.asyncIterator]=function(){return this},t);function s(r){t[r]=e[r]&&function(t){return new Promise((function(s,n){(function(e,t,r,s){Promise.resolve(s).then((function(t){e({value:t,done:r})}),t)})(s,n,(t=e[r](t)).done,t.value)}))}}}function x(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function S(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function w(e){return e&&e.__esModule?e:{default:e}}function O(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)}function A(e,t,r){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,r),r}},"./node_modules/util/support/isBufferBrowser.js":e=>{e.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},"./node_modules/util/support/types.js":(e,t,r)=>{"use strict";var s=r("./node_modules/is-arguments/index.js"),n=r("./node_modules/is-generator-function/index.js"),o=r("./node_modules/which-typed-array/index.js"),i=r("./node_modules/is-typed-array/index.js");function c(e){return e.call.bind(e)}var a="undefined"!=typeof BigInt,u="undefined"!=typeof Symbol,l=c(Object.prototype.toString),d=c(Number.prototype.valueOf),h=c(String.prototype.valueOf),p=c(Boolean.prototype.valueOf);if(a)var f=c(BigInt.prototype.valueOf);if(u)var b=c(Symbol.prototype.valueOf);function m(e,t){if("object"!=typeof e)return!1;try{return t(e),!0}catch(e){return!1}}function y(e){return"[object Map]"===l(e)}function _(e){return"[object Set]"===l(e)}function v(e){return"[object WeakMap]"===l(e)}function g(e){return"[object WeakSet]"===l(e)}function j(e){return"[object ArrayBuffer]"===l(e)}function x(e){return"undefined"!=typeof ArrayBuffer&&(j.working?j(e):e instanceof ArrayBuffer)}function S(e){return"[object DataView]"===l(e)}function w(e){return"undefined"!=typeof DataView&&(S.working?S(e):e instanceof DataView)}t.isArgumentsObject=s,t.isGeneratorFunction=n,t.isTypedArray=i,t.isPromise=function(e){return"undefined"!=typeof Promise&&e instanceof Promise||null!==e&&"object"==typeof e&&"function"==typeof e.then&&"function"==typeof e.catch},t.isArrayBufferView=function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):i(e)||w(e)},t.isUint8Array=function(e){return"Uint8Array"===o(e)},t.isUint8ClampedArray=function(e){return"Uint8ClampedArray"===o(e)},t.isUint16Array=function(e){return"Uint16Array"===o(e)},t.isUint32Array=function(e){return"Uint32Array"===o(e)},t.isInt8Array=function(e){return"Int8Array"===o(e)},t.isInt16Array=function(e){return"Int16Array"===o(e)},t.isInt32Array=function(e){return"Int32Array"===o(e)},t.isFloat32Array=function(e){return"Float32Array"===o(e)},t.isFloat64Array=function(e){return"Float64Array"===o(e)},t.isBigInt64Array=function(e){return"BigInt64Array"===o(e)},t.isBigUint64Array=function(e){return"BigUint64Array"===o(e)},y.working="undefined"!=typeof Map&&y(new Map),t.isMap=function(e){return"undefined"!=typeof Map&&(y.working?y(e):e instanceof Map)},_.working="undefined"!=typeof Set&&_(new Set),t.isSet=function(e){return"undefined"!=typeof Set&&(_.working?_(e):e instanceof Set)},v.working="undefined"!=typeof WeakMap&&v(new WeakMap),t.isWeakMap=function(e){return"undefined"!=typeof WeakMap&&(v.working?v(e):e instanceof WeakMap)},g.working="undefined"!=typeof WeakSet&&g(new WeakSet),t.isWeakSet=function(e){return g(e)},j.working="undefined"!=typeof ArrayBuffer&&j(new ArrayBuffer),t.isArrayBuffer=x,S.working="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView&&S(new DataView(new ArrayBuffer(1),0,1)),t.isDataView=w;var O="undefined"!=typeof SharedArrayBuffer?SharedArrayBuffer:void 0;function A(e){return"[object SharedArrayBuffer]"===l(e)}function E(e){return void 0!==O&&(void 0===A.working&&(A.working=A(new O)),A.working?A(e):e instanceof O)}function P(e){return m(e,d)}function T(e){return m(e,h)}function M(e){return m(e,p)}function I(e){return a&&m(e,f)}function R(e){return u&&m(e,b)}t.isSharedArrayBuffer=E,t.isAsyncFunction=function(e){return"[object AsyncFunction]"===l(e)},t.isMapIterator=function(e){return"[object Map Iterator]"===l(e)},t.isSetIterator=function(e){return"[object Set Iterator]"===l(e)},t.isGeneratorObject=function(e){return"[object Generator]"===l(e)},t.isWebAssemblyCompiledModule=function(e){return"[object WebAssembly.Module]"===l(e)},t.isNumberObject=P,t.isStringObject=T,t.isBooleanObject=M,t.isBigIntObject=I,t.isSymbolObject=R,t.isBoxedPrimitive=function(e){return P(e)||T(e)||M(e)||I(e)||R(e)},t.isAnyArrayBuffer=function(e){return"undefined"!=typeof Uint8Array&&(x(e)||E(e))},["isProxy","isExternal","isModuleNamespaceObject"].forEach((function(e){Object.defineProperty(t,e,{enumerable:!1,value:function(){throw new Error(e+" is not supported in userland")}})}))},"./node_modules/util/util.js":(e,t,r)=>{var s=Object.getOwnPropertyDescriptors||function(e){for(var t=Object.keys(e),r={},s=0;s<t.length;s++)r[t[s]]=Object.getOwnPropertyDescriptor(e,t[s]);return r},n=/%[sdj%]/g;t.format=function(e){if(!_(e)){for(var t=[],r=0;r<arguments.length;r++)t.push(a(arguments[r]));return t.join(" ")}r=1;for(var s=arguments,o=s.length,i=String(e).replace(n,(function(e){if("%%"===e)return"%";if(r>=o)return e;switch(e){case"%s":return String(s[r++]);case"%d":return Number(s[r++]);case"%j":try{return JSON.stringify(s[r++])}catch(e){return"[Circular]"}default:return e}})),c=s[r];r<o;c=s[++r])m(c)||!j(c)?i+=" "+c:i+=" "+a(c);return i},t.deprecate=function(e,r){if("undefined"!=typeof process&&!0===process.noDeprecation)return e;if("undefined"==typeof process)return function(){return t.deprecate(e,r).apply(this,arguments)};var s=!1;return function(){if(!s){if(process.throwDeprecation)throw new Error(r);process.traceDeprecation?console.trace(r):console.error(r),s=!0}return e.apply(this,arguments)}};var o={},i=/^$/;if(process.env.NODE_DEBUG){var c=process.env.NODE_DEBUG;c=c.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),i=new RegExp("^"+c+"$","i")}function a(e,r){var s={seen:[],stylize:l};return arguments.length>=3&&(s.depth=arguments[2]),arguments.length>=4&&(s.colors=arguments[3]),b(r)?s.showHidden=r:r&&t._extend(s,r),v(s.showHidden)&&(s.showHidden=!1),v(s.depth)&&(s.depth=2),v(s.colors)&&(s.colors=!1),v(s.customInspect)&&(s.customInspect=!0),s.colors&&(s.stylize=u),d(s,e,s.depth)}function u(e,t){var r=a.styles[t];return r?"["+a.colors[r][0]+"m"+e+"["+a.colors[r][1]+"m":e}function l(e,t){return e}function d(e,r,s){if(e.customInspect&&r&&w(r.inspect)&&r.inspect!==t.inspect&&(!r.constructor||r.constructor.prototype!==r)){var n=r.inspect(s,e);return _(n)||(n=d(e,n,s)),n}var o=function(e,t){if(v(t))return e.stylize("undefined","undefined");if(_(t)){var r="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(r,"string")}if(y(t))return e.stylize(""+t,"number");if(b(t))return e.stylize(""+t,"boolean");if(m(t))return e.stylize("null","null")}(e,r);if(o)return o;var i=Object.keys(r),c=function(e){var t={};return e.forEach((function(e,r){t[e]=!0})),t}(i);if(e.showHidden&&(i=Object.getOwnPropertyNames(r)),S(r)&&(i.indexOf("message")>=0||i.indexOf("description")>=0))return h(r);if(0===i.length){if(w(r)){var a=r.name?": "+r.name:"";return e.stylize("[Function"+a+"]","special")}if(g(r))return e.stylize(RegExp.prototype.toString.call(r),"regexp");if(x(r))return e.stylize(Date.prototype.toString.call(r),"date");if(S(r))return h(r)}var u,l="",j=!1,O=["{","}"];(f(r)&&(j=!0,O=["[","]"]),w(r))&&(l=" [Function"+(r.name?": "+r.name:"")+"]");return g(r)&&(l=" "+RegExp.prototype.toString.call(r)),x(r)&&(l=" "+Date.prototype.toUTCString.call(r)),S(r)&&(l=" "+h(r)),0!==i.length||j&&0!=r.length?s<0?g(r)?e.stylize(RegExp.prototype.toString.call(r),"regexp"):e.stylize("[Object]","special"):(e.seen.push(r),u=j?function(e,t,r,s,n){for(var o=[],i=0,c=t.length;i<c;++i)T(t,String(i))?o.push(p(e,t,r,s,String(i),!0)):o.push("");return n.forEach((function(n){n.match(/^\d+$/)||o.push(p(e,t,r,s,n,!0))})),o}(e,r,s,c,i):i.map((function(t){return p(e,r,s,c,t,j)})),e.seen.pop(),function(e,t,r){if(e.reduce((function(e,t){return t.indexOf("\n")>=0&&0,e+t.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60)return r[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+r[1];return r[0]+t+" "+e.join(", ")+" "+r[1]}(u,l,O)):O[0]+l+O[1]}function h(e){return"["+Error.prototype.toString.call(e)+"]"}function p(e,t,r,s,n,o){var i,c,a;if((a=Object.getOwnPropertyDescriptor(t,n)||{value:t[n]}).get?c=a.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):a.set&&(c=e.stylize("[Setter]","special")),T(s,n)||(i="["+n+"]"),c||(e.seen.indexOf(a.value)<0?(c=m(r)?d(e,a.value,null):d(e,a.value,r-1)).indexOf("\n")>-1&&(c=o?c.split("\n").map((function(e){return"  "+e})).join("\n").substr(2):"\n"+c.split("\n").map((function(e){return"   "+e})).join("\n")):c=e.stylize("[Circular]","special")),v(i)){if(o&&n.match(/^\d+$/))return c;(i=JSON.stringify(""+n)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(i=i.substr(1,i.length-2),i=e.stylize(i,"name")):(i=i.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),i=e.stylize(i,"string"))}return i+": "+c}function f(e){return Array.isArray(e)}function b(e){return"boolean"==typeof e}function m(e){return null===e}function y(e){return"number"==typeof e}function _(e){return"string"==typeof e}function v(e){return void 0===e}function g(e){return j(e)&&"[object RegExp]"===O(e)}function j(e){return"object"==typeof e&&null!==e}function x(e){return j(e)&&"[object Date]"===O(e)}function S(e){return j(e)&&("[object Error]"===O(e)||e instanceof Error)}function w(e){return"function"==typeof e}function O(e){return Object.prototype.toString.call(e)}function A(e){return e<10?"0"+e.toString(10):e.toString(10)}t.debuglog=function(e){if(e=e.toUpperCase(),!o[e])if(i.test(e)){var r=process.pid;o[e]=function(){var s=t.format.apply(t,arguments);console.error("%s %d: %s",e,r,s)}}else o[e]=function(){};return o[e]},t.inspect=a,a.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},a.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},t.types=r("./node_modules/util/support/types.js"),t.isArray=f,t.isBoolean=b,t.isNull=m,t.isNullOrUndefined=function(e){return null==e},t.isNumber=y,t.isString=_,t.isSymbol=function(e){return"symbol"==typeof e},t.isUndefined=v,t.isRegExp=g,t.types.isRegExp=g,t.isObject=j,t.isDate=x,t.types.isDate=x,t.isError=S,t.types.isNativeError=S,t.isFunction=w,t.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},t.isBuffer=r("./node_modules/util/support/isBufferBrowser.js");var E=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function P(){var e=new Date,t=[A(e.getHours()),A(e.getMinutes()),A(e.getSeconds())].join(":");return[e.getDate(),E[e.getMonth()],t].join(" ")}function T(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.log=function(){console.log("%s - %s",P(),t.format.apply(t,arguments))},t.inherits=r("./node_modules/inherits/inherits_browser.js"),t._extend=function(e,t){if(!t||!j(t))return e;for(var r=Object.keys(t),s=r.length;s--;)e[r[s]]=t[r[s]];return e};var M="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;function I(e,t){if(!e){var r=new Error("Promise was rejected with a falsy value");r.reason=e,e=r}return t(e)}t.promisify=function(e){if("function"!=typeof e)throw new TypeError('The "original" argument must be of type Function');if(M&&e[M]){var t;if("function"!=typeof(t=e[M]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(t,M,{value:t,enumerable:!1,writable:!1,configurable:!0}),t}function t(){for(var t,r,s=new Promise((function(e,s){t=e,r=s})),n=[],o=0;o<arguments.length;o++)n.push(arguments[o]);n.push((function(e,s){e?r(e):t(s)}));try{e.apply(this,n)}catch(e){r(e)}return s}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),M&&Object.defineProperty(t,M,{value:t,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(t,s(e))},t.promisify.custom=M,t.callbackify=function(e){if("function"!=typeof e)throw new TypeError('The "original" argument must be of type Function');function t(){for(var t=[],r=0;r<arguments.length;r++)t.push(arguments[r]);var s=t.pop();if("function"!=typeof s)throw new TypeError("The last argument must be of type Function");var n=this,o=function(){return s.apply(n,arguments)};e.apply(this,t).then((function(e){process.nextTick(o.bind(null,null,e))}),(function(e){process.nextTick(I.bind(null,e,o))}))}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),Object.defineProperties(t,s(e)),t}},"./node_modules/which-typed-array/index.js":(e,t,r)=>{"use strict";var s=r("./node_modules/for-each/index.js"),n=r("./node_modules/available-typed-arrays/index.js"),o=r("./node_modules/call-bind/callBound.js"),i=o("Object.prototype.toString"),c=r("./node_modules/has-tostringtag/shams.js")(),a="undefined"==typeof globalThis?r.g:globalThis,u=n(),l=o("String.prototype.slice"),d={},h=r("./node_modules/es-abstract/helpers/getOwnPropertyDescriptor.js"),p=Object.getPrototypeOf;c&&h&&p&&s(u,(function(e){if("function"==typeof a[e]){var t=new a[e];if(Symbol.toStringTag in t){var r=p(t),s=h(r,Symbol.toStringTag);if(!s){var n=p(r);s=h(n,Symbol.toStringTag)}d[e]=s.get}}}));var f=r("./node_modules/is-typed-array/index.js");e.exports=function(e){return!!f(e)&&(c&&Symbol.toStringTag in e?function(e){var t=!1;return s(d,(function(r,s){if(!t)try{var n=r.call(e);n===s&&(t=n)}catch(e){}})),t}(e):l(i(e),8,-1))}},"./node_modules/available-typed-arrays/index.js":(e,t,r)=>{"use strict";var s=["BigInt64Array","BigUint64Array","Float32Array","Float64Array","Int16Array","Int32Array","Int8Array","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray"],n="undefined"==typeof globalThis?r.g:globalThis;e.exports=function(){for(var e=[],t=0;t<s.length;t++)"function"==typeof n[s[t]]&&(e[e.length]=s[t]);return e}},"./node_modules/es-abstract/helpers/getOwnPropertyDescriptor.js":(e,t,r)=>{"use strict";var s=r("./node_modules/get-intrinsic/index.js")("%Object.getOwnPropertyDescriptor%",!0);if(s)try{s([],"length")}catch(e){s=null}e.exports=s}},t={};function r(s){var n=t[s];if(void 0!==n)return n.exports;var o=t[s]={exports:{}};return e[s].call(o.exports,o,o.exports,r),o.exports}return r.d=(e,t)=>{for(var s in t)r.o(t,s)&&!r.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r("./src/index.ts")})()));
//# sourceMappingURL=tinode.js.map